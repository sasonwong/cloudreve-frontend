(this["webpackJsonpcloudreve-frontend"]=this["webpackJsonpcloudreve-frontend"]||[]).push([[2],{102:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var n=a(9),r=a(5),o=a(0),i=a(52),c=a(18);function l(e,t,a){var l=Object(r.d)(),s=Object(o.useState)(""),u=Object(n.a)(s,2),p=u[0],d=u[1],m=Object(o.useState)(""),f=Object(n.a)(m,2),h=f[0],g=f[1],b=Object(o.useCallback)((function(e){return l(Object(i.b)(e))}),[l]);return Object(o.useEffect)((function(){if(c.a.isSharePage(a.pathname))b(e.get("name")),d(e.get("name")),g(e.get("share_path"));else{var t=e.get("p").split("/");g(e.get("p")),b(t[t.length-1]),d(t[t.length-1])}}),[t.params[0],a]),{title:p,path:h}}},115:function(e,t,a){"use strict";var n=a(6),r=a(0),o=a.n(r),i=a(106),c=a(95),l=a(46),s=Object(c.a)((function(e){return{loader:Object(n.a)({width:"70%",padding:40},e.breakpoints.down("md"),{width:"100%",padding:10})}})),u=function(e){return o.a.createElement(i.b,{backgroundColor:e.dark?"#333":"#f5f6f7",foregroundColor:e.dark?"#636363":"#eee",className:e.className})};t.a=function(){var e=Object(l.a)(),t=s();return o.a.createElement("div",null,o.a.createElement(u,{dark:"dark"===e.palette.type,className:t.loader}))}},117:function(e,t,a){"use strict";a.r(t),a.d(t,"initState",(function(){return o}));var n=a(10),r=a(41),o={dndSignal:!1,dndTarget:null,dndSource:null,fileList:[],dirList:[],selected:[],selectProps:{isMultiple:!1,withFolder:!1,withFile:!1,withSourceEnabled:!1},lastSelect:{file:{id:"",name:"",size:0,type:"file",date:"",path:"",create_date:""},index:-1},shiftSelectedIds:[],imgPreview:{first:{id:"",name:"",size:0,type:"file",date:"",path:"",create_date:""},other:[]},audioPreview:{first:{id:"",name:"",size:0,type:"file",date:"",path:"",create_date:""},other:[],playingName:null,paused:!1,isOpen:!1},fileSave:!1,sideBarOpen:!1},i=function(e){var t=e.length>1,a=!1,n=!1,r=!1;return e.forEach((function(e){"dir"===e.type?(a=!0,r=!0):"file"===e.type&&(n=!0,e.source_enabled&&(r=!0))})),{isMultiple:t,withFolder:a,withFile:n,withSourceEnabled:r}};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"DRAG_AND_DROP":return Object.assign({},e,{dndSignal:!e.dndSignal,dndTarget:t.target,dndSource:t.source});case"SET_FILE_LIST":return Object.assign({},e,{fileList:t.list});case"SET_DIR_LIST":return Object.assign({},e,{dirList:t.list});case"ADD_SELECTED_TARGETS":var a=[].concat(Object(r.a)(e.selected),Object(r.a)(t.targets));return Object.assign({},e,{selected:a,selectProps:i(a)});case"SET_SELECTED_TARGET":var c=t.targets;return Object.assign({},e,{selected:c,selectProps:i(c)});case"RMOVE_SELECTED_TARGETS":var l=t.fileIds,s=e.selected.filter((function(e){return!l.includes(e.id)}));return Object.assign({},e,{selected:s,selectProps:i(s)});case"REFRESH_FILE_LIST":return Object.assign({},e,{selected:[],selectProps:{isMultiple:!1,withFolder:!1,withFile:!1,withSourceEnabled:!1}});case"SEARCH_MY_FILE":return Object.assign({},e,{selected:[],selectProps:{isMultiple:!1,withFolder:!1,withFile:!1,withSourceEnabled:!1},search:{keywords:t.keywords,searchPath:t.path}});case"SHOW_IMG_PREIVEW":return Object.assign({},e,{imgPreview:{first:t.first,other:e.fileList}});case"SHOW_AUDIO_PREVIEW":return Object.assign({},e,{audioPreview:Object(n.a)(Object(n.a)({},e.audioPreview),{},{first:t.first,other:e.fileList})});case"AUDIO_PREVIEW_SET_IS_OPEN":return Object.assign({},e,{audioPreview:Object(n.a)(Object(n.a)({},e.audioPreview),{},{isOpen:t.isOpen})});case"AUDIO_PREVIEW_SET_PLAYING":return Object.assign({},e,{audioPreview:Object(n.a)(Object(n.a)({},e.audioPreview),{},{playingName:t.playingName,paused:t.paused})});case"SAVE_FILE":return Object(n.a)(Object(n.a)({},e),{},{fileSave:!e.fileSave});case"SET_LAST_SELECT":var u=t.file,p=t.index;return Object(n.a)(Object(n.a)({},e),{},{lastSelect:{file:u,index:p}});case"SET_SHIFT_SELECTED_IDS":var d=t.shiftSelectedIds;return Object(n.a)(Object(n.a)({},e),{},{shiftSelectedIds:d});case"SET_NAVIGATOR":return Object(n.a)(Object(n.a)({},e),{},{selected:[],selectProps:{isMultiple:!1,withFolder:!1,withFile:!1,withSourceEnabled:!1},search:void 0});case"SET_SIDE_BAR":return Object(n.a)(Object(n.a)({},e),{},{sideBarOpen:t.open});case"SET_CURRENT_POLICY":return Object(n.a)(Object(n.a)({},e),{},{currentPolicy:t.policy});default:return e}}},12:function(e,t,a){"use strict";a.d(t,"b",(function(){return d})),a.d(t,"d",(function(){return m})),a.d(t,"e",(function(){return f})),a.d(t,"a",(function(){return g}));var n=a(14),r=a(13),o=a(16),i=a(17),c=a(301),l=a(92),s=a.n(l),u=a(19),p=a(21),d="/api/v3",m=function(){return d},f=function(e,t,a,n){return m()+(e?"/share/preview/"+t+(""!==n?"?path="+encodeURIComponent(n):""):"/file/preview/"+a)},h=s.a.create({baseURL:m(),withCredentials:!0}),g=function(e){Object(o.a)(a,e);var t=Object(i.a)(a);function a(e,n,o){var i;return Object(r.a)(this,a),(i=t.call(this,e)).code=n,i.code=n,p.a.exists("errors.".concat(n),{ns:"common"})?i.message=p.a.t("errors.".concat(n),{ns:"common",message:e}):p.a.exists("errors.".concat(n),{ns:"dashboard"})?i.message=p.a.t("errors.".concat(n),{ns:"dashboard",message:e}):i.message=e||p.a.t("unknownError",{ns:"common"}),i.message+=o&&!i.message.includes(o)?" (".concat(o,")"):"",i.stack=(new Error).stack,i}return Object(n.a)(a)}(Object(c.a)(Error));h.interceptors.response.use((function(e){if(e.rawData=e.data,e.data=e.data.data,void 0!==e.rawData.code&&0!==e.rawData.code&&203!==e.rawData.code)throw 401===e.rawData.code&&(u.a.signout(),window.location.href="/login?redirect="+encodeURIComponent(window.location.pathname+window.location.search)),40008===e.rawData.code&&(window.location.href="/home"),new g(e.rawData.msg,e.rawData.code,e.rawData.error);return e}),(function(e){return Promise.reject(e)})),t.c=h},128:function(e,t,a){"use strict";var n=a(9),r=a(0),o=a.n(r),i=a(468);t.a=function(e){var t=e.children,a=e.enable,c=e.hide,l=void 0!==c&&c,s=e.element,u=void 0===s?null:s,p=Object(r.useState)(!1),d=Object(n.a)(p,2),m=d[0],f=d[1],h=window.scrollY,g=window.scrollY;return Object(r.useEffect)((function(){a&&(u||window).addEventListener("scroll",(function(e){return function(e){var t=e.currentTarget,a=u?u.scrollTop:t.scrollY;h>a?g-a>50&&(g=a,f(!1)):h<a&&a-g>50&&(g=a,f(!0)),h=a}(e)}))}),[a]),o.a.createElement(i.a,{in:!m&&!l},t)}},159:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(11),r=a.n(n),o=a(23),i=a(12);function c(e,t,a,n){return l.apply(this,arguments)}function l(){return(l=Object(o.a)(r.a.mark((function e(t,a,n,o){var c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c="",c=a?""===n?"/share/list/"+a.key:"/share/search/".concat(a.key,"/"):""===n?"/directory":"/file/search/",t=""===n?t:n,c+=encodeURIComponent(t),o&&(c="".concat(c,"?path=").concat(encodeURIComponent(o))),e.abrupt("return",i.c.get(c));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},160:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(11),r=a.n(n),o=a(23),i=a(12);function c(e){return l.apply(this,arguments)}function l(){return(l=Object(o.a)(r.a.mark((function e(t){var a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="",t.key?(n="/"===t.path?t.path+t.name:t.path+"/"+t.name,a="/share/download/"+t.key+"?path="+encodeURIComponent(n)):a="/file/download/"+t.id,e.abrupt("return",i.c.put(a));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},165:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var n=a(11),r=a.n(n),o=a(10),i=a(23),c=a(52),l=a(21),s=function(e,t){return function(){var a=Object(i.a)(r.a.mark((function a(n,i){return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",new Promise((function(a,r){var i={open:!0,title:t,options:e};n(Object(c.g)(Object(o.a)(Object(o.a)({},i),{},{onClose:function(){n(Object(c.g)(Object(o.a)(Object(o.a)({},i),{},{open:!1}))),r(l.a.t("fileManager.userDenied"))},callback:function(e){a(e),n(Object(c.g)(Object(o.a)(Object(o.a)({},i),{},{open:!1})))}})))})));case 1:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}()}},18:function(e,t,a){"use strict";var n={isHomePage:function(e){return"/home"===e},isSharePage:function(e){return e&&e.startsWith("/s/")},isAdminPage:function(e){return e&&e.startsWith("/admin")},isLoginPage:function(e){return e&&e.startsWith("/login")},isMobile:function(){return window.innerWidth<600}};t.a=n},19:function(e,t,a){"use strict";var n={isAuthenticated:!1,authenticate:function(e){n.SetUser(e),n.isAuthenticated=!0},GetUser:function(){return JSON.parse(localStorage.getItem("user")||"null")},SetUser:function(e){localStorage.setItem("user",JSON.stringify(e))},Check:function(){return!!n.isAuthenticated||null!==localStorage.getItem("user")&&!n.GetUser().anonymous},signout:function(){n.isAuthenticated=!1;var e=n.GetUser();e.id=0,localStorage.setItem("user",JSON.stringify(e))},SetPreference:function(e,t){var a=JSON.parse(localStorage.getItem("user_preference")||"{}");(a=null==a?{}:a)[e]=t,localStorage.setItem("user_preference",JSON.stringify(a))},GetPreference:function(e){var t=JSON.parse(localStorage.getItem("user_preference")||"{}");return t&&void 0!==t[e]?t[e]:null},GetPreferenceWithDefault:function(e,t){return null!==n.GetPreference(e)?n.GetPreference(e):t}};t.a=n},2:function(e,t,a){"use strict";a.d(t,"j",(function(){return l})),a.d(t,"k",(function(){return s})),a.d(t,"i",(function(){return u})),a.d(t,"h",(function(){return p})),a.d(t,"e",(function(){return d})),a.d(t,"R",(function(){return m})),a.d(t,"d",(function(){return f})),a.d(t,"J",(function(){return h})),a.d(t,"I",(function(){return g})),a.d(t,"o",(function(){return b})),a.d(t,"n",(function(){return E})),a.d(t,"O",(function(){return v})),a.d(t,"M",(function(){return O})),a.d(t,"y",(function(){return j})),a.d(t,"z",(function(){return w})),a.d(t,"t",(function(){return k})),a.d(t,"x",(function(){return y})),a.d(t,"A",(function(){return x})),a.d(t,"a",(function(){return C})),a.d(t,"L",(function(){return S})),a.d(t,"u",(function(){return N})),a.d(t,"w",(function(){return T})),a.d(t,"B",(function(){return P})),a.d(t,"p",(function(){return L})),a.d(t,"l",(function(){return F})),a.d(t,"r",(function(){return D})),a.d(t,"m",(function(){return I})),a.d(t,"s",(function(){return R})),a.d(t,"f",(function(){return M})),a.d(t,"S",(function(){return A})),a.d(t,"H",(function(){return _})),a.d(t,"C",(function(){return U})),a.d(t,"F",(function(){return W})),a.d(t,"Q",(function(){return z})),a.d(t,"P",(function(){return B})),a.d(t,"b",(function(){return G})),a.d(t,"c",(function(){return H})),a.d(t,"D",(function(){return V})),a.d(t,"E",(function(){return q})),a.d(t,"N",(function(){return K})),a.d(t,"q",(function(){return Y}));var n=a(10),r=a(40),o=a(117),i=a(52);a.d(t,"G",(function(){return r.selectFile})),a.d(t,"v",(function(){return r.openPreview})),a.d(t,"K",(function(){return r.setSelectedTarget})),t.g={actions:r,reducers:o};var c=function(e,t){return{type:"SET_NAVIGATOR",path:e,navigatorLoading:t}},l=function(e){return function(t,a){var r=a(),o=e!==r.navigator.path;o&&t(Object(i.h)(Object(n.a)(Object(n.a)({},r.viewUpdate.pagination),{},{page:1}))),t(c(e,o))}},s=function(){return function(e,t){var a=t(),r=a.navigator.path.split("/");r.pop();var o=1===r.length?"/":r.join("/"),l=o!==a.navigator.path;l&&e(Object(i.h)(Object(n.a)(Object(n.a)({},a.viewUpdate.pagination),{},{page:1}))),e(c(o,l))}},u=function(e){return{type:"DRAWER_TOGGLE",open:e}},p=function(e,t){return{type:"DRAG_AND_DROP",source:e,target:t}},d=function(e){return{type:"CHANGE_VIEW_METHOD",method:e}},m=function(){return{type:"TOGGLE_DAYLIGHT_MODE"}},f=function(e,t){return{type:"CHANGE_CONTEXT_MENU",menuType:e,open:t}},h=function(e){return{type:"SET_NAVIGATOR_LOADING_STATUE",status:e}},g=function(e,t){return{type:"SET_NAVIGATOR_ERROR",status:e,msg:t}},b=function(){return{type:"OPEN_CREATE_FOLDER_DIALOG"}},E=function(){return{type:"OPEN_CREATE_FILE_DIALOG"}},v=function(e){return{type:"SET_USER_POPOVER",anchor:e}},O=function(e){return{type:"SET_SHARE_USER_POPOVER",anchor:e}},j=function(){return{type:"OPEN_RENAME_DIALOG"}},w=function(e){return{type:"OPEN_RESAVE_DIALOG",key:e}},k=function(){return{type:"OPEN_MOVE_DIALOG"}},y=function(){return{type:"OPEN_REMOVE_DIALOG"}},x=function(){return{type:"OPEN_SHARE_DIALOG"}},C=function(e){return{type:"APPLY_THEME",theme:e}},S=function(e){return{type:"SET_SESSION_STATUS",status:e}},N=function(){return{type:"OPEN_MUSIC_DIALOG"}},T=function(){return{type:"OPEN_REMOTE_DOWNLOAD_DIALOG"}},P=function(e){return{type:"OPEN_TORRENT_DOWNLOAD_DIALOG",selected:e}},L=function(){return{type:"OPEN_DECOMPRESS_DIALOG"}},F=function(){return{type:"OPEN_COMPRESS_DIALOG"}},D=function(e){return{type:"OPEN_GET_SOURCE_DIALOG",source:e}},I=function(){return{type:"OPEN_COPY_DIALOG"}},R=function(e){return{type:"OPEN_LOADING_DIALOG",text:e}},M=function(){return{type:"CLOSE_ALL_MODALS"}},A=function(e,t,a,n){return{type:"TOGGLE_SNACKBAR",vertical:e,horizontal:t,msg:a,color:n}},_=function(e){return{type:"SET_MODALS_LOADING",status:e}},U=function(){return{type:"REFRESH_FILE_LIST"}},W=function(e,t){return{type:"SEARCH_MY_FILE",keywords:e,path:t}},z=function(e){return{type:"SHOW_IMG_PREIVEW",first:e}},B=function(e){return{type:"SHOW_AUDIO_PREVIEW",first:e}},G=function(e){return{type:"AUDIO_PREVIEW_SET_IS_OPEN",isOpen:e}},H=function(e,t){return{type:"AUDIO_PREVIEW_SET_PLAYING",playingName:e,paused:t}},V=function(){return{type:"REFRESH_STORAGE"}},q=function(){return{type:"SAVE_FILE"}},K=function(e){return{type:"SET_SITE_CONFIG",config:e}},Y=function(e,t,a){return{type:"OPEN_DIRECTORY_DOWNLOAD_DIALOG",downloading:e,log:t,done:a}}},21:function(e,t,a){"use strict";a.d(t,"b",(function(){return s}));var n=a(167),r=a(110),o=a(387),i=a(466),c=a(467),l=a(465);n.a.use(i.a).use(c.a).use(r.e).init({fallbackLng:"en-US",debug:!0,ns:["common","application"],load:"currentOnly",defaultNS:"application",interpolation:{escapeValue:!1},backend:{backends:[l.a,o.a],backendOptions:[{expirationTime:6048e5},{queryStringParams:{v:"3.8.0-beta1"},loadPath:"/locales/{{lng}}/{{ns}}.json"}]}}),n.a.on("languageChanged",(function(e){document.documentElement.setAttribute("lang",e)}));var s=[{code:"en-US",displayName:"English"},{code:"zh-CN",displayName:"\u7b80\u4f53\u4e2d\u6587"},{code:"zh-TW",displayName:"\u7e41\u9ad4\u4e2d\u6587"}];t.a=n.a},212:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a(13),r=a(14),o=a(36),i=function(){function e(t){Object(n.a)(this,e),this.limit=t,this.queue=[],this.processing=[]}return Object(r.a)(e,[{key:"enqueue",value:function(e){var t=this;return new Promise((function(a,n){t.queue.push({uploader:e,resolve:a,reject:n}),t.check()}))}},{key:"release",value:function(e){this.processing=this.processing.filter((function(t){return t!==e})),this.check()}},{key:"run",value:function(e){var t=this;if(this.queue=this.queue.filter((function(t){return t!==e})),this.processing.findIndex((function(t){return t.uploader.task.dst==e.uploader.task.dst&&t.uploader.task.file.name==e.uploader.task.name}))>-1)return e.reject(new o.k),void this.release(e);this.processing.push(e),e.uploader.run().then((function(){e.resolve(),t.release(e)}),(function(a){e.reject(a),t.release(e)}))}},{key:"check",value:function(){var e=this,t=this.processing.length,a=Math.max(0,this.limit-t);this.queue.slice(0,a).forEach((function(t){e.run(t)}))}}]),e}()},213:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a(36),r=[function(e,t){if(void 0!=t.allowedSuffix&&t.allowedSuffix.length>0){var a=null===e||void 0===e?void 0:e.name.split(".").pop();if(null===a||!a||!t.allowedSuffix.includes(a))throw new n.e("File suffix not allowed in policy.","suffix",t)}},function(e,t){if(t.maxSize>0&&e.size>t.maxSize)throw new n.e("File size exceeds maximum limit.","size",t)}];function o(e,t){r.forEach((function(a){return a(e,t)}))}},214:function(e,t,a){"use strict";a.d(t,"a",(function(){return c})),a.d(t,"b",(function(){return u})),a.d(t,"c",(function(){return p}));var n=a(10),r=a(92),o=a.n(r),i=a(36),c=o.a.CancelToken,l={transformResponse:[function(e){try{return JSON.parse(e)}catch(t){throw new i.s(e,t)}}]},s=Object(n.a)(Object(n.a)({},l),{},{baseURL:"/api/v3",withCredentials:!0});function u(e,t){return o.a.request(Object(n.a)(Object(n.a)(Object(n.a)({},l),t),{},{url:e})).catch((function(t){if(o.a.isCancel(t))throw new i.n;if(t instanceof i.s)throw t;throw new i.f(t,e)}))}function p(e,t){return u(e,Object(n.a)(Object(n.a)({},s),t))}},234:function(e,t,a){"use strict";var n=a(6),r=a(0),o=a.n(r),i=a(95),c=a(53),l=a(406),s=a.n(l),u=a(405),p=a.n(u),d=a(5),m=a(80),f=a(19),h=a(31),g=a.n(h),b=a(2),E=a(111),v=Object(i.a)((function(){return{icon:{color:"rgb(255, 255, 255)",opacity:"0.54"}}}));t.a=function(e){var t=e.position,a=Object(E.a)().t,i=Object(d.e)((function(e){return e.siteConfig.theme.palette.type})),l=Object(d.d)(),u=Object(r.useCallback)((function(){return l(Object(b.R)())}),[l]),h=i&&"light"===i||!i,O=i&&"dark"===i,j=v();return o.a.createElement(m.a,{title:a(h?"navbar.toDarkMode":"navbar.toLightMode"),placement:"bottom"},o.a.createElement(c.a,{className:g()(Object(n.a)({},j.icon,"left"===t)),onClick:function(){f.a.SetPreference("theme_mode",h?"dark":"light"),u()},color:"inherit"},h&&o.a.createElement(p.a,null),O&&o.a.createElement(s.a,null)))}},235:function(e,t,a){"use strict";a.d(t,"a",(function(){return P}));var n=a(9),r=a(0),o=a.n(r),i=a(95),c=a(53),l=a(253),s=a(74),u=a(415),p=a.n(u),d=a(416),m=a.n(d),f=a(417),h=a.n(f),g=a(418),b=a.n(g),E=a(256),v=a(5),O=a(19),j=a(2),w=a(40),k=a(30),y=a(18),x=a(52),C=a(111),S=Object(i.a)((function(e){return{sideButton:{padding:"8px",marginRight:"5px"}}})),N=["A-Z","Z-A","oldestUploaded","newestUploaded","oldestModified","newestModified","smallest","largest"],T=["50","100","200","500","1000"];function P(e){var t=e.isSmall,a=e.inherit,i=Object(C.a)("application",{keyPrefix:"fileManager"}).t,u=(Object(C.a)("application",{keyPrefix:"vas"}).t,Object(v.d)()),d=Object(v.e)((function(e){return e.viewUpdate.explorerViewMethod})),f=Object(v.e)((function(e){return e.viewUpdate.shareInfo})),g=Object(v.e)((function(e){return e.viewUpdate.pagination.size})),P=Object(r.useCallback)((function(e){return u(Object(j.e)(e))}),[u]),L=Object(r.useCallback)((function(e){return u(Object(w.changeSortMethod)(e))}),[u]),F=Object(r.useCallback)((function(e){return u(Object(j.M)(e))}),[u]),D=Object(r.useCallback)((function(e){return u(Object(x.a)(e))}),[u]),I=Object(r.useState)(null),R=Object(n.a)(I,2),M=R[0],A=R[1],_=Object(r.useState)(null),U=Object(n.a)(_,2),W=U[0],z=U[1],B=Object(r.useState)(0),G=Object(n.a)(B,2),H=G[0],V=G[1],q=function(e){D(e),z(null)},K=function(){var e="icon"===d?"list":"list"===d?"smallIcon":"icon";O.a.SetPreference("view_method",e),P(e)},Y=y.a.isMobile(),J=S();return o.a.createElement(o.a.Fragment,null,"icon"===d&&o.a.createElement(c.a,{title:i("listView"),className:J.sideButton,onClick:K,color:a?"inherit":"default"},o.a.createElement(p.a,{fontSize:t?"small":"default"})),"list"===d&&o.a.createElement(c.a,{title:i("gridViewSmall"),className:J.sideButton,onClick:K,color:a?"inherit":"default"},o.a.createElement(m.a,{fontSize:t?"small":"default"})),"smallIcon"===d&&o.a.createElement(c.a,{title:i("gridViewLarge"),className:J.sideButton,onClick:K,color:a?"inherit":"default"},o.a.createElement(h.a,{fontSize:t?"small":"default"})),!Y&&o.a.createElement(c.a,{title:i("paginationSize"),className:J.sideButton,onClick:function(e){z(e.currentTarget)},color:a?"inherit":"default"},o.a.createElement(k.p,{fontSize:t?"small":"default"})),o.a.createElement(l.a,{id:"sort-menu",anchorEl:W,open:Boolean(W),onClose:function(){return z(null)}},T.map((function(e,t){return o.a.createElement(s.a,{key:e,selected:e===g.toString(),onClick:function(){return q(parseInt(e))}},i("paginationOption",{option:e}))})),o.a.createElement(s.a,{selected:-1===g,onClick:function(){return q(-1)}},i("noPagination"))),o.a.createElement(c.a,{title:i("sortMethod"),className:J.sideButton,onClick:function(e){A(e.currentTarget)},color:a?"inherit":"default"},o.a.createElement(b.a,{fontSize:t?"small":"default"})),o.a.createElement(l.a,{id:"sort-menu",anchorEl:M,open:Boolean(M),onClose:function(){return A(null)}},N.map((function(e,t){return o.a.createElement(s.a,{key:e,selected:t===H,onClick:function(e){return function(e,t){V(t);L({0:"namePos",1:"nameRev",2:"timePos",3:"timeRev",4:"modifyTimePos",5:"modifyTimeRev",6:"sizePos",7:"sizeRes"}[t]),A(null)}(0,t)}},i("sortMethods."+e))}))),f&&o.a.createElement(c.a,{title:i("shareCreateBy",{nick:f.creator.nick}),className:J.sideButton,onClick:function(e){return F(e.currentTarget)},style:{padding:5}},o.a.createElement(E.a,{style:{height:23,width:23},src:"/api/v3/user/avatar/"+f.creator.key+"/s"})))}},242:function(e,t,a){"use strict";a.d(t,"a",(function(){return ae}));var n=a(6),r=a(10),o=a(9),i=a(0),c=a.n(i),l=a(95),s=a(478),u=a(479),p=a(291),d=a(170),m=a(287),f=a(480),h=a(7047),g=a(482),b=a(254),E=a(470),v=a(2),O=a(5),j=a(12),w=a(198),k=a(62),y=a(148),x=a(64),C=a(144),S=a.n(C),N=a(441),T=a.n(N),P=a(440),L=a.n(P),F=a(200),D=a(149),I=a(474),R=a(476),M=a(477),A=a(54),_=a(69),U=a.n(_),W=a(481),z=a(7051),B=a(7052),G=a(53),H=a(288),V=a(487),q=a(80),K=a(74),Y=a(255),J=a(163),Z=a.n(J),Q=a(111),X=Object(l.a)((function(e){return{widthAnimation:{},shareUrl:{minWidth:"400px"},wrapper:{margin:e.spacing(1),position:"relative"},buttonProgress:{color:e.palette.secondary.light,position:"absolute",top:"50%",left:"50%"},flexCenter:{alignItems:"center"},noFlex:{display:"block"},scoreCalc:{marginTop:10},expireLabel:{whiteSpace:"nowrap"}}})),$=U()({root:{border:"0px solid rgba(0, 0, 0, .125)",boxShadow:"none","&:not(:last-child)":{borderBottom:0},"&:before":{display:"none"},"&$expanded":{margin:"auto"}},expanded:{}})(I.a),ee=U()({root:{padding:0,"&$expanded":{}},content:{margin:0,display:"initial","&$expanded":{margin:"0 0"}},expanded:{}})(R.a),te=U()((function(e){return{root:{padding:24,backgroundColor:e.palette.background.default}}}))(M.a);function ae(e){var t=Object(Q.a)().t,a=Object(O.d)(),l=X(),C=Object(i.useCallback)((function(e,t,n,r){return a(Object(v.S)(e,t,n,r))}),[a]),N=Object(i.useRef)(null),P=c.a.useState(!1),I=Object(o.a)(P,2),R=I[0],M=I[1],_=c.a.useState(""),U=Object(o.a)(_,2),J=U[0],ae=U[1],ne=c.a.useState({password:"",downloads:1,expires:86400,showPassword:!1}),re=Object(o.a)(ne,2),oe=re[0],ie=re[1],ce=c.a.useState({password:!1,expire:!1,preview:!0}),le=Object(o.a)(ce,2),se=le[0],ue=le[1],pe=c.a.useState(3600),de=Object(o.a)(pe,2),me=de[0],fe=de[1],he=c.a.useState(10),ge=Object(o.a)(he,2),be=ge[0],Ee=ge[1],ve=function(e){return function(t){"password"===e&&(""===t.target.value?ue(Object(r.a)(Object(r.a)({},se),{},{password:!1})):ue(Object(r.a)(Object(r.a)({},se),{},{password:!0}))),ie(Object(r.a)(Object(r.a)({},oe),{},Object(n.a)({},e,t.target.value)))}},Oe=function(e){return function(t,a){M(!!a&&e)}},je=function(e){return function(){se[e]||Oe(e)(null,!0),"password"===e&&se[e]&&ie(Object(r.a)(Object(r.a)({},oe),{},{password:""})),ue(Object(r.a)(Object(r.a)({},se),{},Object(n.a)({},e,!se[e])))}},we=function(){e.onClose(),setTimeout((function(){ae("")}),500)};return c.a.createElement(s.a,{open:e.open,onClose:we,"aria-labelledby":"form-dialog-title",className:l.widthAnimation,maxWidth:"xs",fullWidth:!0},c.a.createElement(u.a,{id:"form-dialog-title"},t("modals.createShareLink")),""===J&&c.a.createElement(c.a.Fragment,null,c.a.createElement(D.a,null),c.a.createElement(w.a,null,c.a.createElement($,{expanded:"password"===R,onChange:Oe("password")},c.a.createElement(ee,{"aria-controls":"panel1a-content",id:"panel1a-header"},c.a.createElement(y.a,{button:!0},c.a.createElement(x.a,null,c.a.createElement(S.a,null)),c.a.createElement(k.a,{primary:t("modals.usePasswordProtection")}),c.a.createElement(F.a,null,c.a.createElement(p.a,{checked:se.password,onChange:je("password")})))),c.a.createElement(te,null,c.a.createElement(d.a,{variant:"outlined",color:"secondary",fullWidth:!0},c.a.createElement(W.a,{htmlFor:"filled-adornment-password"},t("modals.sharePassword")),c.a.createElement(V.a,{fullWidth:!0,id:"outlined-adornment-password",type:oe.showPassword?"text":"password",value:oe.password,onChange:ve("password"),endAdornment:c.a.createElement(H.a,{position:"end"},c.a.createElement(q.a,{title:t("modals.randomlyGenerate")},c.a.createElement(G.a,{"aria-label":"toggle password visibility",onClick:function(){ue(Object(r.a)(Object(r.a)({},se),{},{password:!0})),ie(Object(r.a)(Object(r.a)({},oe),{},{password:Math.random().toString(36).substr(2).slice(2,8),showPassword:!0}))},edge:"end"},c.a.createElement(L.a,null))),c.a.createElement(G.a,{"aria-label":"toggle password visibility",onClick:function(){ie(Object(r.a)(Object(r.a)({},oe),{},{showPassword:!oe.showPassword}))},onMouseDown:function(e){e.preventDefault()},edge:"end"},c.a.createElement(Z.a,{on:oe.showPassword,onIcon:c.a.createElement(z.a,null),offIcon:c.a.createElement(B.a,null)}))),labelWidth:70})))),c.a.createElement($,{expanded:"expire"===R,onChange:Oe("expire")},c.a.createElement(ee,{"aria-controls":"panel1a-content",id:"panel1a-header"},c.a.createElement(y.a,{button:!0},c.a.createElement(x.a,null,c.a.createElement(T.a,null)),c.a.createElement(k.a,{primary:t("modals.expireAutomatically")}),c.a.createElement(F.a,null,c.a.createElement(p.a,{checked:se.expire,onChange:je("expire")})))),c.a.createElement(te,{className:l.flexCenter},c.a.createElement(d.a,{style:{marginRight:10}},oe.downloads>=0&&c.a.createElement(Y.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:oe.downloads,onChange:ve("downloads")},[1,2,3,4,5,20,50,100].map((function(e){return c.a.createElement(K.a,{value:e,key:e},t("modals.downloadLimitOptions",{num:e}))})),c.a.createElement(K.a,{value:-1},c.a.createElement("em",null,t("modals.custom")))),-1===oe.downloads&&c.a.createElement(m.a,{id:"outlined-basic",type:"number",inputProps:{min:1},value:be,onChange:function(e){return Ee(e.target.value)},endAdornment:c.a.createElement(H.a,{position:"start"},t("modals.downloads"))})),c.a.createElement(A.a,{className:l.expireLabel},t("modals.or")),c.a.createElement(d.a,{style:{marginRight:10,marginLeft:10}},oe.expires>=0&&c.a.createElement(Y.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:oe.expires,onChange:ve("expires")},c.a.createElement(K.a,{value:300},t("modals.5minutes")),c.a.createElement(K.a,{value:3600},t("modals.1hour")),c.a.createElement(K.a,{value:86400},t("modals.1day")),c.a.createElement(K.a,{value:604800},t("modals.7days")),c.a.createElement(K.a,{value:2592e3},t("modals.30days")),c.a.createElement(K.a,{value:-1},c.a.createElement("em",null,t("modals.custom")))),-1===oe.expires&&c.a.createElement(m.a,{id:"outlined-basic",type:"number",inputProps:{min:1},value:me,onChange:function(e){return fe(e.target.value)},endAdornment:c.a.createElement(H.a,{position:"start"},t("modals.seconds"))})),c.a.createElement(A.a,{className:l.expireLabel},t("modals.downloadSuffix")))),c.a.createElement($,{expanded:"preview"===R,onChange:Oe("preview")},c.a.createElement(ee,{"aria-controls":"panel1a-content",id:"panel1a-header"},c.a.createElement(y.a,{button:!0},c.a.createElement(x.a,null,c.a.createElement(S.a,null)),c.a.createElement(k.a,{primary:t("modals.allowPreview")}),c.a.createElement(F.a,null,c.a.createElement(p.a,{checked:se.preview,onChange:je("preview")})))),c.a.createElement(te,null,c.a.createElement(A.a,null,t("modals.allowPreviewDescription"))))),c.a.createElement(D.a,null)),""!==J&&c.a.createElement(f.a,null,c.a.createElement(h.a,{onFocus:function(e){return e.target.select()},autoFocus:!0,inputProps:{readonly:!0},label:t("modals.shareLink"),value:J,variant:"outlined",fullWidth:!0})),c.a.createElement(g.a,null,""!==J&&c.a.createElement("div",{className:l.wrapper},c.a.createElement(b.a,{onClick:function(){if(navigator.share){var a=t("modals.shareLinkShareContent",{name:e.selected[0].name,link:J});N.current&&N.current.password&&(a+=t("modals.shareLinkPasswordInfo",{password:N.current.password})),navigator.share({text:a})}else navigator.clipboard&&(navigator.clipboard.writeText(J),C("top","right",t("modals.linkCopied"),"info"))},color:"secondary"},t("modals.sendLink"))),c.a.createElement(b.a,{onClick:we},t("close",{ns:"common"})),""===J&&c.a.createElement("div",{className:l.wrapper},c.a.createElement(b.a,{onClick:function(t){t.preventDefault(),e.setModalsLoading(!0);var a={id:e.selected[0].id,is_dir:"dir"===e.selected[0].type,password:oe.password,downloads:se.expire?-1===oe.downloads?parseInt(be):oe.downloads:-1,expire:-1===oe.expires?parseInt(me):oe.expires,preview:se.preview};N.current=a,j.c.post("/share",a).then((function(t){ae(t.data),ie({password:"",downloads:1,expires:86400,showPassword:!1}),ue({password:!1,expire:!1}),e.setModalsLoading(!1)})).catch((function(t){C("top","right",t.message,"error"),e.setModalsLoading(!1)}))},color:"secondary",disabled:e.modalsLoading},t("modals.createShareLink"),e.modalsLoading&&c.a.createElement(E.a,{size:24,className:l.buttonProgress})))))}},243:function(e,t,a){"use strict";a.d(t,"a",(function(){return b}));var n=a(0),r=a.n(n),o=a(95),i=a(478),c=a(479),l=a(480),s=a(198),u=a(148),p=a(62),d=a(482),m=a(254),f=a(5),h=a(111),g=Object(o.a)((function(e){return{content:{minWidth:250}}}));function b(){var e=Object(h.a)("common").t,t=g(),a=Object(f.e)((function(e){return e.viewUpdate.modals.option}));return r.a.createElement(i.a,{open:a&&a.open,onClose:a&&a.onClose,"aria-labelledby":"form-dialog-title"},r.a.createElement(c.a,{id:"form-dialog-title"},a&&a.title),r.a.createElement(l.a,{dividers:"paper",className:t.content},r.a.createElement(s.a,{component:"nav","aria-label":"main mailbox folders"},a&&a.options.map((function(e){return r.a.createElement(u.a,{key:e.key,onClick:function(){return a&&a.callback(e)},button:!0},r.a.createElement(p.a,{primary:e.name,secondary:e.description}))})))),r.a.createElement(d.a,null,r.a.createElement(m.a,{onClick:a&&a.onClose},e("cancel"))))}},245:function(e,t,a){"use strict";a.d(t,"a",(function(){return v}));var n=a(6),r=a(0),o=a.n(r),i=a(95),c=a(446),l=a.n(c),s=a(109),u=a.n(s),p=a(128),d=a(18),m=a(286),f=a(80),h=a(470),g=a(147),b=a(4),E=Object(i.a)((function(e){return{fab:{margin:0,top:"auto",right:20,bottom:20,left:"auto",zIndex:5,position:"fixed"},badge:{position:"absolute",bottom:26,top:"auto",zIndex:9999,right:7},fabProgress:{color:g.a[500],position:"absolute",top:-6,left:-6,zIndex:1},wrapper:{margin:e.spacing(1),position:"relative"},buttonSuccess:{backgroundColor:g.a[500],"&:hover":{backgroundColor:g.a[700]}}}}));function v(e){var t=E(),a=Object(b.a)(Object(n.a)({},t.buttonSuccess,"success"===e.status));return o.a.createElement(p.a,{enable:d.a.isMobile()},o.a.createElement("div",{className:t.fab},o.a.createElement("div",{className:t.wrapper},o.a.createElement(f.a,{title:"\u4fdd\u5b58",placement:"left"},o.a.createElement(m.a,{onClick:e.onClick,color:"primary",className:a,disabled:"loading"===e.status,"aria-label":"add"},"success"===e.status?o.a.createElement(u.a,null):o.a.createElement(l.a,null))),"loading"===e.status&&o.a.createElement(h.a,{size:68,className:t.fabProgress}))))}},248:function(e,t,a){"use strict";a.r(t);var n=a(6),r=a(13),o=a(14),i=a(16),c=a(17),l=a(0),s=a.n(l),u=a(5),p=a(91),d=a(12),m=a(478),f=a(479),h=a(480),g=a(7047),b=a(482),E=a(254),v=a(470),O=a(7120),j=a(8),w=a(95),k=a(252),y=Object(w.a)({avatar:{backgroundColor:k.a[100],color:k.a[600]},loadingContainer:{display:"flex"},loading:{marginTop:10,marginLeft:20}});function x(){var e=y(),t=Object(u.e)((function(e){return e.viewUpdate.modals.loading})),a=Object(u.e)((function(e){return e.viewUpdate.modals.loadingText}));return s.a.createElement(m.a,{"aria-labelledby":"simple-dialog-title",open:t},s.a.createElement(h.a,null,s.a.createElement(O.a,{className:e.loadingContainer},s.a.createElement(v.a,{color:"secondary"}),s.a.createElement("div",{className:e.loading},a))))}var C=a(9),S=a(2),N=a(111),T=a(292),P=Object(w.a)((function(e){return{contentFix:{padding:"10px 24px 0px 24px"},wrapper:{margin:e.spacing(1),position:"relative"},buttonProgress:{color:e.palette.secondary.light,position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12}}}));function L(e){var t=Object(N.a)().t,a=Object(l.useState)(""),n=Object(C.a)(a,2),r=n[0],o=n[1],i=Object(l.useState)(""),c=Object(C.a)(i,2),g=c[0],j=c[1],w=Object(u.d)(),k=Object(l.useCallback)((function(e,t,a,n){return w(Object(S.S)(e,t,a,n))}),[w]),y=Object(l.useCallback)((function(e){w(Object(S.H)(e))}),[w]),x=Object(l.useCallback)((function(){w(Object(S.C)())}),[w]),L=P();return s.a.createElement(m.a,{open:e.open,onClose:e.onClose,"aria-labelledby":"form-dialog-title"},s.a.createElement(f.a,{id:"form-dialog-title"},t("fileManager.copyTo")),s.a.createElement(p.a,{presentPath:e.presentPath,selected:e.selected,onSelect:function(e){var t="/"===e.path?e.path+e.name:e.path+"/"+e.name;o(t),j(e.name)}}),""!==r&&s.a.createElement(h.a,{className:L.contentFix},s.a.createElement(O.a,null,s.a.createElement(T.a,{i18nKey:"fileManager.copyToDst",values:{dst:g},components:[s.a.createElement("strong",{key:0})]}))),s.a.createElement(b.a,null,s.a.createElement(E.a,{onClick:e.onClose},t("cancel",{ns:"common"})),s.a.createElement("div",{className:L.wrapper},s.a.createElement(E.a,{onClick:function(t){null!=t&&t.preventDefault(),y(!0);var a=[],n=[];"dir"===e.selected[0].type?a.push(e.selected[0].id):n.push(e.selected[0].id),d.c.post("/object/copy",{src_dir:e.selected[0].path,src:{dirs:a,items:n},dst:"//"===r?"/":r}).then((function(){e.onClose(),x(),y(!1)})).catch((function(e){k("top","right",e.message,"error"),y(!1)}))},color:"primary",disabled:""===r||e.modalsLoading},t("ok",{ns:"common"}),e.modalsLoading&&s.a.createElement(v.a,{size:24,className:L.buttonProgress})))))}var F=a(7050),D=a(291),I=a(7121),R=a(7158),M=a(40),A=a(19),_=Object(w.a)((function(e){return{contentFix:{padding:"10px 24px 0px 24px",backgroundColor:e.palette.background.default},buttonProgress:{color:e.palette.secondary.light,position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12}}}));function U(e){var t=Object(N.a)().t,a=_(),n=Object(l.useRef)(),r=Object(l.useState)(A.a.GetPreferenceWithDefault("autoScroll",!0)),o=Object(C.a)(r,2),i=o[0],c=o[1],u=Object(I.a)(e.log,(function(e,t){return!0})),p=Object(l.useState)(-1),d=Object(C.a)(p,2),O=d[0],j=d[1];return Object(R.a)((function(){i&&n.current&&u!==e.log&&n.current.scrollIntoView({behavior:"smooth",block:"end"})}),O),Object(l.useEffect)((function(){e.done?j(-1):e.open&&j(1e3)}),[e.done,e.open]),s.a.createElement(m.a,{open:e.open,onClose:e.onClose,"aria-labelledby":"form-dialog-title",fullWidth:!0},s.a.createElement(f.a,{id:"form-dialog-title"},t("modals.directoryDownloadTitle")),s.a.createElement(h.a,{className:a.contentFix},s.a.createElement(g.a,{value:e.log,ref:n,multiline:!0,fullWidth:!0,id:"standard-basic"})),s.a.createElement(b.a,null,s.a.createElement(F.a,{control:s.a.createElement(D.a,null),checked:i,onChange:function(){return c((function(e){return A.a.SetPreference("autoScroll",!e),!e}))},label:t("modals.directoryDownloadAutoscroll")}),s.a.createElement(E.a,{onClick:e.done?e.onClose:M.cancelDirectoryDownload},t("cancel",{ns:"common"})),s.a.createElement("div",{className:a.wrapper},s.a.createElement(E.a,{color:"primary",disabled:!e.done,onClick:e.onClose},t("ok",{ns:"common"}),!e.done&&s.a.createElement(v.a,{size:24,className:a.buttonProgress})))))}var W=a(242),z=a(20),B=Object(w.a)((function(e){return{contentFix:{padding:"10px 24px 0px 24px"},wrapper:{margin:e.spacing(1),position:"relative"},buttonProgress:{color:e.palette.secondary.light,position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12}}}));function G(e){var t=Object(N.a)().t,a=Object(l.useState)(""),n=Object(C.a)(a,2),r=n[0],o=n[1],i=Object(l.useState)(""),c=Object(C.a)(i,2),d=c[0],g=c[1],j=Object(u.d)(),w=Object(l.useCallback)((function(e,t,a,n){return j(Object(S.S)(e,t,a,n))}),[j]),k=Object(l.useCallback)((function(e){j(Object(S.H)(e))}),[j]),y=Object(l.useCallback)((function(e){return j(Object(M.submitDecompressTask)(e))}),[j]),x=B();return s.a.createElement(m.a,{open:e.open,onClose:e.onClose,"aria-labelledby":"form-dialog-title"},s.a.createElement(f.a,{id:"form-dialog-title"},t("modals.decompressTo")),s.a.createElement(p.a,{presentPath:e.presentPath,selected:e.selected,onSelect:function(e){var t="/"===e.path?e.path+e.name:e.path+"/"+e.name;o(t),g(e.name)}}),""!==r&&s.a.createElement(h.a,{className:x.contentFix},s.a.createElement(O.a,null,s.a.createElement(T.a,{i18nKey:"modals.decompressToDst",values:{name:d},components:[s.a.createElement("strong",{key:0})]}))),s.a.createElement(b.a,null,s.a.createElement(E.a,{onClick:e.onClose},t("cancel",{ns:"common"})),s.a.createElement("div",{className:x.wrapper},s.a.createElement(E.a,{onClick:function(a){null!=a&&a.preventDefault(),k(!0),y(r).then((function(){e.onClose(),w("top","right",t("modals.taskCreated"),"success"),k(!1)})).catch((function(e){w("top","right",e.message,"error"),k(!1)}))},color:"primary",disabled:""===r||e.modalsLoading},t("ok",{ns:"common"}),e.modalsLoading&&s.a.createElement(v.a,{size:24,className:x.buttonProgress})))))}var H=Object(w.a)((function(e){return{contentFix:{padding:"10px 24px 0px 24px",backgroundColor:e.palette.background.default},wrapper:{margin:e.spacing(1),position:"relative"},buttonProgress:{color:e.palette.secondary.light,position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12}}}));function V(e){var t=Object(N.a)().t,a=Object(l.useState)(""),n=Object(C.a)(a,2),r=n[0],o=n[1],i=Object(l.useState)(""),c=Object(C.a)(i,2),d=c[0],j=c[1],w=Object(l.useState)(""),k=Object(C.a)(w,2),y=(k[0],k[1]),x=Object(u.d)(),T=Object(l.useCallback)((function(e,t,a,n){return x(Object(S.S)(e,t,a,n))}),[x]),P=Object(l.useCallback)((function(e){x(Object(S.H)(e))}),[x]),L=Object(l.useCallback)((function(e,t){return x(Object(M.submitCompressTask)(e,t))}),[x]),F=H();return s.a.createElement(m.a,{open:e.open,onClose:e.onClose,"aria-labelledby":"form-dialog-title"},s.a.createElement(f.a,{id:"form-dialog-title"},t("modals.saveToTitle")),s.a.createElement(p.a,{presentPath:e.presentPath,selected:e.selected,onSelect:function(e){var t="/"===e.path?e.path+e.name:e.path+"/"+e.name;o(t),y(e.name)}}),""!==r&&s.a.createElement(h.a,{className:F.contentFix},s.a.createElement(O.a,null,s.a.createElement(g.a,{onChange:function(e){return j(e.target.value)},value:d,fullWidth:!0,autoFocus:!0,id:"standard-basic",label:t("modals.zipFileName")}))),s.a.createElement(b.a,null,s.a.createElement(E.a,{onClick:e.onClose},t("cancel",{ns:"common"})),s.a.createElement("div",{className:F.wrapper},s.a.createElement(E.a,{onClick:function(a){null!=a&&a.preventDefault(),P(!0),L(d,r).then((function(){e.onClose(),T("top","right",t("modals.taskCreated"),"success"),P(!1)})).catch((function(e){T("top","right",e.message,"error"),P(!1)}))},color:"primary",disabled:""===r||""===d||e.modalsLoading},t("ok",{ns:"common"}),e.modalsLoading&&s.a.createElement(v.a,{size:24,className:F.buttonProgress})))))}var q=a(243),K=a(160),Y=a(199),J=a(7122),Z=a(25),Q=a(288),X=a(46),$=a(7099),ee=a(442),te=a.n(ee),ae=Object(w.a)((function(e){return{contentFix:{padding:"10px 24px 0px 24px"},wrapper:{margin:e.spacing(1),position:"relative"},buttonProgress:{color:e.palette.secondary.light,position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12},formGroup:{display:"flex",marginBottom:e.spacing(3)},forumInput:{flexGrow:1}}}));function ne(e){var t=Object(N.a)().t,a=Object(l.useState)(!1),n=Object(C.a)(a,2),r=n[0],o=n[1],i=Object(l.useState)(""),c=Object(C.a)(i,2),j=c[0],w=c[1],k=Object(l.useState)(""),y=Object(C.a)(k,2),x=y[0],P=y[1],L=Object(l.useState)(""),F=Object(C.a)(L,2),D=F[0],I=F[1],R=Object(l.useState)(""),M=Object(C.a)(R,2),A=M[0],_=M[1],U=Object(X.a)(),W=Object($.a)(U.breakpoints.down("sm"));Object(l.useEffect)((function(){e.open&&I(e.presentPath)}),[e.open]);var z=Object(u.d)(),B=Object(l.useCallback)((function(e,t,a,n){return z(Object(S.S)(e,t,a,n))}),[z]),G=(Object(l.useCallback)((function(e){z(Object(S.H)(e))}),[z]),ae());return s.a.createElement(s.a.Fragment,null,s.a.createElement(m.a,{open:e.open,onClose:e.onClose,"aria-labelledby":"form-dialog-title",fullWidth:!0},s.a.createElement(f.a,{id:"form-dialog-title"},t("modals.newRemoteDownloadTitle")),s.a.createElement(h.a,null,s.a.createElement(O.a,null,s.a.createElement("div",{className:G.formGroup},s.a.createElement("div",{className:G.forumInput},s.a.createElement(g.a,{variant:"outlined",label:t("modals.remoteDownloadURL"),autoFocus:!0,fullWidth:!0,disabled:e.torrent,multiline:!0,value:e.torrent?e.torrent.name:A,onChange:function(e){return _(e.target.value)},placeholder:t("modals.remoteDownloadURLDescription"),InputProps:{startAdornment:!W&&s.a.createElement(Q.a,{position:"start"},s.a.createElement(te.a,null))}}))),s.a.createElement("div",{className:G.formGroup},s.a.createElement("div",{className:G.forumInput},s.a.createElement(g.a,{variant:"outlined",fullWidth:!0,value:D,onChange:function(e){return I(e.target.value)},className:G.input,label:t("modals.remoteDownloadDst"),InputProps:{startAdornment:!W&&s.a.createElement(Q.a,{position:"start"},s.a.createElement(J.a,null)),endAdornment:s.a.createElement(Q.a,{position:"end"},s.a.createElement(E.a,{className:G.button,color:"primary",onClick:function(){return o(!0)}},t("navbar.addTagDialog.selectFolder")))}}),s.a.createElement("br",null))))),s.a.createElement(b.a,null,s.a.createElement(E.a,{onClick:e.onClose},t("cancel",{ns:"common"})),s.a.createElement("div",{className:G.wrapper},s.a.createElement(E.a,{onClick:e.torrent?function(a){a.preventDefault(),e.setModalsLoading(!0),d.c.post("/aria2/torrent/"+e.torrent.id,{dst:"//"===D?"/":D}).then((function(){B("top","right",t("modals.taskCreated"),"success"),e.onClose(),e.setModalsLoading(!1)})).catch((function(t){B("top","right",t.message,"error"),e.setModalsLoading(!1)}))}:function(a){a.preventDefault(),e.setModalsLoading(!0),d.c.post("/aria2/url",{url:A.split("\n"),dst:"//"===D?"/":D}).then((function(a){var n=a.data.filter((function(e){return 0!==e.code})).map((function(e){return new d.a(e.msg,e.code,e.error).message}));n.length>0?B("top","right",t("modals.taskCreateFailed",{failed:n.length,details:n.join(",")}),"warning"):B("top","right",t("modals.taskCreated"),"success"),e.onClose(),e.setModalsLoading(!1)})).catch((function(t){B("top","right",t.message,"error"),e.setModalsLoading(!1)}))},color:"primary",disabled:""===A&&null===e.torrent||""===D||e.modalsLoading},t("modals.createTask"),e.modalsLoading&&s.a.createElement(v.a,{size:24,className:G.buttonProgress}))))),s.a.createElement(m.a,{open:r,onClose:function(){return o(!1)},"aria-labelledby":"form-dialog-title"},s.a.createElement(f.a,{id:"form-dialog-title"},t("modals.remoteDownloadDst")),s.a.createElement(p.a,{presentPath:Object(Z.n)(e.presentPath),selected:[],onSelect:function(e){var t="/"===e.path?e.path+e.name:e.path+"/"+e.name;w(t),P(e.name)}}),""!==x&&s.a.createElement(h.a,{className:G.contentFix},s.a.createElement(O.a,null,s.a.createElement(T.a,{i18nKey:"modals.downloadTo",values:{name:x},components:[s.a.createElement("strong",{key:0})]}))),s.a.createElement(b.a,null,s.a.createElement(E.a,{onClick:function(){return o(!1)}},t("cancel",{ns:"common"})),s.a.createElement(E.a,{onClick:function(){I("//"===j?"/":j),o(!1)},color:"primary",disabled:""===j},t("ok",{ns:"common"})))))}var re=a(170),oe=a(80),ie=a(7033),ce=a(7123),le=Object(w.a)((function(e){return{form:{marginTop:e.spacing(2)}}}));function se(e){var t=Object(N.a)().t,a=(Object(X.a)(),A.a.GetUser()),n=Object(l.useState)(!1),r=Object(C.a)(n,2),o=r[0],i=r[1],c=Object(l.useState)(!1),p=Object(C.a)(c,2),g=p[0],j=p[1],w=Object(u.d)(),k=Object(l.useCallback)((function(e,t,a,n){return w(Object(S.S)(e,t,a,n))}),[w]),y=le();return s.a.createElement(m.a,{open:e.open,onClose:e.onClose,"aria-labelledby":"form-dialog-title"},s.a.createElement(f.a,{id:"form-dialog-title"},t("modals.deleteTitle")),s.a.createElement(h.a,null,s.a.createElement(O.a,null,1===e.selected.length&&s.a.createElement(T.a,{i18nKey:"modals.deleteOneDescription",values:{name:e.selected[0].name},components:[s.a.createElement("strong",{key:0})]}),e.selected.length>1&&t("modals.deleteMultipleDescription",{num:e.selected.length})),a.group.advanceDelete&&s.a.createElement(re.a,{component:"fieldset",className:y.form},s.a.createElement(ie.a,{component:"legend"},t("modals.advanceOptions")),s.a.createElement(ce.a,null,s.a.createElement(oe.a,{title:t("modals.forceDeleteDes")},s.a.createElement(F.a,{control:s.a.createElement(D.a,{checked:o,onChange:function(e){return i(e.target.checked)}}),label:t("modals.forceDelete")})),s.a.createElement(oe.a,{title:t("modals.unlinkOnlyDes")},s.a.createElement(F.a,{control:s.a.createElement(D.a,{checked:g,onChange:function(e){return j(e.target.checked)}}),label:t("modals.unlinkOnly")}))))),s.a.createElement(b.a,null,s.a.createElement(E.a,{onClick:e.onClose},t("cancel",{ns:"common"})),s.a.createElement("div",{className:y.wrapper},s.a.createElement(E.a,{onClick:function(t){t.preventDefault(),e.setModalsLoading(!0);var a=[],n=[];e.selected.map((function(e){"dir"===e.type?a.push(e.id):n.push(e.id)})),d.c.delete("/object",{data:{items:n,dirs:a,force:o,unlink:g}}).then((function(t){0===t.rawData.code?(e.onClose(),setTimeout(e.refreshFileList,500)):k("top","right",t.rawData.msg,"warning"),e.setModalsLoading(!1),e.refreshStorage()})).catch((function(t){k("top","right",t.message,"error"),e.setModalsLoading(!1)}))},color:"primary",disabled:e.modalsLoading},t("ok",{ns:"common"}),e.modalsLoading&&s.a.createElement(v.a,{size:24,className:y.buttonProgress})))))}var ue=function(e){Object(i.a)(a,e);var t=Object(c.a)(a);function a(){var e;Object(r.a)(this,a);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).state={newFolderName:"",newFileName:"",newName:"",selectedPath:"",selectedPathName:"",secretShare:!1,sharePwd:"",shareUrl:"",purchaseCallback:null},e.handleInputChange=function(t){e.setState(Object(n.a)({},t.target.id,t.target.value))},e.newNameSuffix="",e.UNSAFE_componentWillReceiveProps=function(t){if(e.props.dndSignale===t.dndSignale)if(e.props.modalsStatus.rename===t.modalsStatus.rename);else{var a=t.selected[0].name;e.setState({newName:a})}else e.dragMove(t.dndSource,t.dndTarget)},e.scoreHandler=function(e){e()},e.Download=function(){Object(K.a)(e.props.selected[0]).then((function(t){window.location.assign(t.data),e.onClose(),e.downloaded=!0})).catch((function(t){e.props.toggleSnackbar("top","right",t.message,"error"),e.onClose()}))},e.submitMove=function(t){null!=t&&t.preventDefault(),e.props.setModalsLoading(!0);var a=[],n=[];e.props.selected.map((function(e){"dir"===e.type?a.push(e.id):n.push(e.id)})),d.c.patch("/object",{action:"move",src_dir:e.props.selected[0].path,src:{dirs:a,items:n},dst:e.DragSelectedPath?e.DragSelectedPath:"//"===e.state.selectedPath?"/":e.state.selectedPath}).then((function(){e.onClose(),e.props.refreshFileList(),e.props.setModalsLoading(!1),e.DragSelectedPath=""})).catch((function(t){e.props.toggleSnackbar("top","right",t.message,"error"),e.props.setModalsLoading(!1),e.DragSelectedPath=""})).then((function(){e.props.closeAllModals()}))},e.dragMove=function(t,a){0===e.props.selected.length&&(e.props.selected[0]=t);var n=!0;e.props.selected.map((function(e){(e.id!==a.id||e.type!==a.type)&&e.path!==a.path+("/"===a.path?"":"/")+a.name||(n=!1)})),n&&(e.DragSelectedPath="/"===a.path?a.path+a.name:a.path+"/"+a.name,e.props.openLoadingDialog(e.props.t("modals.processing")),e.submitMove())},e.submitRename=function(t){t.preventDefault(),e.props.setModalsLoading(!0);var a=e.state.newName,n={dirs:[],items:[]};"dir"===e.props.selected[0].type?n.dirs[0]=e.props.selected[0].id:n.items[0]=e.props.selected[0].id,-1!==e.props.dirList.findIndex((function(e){return e.name===a}))||-1!==e.props.fileList.findIndex((function(e){return e.name===a}))?(e.props.toggleSnackbar("top","right",e.props.t("modals.duplicatedObjectName"),"warning"),e.props.setModalsLoading(!1)):d.c.post("/object/rename",{action:"rename",src:n,new_name:a}).then((function(){e.onClose(),e.props.refreshFileList(),e.props.setModalsLoading(!1)})).catch((function(t){e.props.toggleSnackbar("top","right",t.message,"error"),e.props.setModalsLoading(!1)}))},e.submitCreateNewFolder=function(t){t.preventDefault(),e.props.setModalsLoading(!0),-1!==e.props.dirList.findIndex((function(t){return t.name===e.state.newFolderName}))?(e.props.toggleSnackbar("top","right",e.props.t("modals.duplicatedFolderName"),"warning"),e.props.setModalsLoading(!1)):d.c.put("/directory",{path:("/"===e.props.path?"":e.props.path)+"/"+e.state.newFolderName}).then((function(){e.onClose(),e.props.refreshFileList(),e.props.setModalsLoading(!1)})).catch((function(t){e.props.setModalsLoading(!1),e.props.toggleSnackbar("top","right",t.message,"error")}))},e.submitCreateNewFile=function(t){t.preventDefault(),e.props.setModalsLoading(!0),-1!==e.props.dirList.findIndex((function(t){return t.name===e.state.newFileName}))?(e.props.toggleSnackbar("top","right",e.props.t("modals.duplicatedFolderName"),"warning"),e.props.setModalsLoading(!1)):d.c.post("/file/create",{path:("/"===e.props.path?"":e.props.path)+"/"+e.state.newFileName}).then((function(){e.onClose(),e.props.refreshFileList(),e.props.setModalsLoading(!1)})).catch((function(t){e.props.setModalsLoading(!1),e.props.toggleSnackbar("top","right",t.message,"error")}))},e.setMoveTarget=function(t){var a="/"===t.path?t.path+t.name:t.path+"/"+t.name;e.setState({selectedPath:a,selectedPathName:t.name})},e.onClose=function(){e.setState({newFolderName:"",newFileName:"",newName:"",selectedPath:"",selectedPathName:"",secretShare:!1,sharePwd:"",shareUrl:""}),e.newNameSuffix="",e.props.closeAllModals()},e.handleChange=function(t){return function(a){e.setState(Object(n.a)({},t,a.target.checked))}},e.copySource=function(){navigator.clipboard&&(navigator.clipboard.writeText(e.props.modalsStatus.getSource),e.props.toggleSnackbar("top","right",e.props.t("modals.linkCopied"),"info"))},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.t;return s.a.createElement("div",null,s.a.createElement(x,null),s.a.createElement(q.a,null),s.a.createElement(m.a,{open:this.props.modalsStatus.getSource,onClose:this.onClose,"aria-labelledby":"form-dialog-title",fullWidth:!0},s.a.createElement(f.a,{id:"form-dialog-title"},n("modals.getSourceLinkTitle")),s.a.createElement(h.a,null,s.a.createElement(g.a,{autoFocus:!0,inputProps:{readonly:!0},label:n("modals.sourceLink"),multiline:!0,value:this.props.modalsStatus.getSource,variant:"outlined",fullWidth:!0})),s.a.createElement(b.a,null,s.a.createElement(E.a,{onClick:this.copySource,color:"secondary"},n("copyToClipboard",{ns:"common"})),s.a.createElement(E.a,{onClick:this.onClose},n("close",{ns:"common"})))),s.a.createElement(m.a,{open:this.props.modalsStatus.createNewFolder,onClose:this.onClose,"aria-labelledby":"form-dialog-title"},s.a.createElement(f.a,{id:"form-dialog-title"},n("fileManager.newFolder")),s.a.createElement(h.a,null,s.a.createElement("form",{onSubmit:this.submitCreateNewFolder},s.a.createElement(g.a,{autoFocus:!0,margin:"dense",id:"newFolderName",label:n("modals.folderName"),type:"text",value:this.state.newFolderName,onChange:function(t){return e.handleInputChange(t)},fullWidth:!0}))),s.a.createElement(b.a,null,s.a.createElement(E.a,{onClick:this.onClose},n("cancel",{ns:"common"})),s.a.createElement("div",{className:a.wrapper},s.a.createElement(E.a,{onClick:this.submitCreateNewFolder,color:"primary",disabled:""===this.state.newFolderName||this.props.modalsLoading},n("modals.create"),this.props.modalsLoading&&s.a.createElement(v.a,{size:24,className:a.buttonProgress}))))),s.a.createElement(m.a,{open:this.props.modalsStatus.createNewFile,onClose:this.onClose,"aria-labelledby":"form-dialog-title"},s.a.createElement(f.a,{id:"form-dialog-title"},n("fileManager.newFile")),s.a.createElement(h.a,null,s.a.createElement("form",{onSubmit:this.submitCreateNewFile},s.a.createElement(g.a,{autoFocus:!0,margin:"dense",id:"newFileName",label:n("modals.fileName"),type:"text",value:this.state.newFileName,onChange:function(t){return e.handleInputChange(t)},fullWidth:!0}))),s.a.createElement(b.a,null,s.a.createElement(E.a,{onClick:this.onClose},n("cancel",{ns:"common"})),s.a.createElement("div",{className:a.wrapper},s.a.createElement(E.a,{onClick:this.submitCreateNewFile,color:"primary",disabled:""===this.state.newFileName||this.props.modalsLoading},n("modals.create"),this.props.modalsLoading&&s.a.createElement(v.a,{size:24,className:a.buttonProgress}))))),s.a.createElement(m.a,{open:this.props.modalsStatus.rename,onClose:this.onClose,"aria-labelledby":"form-dialog-title",maxWidth:"sm",fullWidth:!0},s.a.createElement(f.a,{id:"form-dialog-title"},n("fileManager.rename")),s.a.createElement(h.a,null,s.a.createElement(O.a,null,s.a.createElement(T.a,{i18nKey:"modals.renameDescription",values:{name:1===this.props.selected.length?this.props.selected[0].name:""},components:[s.a.createElement("strong",{key:0})]})),s.a.createElement("form",{onSubmit:this.submitRename},s.a.createElement(g.a,{autoFocus:!0,margin:"dense",id:"newName",label:n("modals.newName"),type:"text",value:this.state.newName,onChange:function(t){return e.handleInputChange(t)},fullWidth:!0}))),s.a.createElement(b.a,null,s.a.createElement(E.a,{onClick:this.onClose},n("cancel",{ns:"common"})),s.a.createElement("div",{className:a.wrapper},s.a.createElement(E.a,{onClick:this.submitRename,color:"primary",disabled:""===this.state.newName||this.props.modalsLoading},n("ok",{ns:"common"}),this.props.modalsLoading&&s.a.createElement(v.a,{size:24,className:a.buttonProgress}))))),s.a.createElement(L,{open:this.props.modalsStatus.copy,onClose:this.onClose,presentPath:this.props.path,selected:this.props.selected,modalsLoading:this.props.modalsLoading}),s.a.createElement(m.a,{open:this.props.modalsStatus.move,onClose:this.onClose,"aria-labelledby":"form-dialog-title"},s.a.createElement(f.a,{id:"form-dialog-title"},n("modals.moveToTitle")),s.a.createElement(p.a,{presentPath:this.props.path,selected:this.props.selected,onSelect:this.setMoveTarget}),""!==this.state.selectedPath&&s.a.createElement(h.a,{className:a.contentFix},s.a.createElement(O.a,null,s.a.createElement(T.a,{i18nKey:"modals.moveToDescription",values:{name:this.state.selectedPathName},components:[s.a.createElement("strong",{key:0})]}))),s.a.createElement(b.a,null,s.a.createElement(E.a,{onClick:this.onClose},n("cancel",{ns:"common"})),s.a.createElement("div",{className:a.wrapper},s.a.createElement(E.a,{onClick:this.submitMove,color:"primary",disabled:""===this.state.selectedPath||this.props.modalsLoading},n("ok",{ns:"common"}),this.props.modalsLoading&&s.a.createElement(v.a,{size:24,className:a.buttonProgress}))))),s.a.createElement(se,{open:this.props.modalsStatus.remove,onClose:this.onClose,modalsLoading:this.props.modalsLoading,setModalsLoading:this.props.setModalsLoading,selected:this.props.selected,refreshFileList:this.props.refreshFileList,refreshStorage:this.props.refreshStorage}),s.a.createElement(W.a,{open:this.props.modalsStatus.share,onClose:this.onClose,modalsLoading:this.props.modalsLoading,setModalsLoading:this.props.setModalsLoading,selected:this.props.selected}),s.a.createElement(ne,{open:this.props.modalsStatus.remoteDownload,onClose:this.onClose,modalsLoading:this.props.modalsLoading,setModalsLoading:this.props.setModalsLoading,presentPath:this.props.path,torrent:this.props.modalsStatus.remoteDownloadTorrent}),s.a.createElement(G,{open:this.props.modalsStatus.decompress,onClose:this.onClose,presentPath:this.props.path,selected:this.props.selected,modalsLoading:this.props.modalsLoading}),s.a.createElement(V,{open:this.props.modalsStatus.compress,onClose:this.onClose,presentPath:this.props.path,selected:this.props.selected,modalsLoading:this.props.modalsLoading}),s.a.createElement(U,{open:this.props.modalsStatus.directoryDownloading,onClose:this.onClose,done:this.props.modalsStatus.directoryDownloadDone,log:this.props.modalsStatus.directoryDownloadLog}))}}]),a}(l.Component),pe=Object(u.c)((function(e){return{path:e.navigator.path,selected:e.explorer.selected,modalsStatus:e.viewUpdate.modals,modalsLoading:e.viewUpdate.modalsLoading,dirList:e.explorer.dirList,fileList:e.explorer.fileList,dndSignale:e.explorer.dndSignal,dndTarget:e.explorer.dndTarget,dndSource:e.explorer.dndSource,loading:e.viewUpdate.modals.loading,loadingText:e.viewUpdate.modals.loadingText}}),(function(e){return{closeAllModals:function(){e(Object(S.f)())},toggleSnackbar:function(t,a,n,r){e(Object(S.S)(t,a,n,r))},setModalsLoading:function(t){e(Object(S.H)(t))},refreshFileList:function(){e(Object(S.C)())},refreshStorage:function(){e(Object(S.D)())},openLoadingDialog:function(t){e(Object(S.s)(t))}}}))(Object(j.a)((function(e){return{wrapper:{margin:e.spacing(1),position:"relative"},buttonProgress:{color:e.palette.secondary.light,position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12},contentFix:{padding:"10px 24px 0px 24px"}}}))(Object(z.k)(Object(Y.a)()(ue))));t.default=pe},25:function(e,t,a){"use strict";a.d(t,"r",(function(){return n})),a.d(t,"h",(function(){return r})),a.d(t,"q",(function(){return o})),a.d(t,"d",(function(){return i})),a.d(t,"b",(function(){return c})),a.d(t,"c",(function(){return l})),a.d(t,"n",(function(){return s})),a.d(t,"f",(function(){return u})),a.d(t,"k",(function(){return p})),a.d(t,"a",(function(){return d})),a.d(t,"g",(function(){return m})),a.d(t,"e",(function(){return f})),a.d(t,"o",(function(){return h})),a.d(t,"i",(function(){return g})),a.d(t,"l",(function(){return b})),a.d(t,"m",(function(){return E})),a.d(t,"s",(function(){return v})),a.d(t,"p",(function(){return O})),a.d(t,"j",(function(){return j}));var n=function(e){if(0===e||"0"===e)return"0 B";var t=Math.floor(Math.log(e)/Math.log(1024));return(e/Math.pow(1024,t)).toFixed(1)+" "+["B","KB","MB","GB","TB","PB","EB","ZB","YB"][t]},r=function(e){return e},o=function(e,t){var a=window.location.href;if(a.indexOf(e+"=")>=0){var n=a.substring(0,a.indexOf(e)),r=a.substring(a.indexOf(e));a=n+e+"="+t+(r=(r=r.substring(r.indexOf("=")+1)).indexOf("&")>=0?r.substring(r.indexOf("&")):"")}else a.indexOf("?")<0?a+="?"+e+"="+t:a+="&"+e+"="+t;a!==window.location.href&&window.history.pushState(null,null,a)},i=function(e){window.document.querySelector("meta[name=theme-color]").setAttribute("content",e)};function c(e){return Uint8Array.from(atob(e),(function(e){return e.charCodeAt(0)}))}function l(e){return btoa(String.fromCharCode.apply(null,new Uint8Array(e))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function s(e){var t=null!==e?e.substr(1).split("/"):this.props.path.substr(1).split("/");return"/"+t.slice(0,t.length-1).join("/")}function u(e){return"/"===e.path?e.path+e.name:e.path+"/"+e.name}function p(e){return parseInt(e,16).toString(2).padStart(8,"0")}function d(e){if(!e)return"";var t=e.split("/");return t.pop(),""===t.join("/")?"/":t.join("/")}function m(e){return e.split("/").pop()}function f(e){return e.substring(0,e.lastIndexOf("."))||e}function h(e){for(var t="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=a.length,r=0;r<e;r++)t+=a.charAt(Math.floor(Math.random()*n));return t}function g(e,t){return t.forEach((function(t){t&&e++})),e}var b=function(){return navigator.platform.toUpperCase().indexOf("MAC")>=0},E=function(){var e=window.navigator.userAgent,t=!!e.match(/iPad/i)||!!e.match(/iPhone/i),a=!!e.match(/WebKit/i);return t&&a&&!e.match(/CriOS/i)};function v(){var e=window.innerHeight;document.documentElement.style.setProperty("--vh","".concat(e,"px"))}var O=function(){Object.keys(localStorage).forEach((function(e){e&&e.startsWith("i18next_res_")&&localStorage.removeItem(e)}))},j=function(e,t,a){return{fontWeight:-1===t.indexOf(e)?a.typography.fontWeightRegular:a.typography.fontWeightMedium}}},283:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return y}));var n=a(11),r=a.n(n),o=a(23),i=a(9),c=a(6),l=a(0),s=a.n(l),u=a(99),p=a(95),d=a(20),m=a(12),f=a(5),h=a(377),g=a.n(h),b=a(245),E=a(18),v=a(115),O=a(2),j=a(102),w=a(111),k=Object(p.a)((function(e){var t;return{layout:(t={width:"auto",marginTop:"30px",marginLeft:e.spacing(3),marginRight:e.spacing(3)},Object(c.a)(t,e.breakpoints.up(1100+2*e.spacing(3)),{marginLeft:e.spacing(12),marginRight:e.spacing(12)}),Object(c.a)(t,"marginBottom",50),t),player:{borderRadius:e.shape.borderRadius},root:{backgroundColor:"white",borderRadius:e.shape.borderRadius},"@global":{".for-toolbar":{overflowX:"auto!important"}}}}));function y(){var t=Object(w.a)().t,a=Object(l.useState)(""),n=Object(i.a)(a,2),c=n[0],p=n[1],h=Object(l.useState)(""),y=Object(i.a)(h,2),x=y[0],C=y[1],S=Object(l.useState)(!0),N=Object(i.a)(S,2),T=N[0],P=N[1],L=Object(d.j)(),F=s.a.createRef(),D=Object(d.h)(),I=new URLSearchParams(Object(d.h)().search),R=Object(d.i)().id;Object(j.a)(I,L,D);var M=Object(f.d)(),A=Object(l.useCallback)((function(e,t,a,n){return M(Object(O.S)(e,t,a,n))}),[M]);Object(l.useEffect)((function(){var a="/file/content/"+I.get("id");E.a.isSharePage(D.pathname)&&(a="/share/content/"+R,""!==I.get("share_path")&&(a+="?path="+encodeURIComponent(I.get("share_path")))),P(!0),m.c.get(a,{responseType:"arraybuffer"}).then((function(t){var a=new e(t.rawData,"binary").toString();p(a)})).catch((function(e){A("top","right",t("fileManager.errorReadFileContent",{msg:e.message}),"error")})).then((function(){P(!1)}))}),[L.params[0]]);var _=function(e){return new Promise((function(t,a){var n=new FileReader;n.readAsDataURL(e),n.onload=function(){return t(n.result)},n.onerror=function(e){return a(e)}}))},U=function(){C("loading"),m.c.put("/file/update/"+I.get("id"),c).then((function(){C("success"),setTimeout((function(){return C("")}),2e3)})).catch((function(e){C(""),A("top","right",e.message,"error")}))},W=function(){var e=Object(o.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=F.current,e.t1=t.name,e.next=4,_(t);case 4:e.t2=e.sent,e.t0.$img2Url.call(e.t0,e.t1,e.t2),console.log(t);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=k();return s.a.createElement("div",{className:z.layout},s.a.createElement(u.a,{className:z.root,elevation:1},T&&s.a.createElement(v.a,null),!T&&s.a.createElement(g.a,{language:t("forEditorLocaleCode",{ns:"common"}),ref:F,value:c,onSave:function(){return U()},addImg:function(e){return W(e)},onChange:function(e){return p(e)},toolbar:{h1:!0,h2:!0,h3:!0,h4:!0,img:!0,link:!0,code:!0,preview:!0,expand:!0,undo:!0,redo:!0,save:!1,subfield:!0}})),!E.a.isSharePage(D.pathname)&&s.a.createElement(b.a,{onClick:U,status:x}))}}).call(this,a(300).Buffer)},284:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return N}));var n=a(9),r=a(6),o=a(0),i=a.n(o),c=a(46),l=a(99),s=a(95),u=a(20),p=a(12),d=a(5),m=a(18),f=a(245),h=a(49),g=a(115),b=a(170),E=a(7050),v=a(255),O=a(7053),j=a(74),w=a(149),k=a(2),y=a(102),x=a(111),C=i.a.lazy((function(){return Promise.all([a.e(0),a.e(1)]).then(a.t.bind(null,7074,7))})),S=Object(s.a)((function(e){var t;return{layout:(t={width:"auto",marginTop:"30px",marginLeft:e.spacing(3),marginRight:e.spacing(3)},Object(r.a)(t,e.breakpoints.up(1100+2*e.spacing(3)),{width:1100,marginLeft:"auto",marginRight:"auto"}),Object(r.a)(t,"marginBottom",40),t),editor:{borderRadius:e.shape.borderRadius},"@global":{".overflow-guard":{borderRadius:"0 0 12px 12px!important"}},formControl:{margin:"8px 16px 8px 16px"},toobar:{textAlign:"right"}}}));function N(){var t=Object(x.a)().t,a=Object(o.useState)(""),r=Object(n.a)(a,2),s=r[0],N=r[1],T=Object(o.useState)(""),P=Object(n.a)(T,2),L=P[0],F=P[1],D=Object(o.useState)(!0),I=Object(n.a)(D,2),R=I[0],M=I[1],A=Object(o.useState)("javascript"),_=Object(n.a)(A,2),U=_[0],W=_[1],z=Object(o.useState)("off"),B=Object(n.a)(z,2),G=B[0],H=B[1],V=Object(u.j)(),q=Object(u.h)(),K=new URLSearchParams(Object(u.h)().search),Y=Object(u.i)().id,J=Object(c.a)(),Z=Object(y.a)(K,V,q).title,Q=Object(d.d)(),X=Object(o.useCallback)((function(e,t,a,n){return Q(Object(k.S)(e,t,a,n))}),[Q]);Object(o.useEffect)((function(){var e=Z.split(".");W(h.b[e.pop()])}),[Z]),Object(o.useEffect)((function(){var a="/file/content/"+K.get("id");m.a.isSharePage(q.pathname)&&(a="/share/content/"+Y,""!==K.get("share_path")&&(a+="?path="+encodeURIComponent(K.get("share_path")))),M(!0),p.c.get(a,{responseType:"arraybuffer"}).then((function(t){var a=new e(t.rawData,"binary").toString();N(a)})).catch((function(e){X("top","right",t("fileManager.errorReadFileContent",{msg:e.message}),"error")})).then((function(){M(!1)}))}),[V.params[0]]);var $=S(),ee=m.a.isSharePage(q.pathname);return i.a.createElement("div",{className:$.layout},i.a.createElement(l.a,{className:$.root,elevation:1},i.a.createElement("div",{className:$.toobar},i.a.createElement(b.a,{className:$.formControl},i.a.createElement(E.a,{control:i.a.createElement(O.a,{onChange:function(e){return H(e.target.checked?"on":"off")}}),label:t("fileManager.wordWrap")})),i.a.createElement(b.a,{className:$.formControl},i.a.createElement(v.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:U,onChange:function(e){return W(e.target.value)}},Array.from(new Set(Object.keys(h.b).map((function(e){return h.b[e]})))).map((function(e,t){return i.a.createElement(j.a,{value:e,key:t},e)}))))),i.a.createElement(w.a,null),R&&i.a.createElement(g.a,null),!R&&i.a.createElement(o.Suspense,{fallback:i.a.createElement(g.a,null)},i.a.createElement(C,{height:"calc(100vh - 198px)",language:U,theme:"dark"===J.palette.type?"vs-dark":"vs",value:s,options:{readOnly:ee,extraEditorClassName:$.editor,wordWrap:G},onChange:function(e){return N(e)}}))),!ee&&i.a.createElement(f.a,{onClick:function(){F("loading"),p.c.put("/file/update/"+K.get("id"),s).then((function(){F("success"),setTimeout((function(){return F("")}),2e3)})).catch((function(e){F(""),X("top","right",e.message,"error")}))},status:L}))}}).call(this,a(300).Buffer)},36:function(e,t,a){"use strict";a.d(t,"v",(function(){return n})),a.d(t,"u",(function(){return h})),a.d(t,"e",(function(){return g})),a.d(t,"t",(function(){return b})),a.d(t,"c",(function(){return v})),a.d(t,"d",(function(){return O})),a.d(t,"f",(function(){return j})),a.d(t,"g",(function(){return w})),a.d(t,"n",(function(){return k})),a.d(t,"r",(function(){return y})),a.d(t,"k",(function(){return x})),a.d(t,"h",(function(){return C})),a.d(t,"i",(function(){return S})),a.d(t,"j",(function(){return N})),a.d(t,"o",(function(){return T})),a.d(t,"p",(function(){return P})),a.d(t,"l",(function(){return L})),a.d(t,"m",(function(){return F})),a.d(t,"b",(function(){return D})),a.d(t,"a",(function(){return I})),a.d(t,"w",(function(){return R})),a.d(t,"q",(function(){return M})),a.d(t,"s",(function(){return A}));var n,r=a(100),o=a(70),i=a(16),c=a(17),l=a(13),s=a(14),u=a(39),p=a(21),d=a(12);!function(e){e.InvalidFile="InvalidFile",e.NoPolicySelected="NoPolicySelected",e.UnknownPolicyType="UnknownPolicyType",e.FailedCreateUploadSession="FailedCreateUploadSession",e.FailedDeleteUploadSession="FailedDeleteUploadSession",e.HTTPRequestFailed="HTTPRequestFailed",e.LocalChunkUploadFailed="LocalChunkUploadFailed",e.SlaveChunkUploadFailed="SlaveChunkUploadFailed",e.WriteCtxFailed="WriteCtxFailed",e.RemoveCtxFailed="RemoveCtxFailed",e.ReadCtxFailed="ReadCtxFailed",e.InvalidCtxData="InvalidCtxData",e.CtxExpired="CtxExpired",e.RequestCanceled="RequestCanceled",e.ProcessingTaskDuplicated="ProcessingTaskDuplicated",e.OneDriveChunkUploadFailed="OneDriveChunkUploadFailed",e.OneDriveEmptyFile="OneDriveEmptyFile",e.FailedFinishOneDriveUpload="FailedFinishOneDriveUpload",e.S3LikeChunkUploadFailed="S3LikeChunkUploadFailed",e.S3LikeUploadCallbackFailed="S3LikeUploadCallbackFailed",e.COSUploadCallbackFailed="COSUploadCallbackFailed",e.COSPostUploadFailed="COSPostUploadFailed",e.UpyunPostUploadFailed="UpyunPostUploadFailed",e.QiniuChunkUploadFailed="QiniuChunkUploadFailed",e.FailedFinishOSSUpload="FailedFinishOSSUpload",e.FailedFinishQiniuUpload="FailedFinishQiniuUpload",e.FailedTransformResponse="FailedTransformResponse"}(n||(n={}));var m=[n.FailedCreateUploadSession,n.HTTPRequestFailed,n.LocalChunkUploadFailed,n.SlaveChunkUploadFailed,n.RequestCanceled,n.ProcessingTaskDuplicated,n.FailedTransformResponse],f=[-1],h=function(){function e(t,a){Object(l.a)(this,e),this.name=t,this.message=a,this.stack=void 0,this.stack=(new Error).stack}return Object(s.a)(e,[{key:"Message",value:function(){return this.message}},{key:"Retryable",value:function(){return m.includes(this.name)}}]),e}(),g=function(e){Object(i.a)(a,e);var t=Object(c.a)(a);function a(e,r,o){var i;return Object(l.a)(this,a),(i=t.call(this,n.InvalidFile,e)).field=void 0,i.policy=void 0,i.field=r,i.policy=o,i}return Object(s.a)(a,[{key:"Message",value:function(){return"size"==this.field?p.a.t("uploader.sizeExceedLimitError",{max:Object(u.p)(this.policy.maxSize)}):p.a.t("uploader.suffixNotAllowedError",{supported:this.policy.allowedSuffix?this.policy.allowedSuffix.join(","):"*"})}}]),a}(h),b=function(e){Object(i.a)(a,e);var t=Object(c.a)(a);function a(e,r){var o;return Object(l.a)(this,a),(o=t.call(this,n.UnknownPolicyType,e)).policy=void 0,o.policy=r,o}return Object(s.a)(a)}(h),E=function(e){Object(i.a)(a,e);var t=Object(c.a)(a);function a(e,n,r){var o;return Object(l.a)(this,a),(o=t.call(this,e,n)).response=r,o.appError=void 0,o.appError=new d.a(r.msg,r.code,r.msg),o}return Object(s.a)(a,[{key:"Message",value:function(){return"".concat(this.message,": ").concat(this.appError.message)}},{key:"Retryable",value:function(){return Object(r.a)(Object(o.a)(a.prototype),"Retryable",this).call(this)&&f.includes(this.response.code)}}]),a}(h),v=function(e){Object(i.a)(a,e);var t=Object(c.a)(a);function a(e){return Object(l.a)(this,a),t.call(this,n.FailedCreateUploadSession,"",e)}return Object(s.a)(a,[{key:"Message",value:function(){return this.message=p.a.t("uploader.createUploadSessionError"),Object(r.a)(Object(o.a)(a.prototype),"Message",this).call(this)}}]),a}(E),O=function(e){Object(i.a)(a,e);var t=Object(c.a)(a);function a(e){return Object(l.a)(this,a),t.call(this,n.FailedDeleteUploadSession,"",e)}return Object(s.a)(a,[{key:"Message",value:function(){return this.message=p.a.t("uploader.deleteUploadSessionError"),Object(r.a)(Object(o.a)(a.prototype),"Message",this).call(this)}}]),a}(E),j=function(e){Object(i.a)(a,e);var t=Object(c.a)(a);function a(e,r){var o;return Object(l.a)(this,a),(o=t.call(this,n.HTTPRequestFailed,e.message)).axiosErr=e,o.url=r,o.response=void 0,o.response=e.response,o}return Object(s.a)(a,[{key:"Message",value:function(){return p.a.t("uploader.requestError",{msg:this.axiosErr,url:this.url})}}]),a}(h),w=function(e){Object(i.a)(a,e);var t=Object(c.a)(a);function a(e,r){var o;return Object(l.a)(this,a),(o=t.call(this,n.LocalChunkUploadFailed,"",e)).chunkIndex=r,o}return Object(s.a)(a,[{key:"Message",value:function(){return this.message=p.a.t("uploader.chunkUploadError",{index:this.chunkIndex}),Object(r.a)(Object(o.a)(a.prototype),"Message",this).call(this)}}]),a}(E),k=function(e){Object(i.a)(a,e);var t=Object(c.a)(a);function a(){return Object(l.a)(this,a),t.call(this,n.RequestCanceled,"Request canceled")}return Object(s.a)(a)}(h),y=function(e){Object(i.a)(a,e);var t=Object(c.a)(a);function a(e,r){var o;return Object(l.a)(this,a),(o=t.call(this,n.SlaveChunkUploadFailed,"",e)).chunkIndex=r,o}return Object(s.a)(a,[{key:"Message",value:function(){return this.message=p.a.t("uploader.chunkUploadError",{index:this.chunkIndex}),Object(r.a)(Object(o.a)(a.prototype),"Message",this).call(this)}}]),a}(E),x=function(e){Object(i.a)(a,e);var t=Object(c.a)(a);function a(){return Object(l.a)(this,a),t.call(this,n.ProcessingTaskDuplicated,"Processing task duplicated")}return Object(s.a)(a,[{key:"Message",value:function(){return p.a.t("uploader.conflictError")}}]),a}(h),C=function(e){Object(i.a)(a,e);var t=Object(c.a)(a);function a(e){var r;return Object(l.a)(this,a),(r=t.call(this,n.OneDriveChunkUploadFailed,e.error.message)).response=e,r}return Object(s.a)(a,[{key:"Message",value:function(){var e=p.a.t("uploader.chunkUploadErrorWithMsg",{msg:this.message});return void 0!=this.response.error.retryAfterSeconds&&(e+=" "+p.a.t("uploader.chunkUploadErrorWithRetryAfter",{retryAfter:this.response.error.retryAfterSeconds})),e}},{key:"Retryable",value:function(){return Object(r.a)(Object(o.a)(a.prototype),"Retryable",this).call(this)||void 0!=this.response.error.retryAfterSeconds}}]),a}(h),S=function(e){Object(i.a)(a,e);var t=Object(c.a)(a);function a(){return Object(l.a)(this,a),t.call(this,n.OneDriveEmptyFile,"empty file not supported")}return Object(s.a)(a,[{key:"Message",value:function(){return p.a.t("uploader.emptyFileError")}}]),a}(h),N=function(e){Object(i.a)(a,e);var t=Object(c.a)(a);function a(e){return Object(l.a)(this,a),t.call(this,n.FailedFinishOneDriveUpload,"",e)}return Object(s.a)(a,[{key:"Message",value:function(){return this.message=p.a.t("uploader.finishUploadError"),Object(r.a)(Object(o.a)(a.prototype),"Message",this).call(this)}}]),a}(E),T=function(e){Object(i.a)(a,e);var t=Object(c.a)(a);function a(e){var r;return Object(l.a)(this,a),(r=t.call(this,n.S3LikeChunkUploadFailed,e.getElementsByTagName("Message")[0].innerHTML)).response=e,r}return Object(s.a)(a,[{key:"Message",value:function(){return p.a.t("uploader.chunkUploadErrorWithMsg",{msg:this.message})}}]),a}(h),P=function(e){Object(i.a)(a,e);var t=Object(c.a)(a);function a(e){var r;return Object(l.a)(this,a),(r=t.call(this,n.S3LikeChunkUploadFailed,e.getElementsByTagName("Message")[0].innerHTML)).response=e,r}return Object(s.a)(a,[{key:"Message",value:function(){return p.a.t("uploader.ossFinishUploadError",{msg:this.message,code:this.response.getElementsByTagName("Code")[0].innerHTML})}}]),a}(h),L=function(e){Object(i.a)(a,e);var t=Object(c.a)(a);function a(e){var r;return Object(l.a)(this,a),(r=t.call(this,n.QiniuChunkUploadFailed,e.error)).response=e,r}return Object(s.a)(a,[{key:"Message",value:function(){return p.a.t("uploader.chunkUploadErrorWithMsg",{msg:this.message})}}]),a}(h),F=function(e){Object(i.a)(a,e);var t=Object(c.a)(a);function a(e){var r;return Object(l.a)(this,a),(r=t.call(this,n.FailedFinishQiniuUpload,e.error)).response=e,r}return Object(s.a)(a,[{key:"Message",value:function(){return p.a.t("uploader.finishUploadErrorWithMsg",{msg:this.message})}}]),a}(h),D=function(e){Object(i.a)(a,e);var t=Object(c.a)(a);function a(e){var r;return Object(l.a)(this,a),(r=t.call(this,n.COSPostUploadFailed,e.getElementsByTagName("Message")[0].innerHTML)).response=e,r}return Object(s.a)(a,[{key:"Message",value:function(){return p.a.t("uploader.cosUploadFailed",{msg:this.message,code:this.response.getElementsByTagName("Code")[0].innerHTML})}}]),a}(h),I=function(e){Object(i.a)(a,e);var t=Object(c.a)(a);function a(e){return Object(l.a)(this,a),t.call(this,n.COSUploadCallbackFailed,"",e)}return Object(s.a)(a,[{key:"Message",value:function(){return this.message=p.a.t("uploader.finishUploadError"),Object(r.a)(Object(o.a)(a.prototype),"Message",this).call(this)}}]),a}(E),R=function(e){Object(i.a)(a,e);var t=Object(c.a)(a);function a(e){var r;return Object(l.a)(this,a),(r=t.call(this,n.UpyunPostUploadFailed,e.message)).response=e,r}return Object(s.a)(a,[{key:"Message",value:function(){return p.a.t("uploader.upyunUploadFailed",{msg:this.message})}}]),a}(h),M=function(e){Object(i.a)(a,e);var t=Object(c.a)(a);function a(e){return Object(l.a)(this,a),t.call(this,n.S3LikeUploadCallbackFailed,"",e)}return Object(s.a)(a,[{key:"Message",value:function(){return this.message=p.a.t("uploader.finishUploadError"),Object(r.a)(Object(o.a)(a.prototype),"Message",this).call(this)}}]),a}(E),A=function(e){Object(i.a)(a,e);var t=Object(c.a)(a);function a(e,r){var o;return Object(l.a)(this,a),(o=t.call(this,n.FailedTransformResponse,r.message)).response=e,o}return Object(s.a)(a,[{key:"Message",value:function(){return p.a.t("uploader.parseResponseError",{msg:this.message,content:this.response})}}]),a}(h)},374:function(e,t,a){"use strict";var n=a(13),r=a(14),o=a(16),i=a(17),c=a(126),l=a(0),s=a.n(l),u=a(5),p=a(31),d=a.n(p),m=a(422),f=a.n(m),h=a(423),g=a.n(h),b=a(233),E=a.n(b),v=a(420),O=a.n(v),j=a(421),w=a.n(j),k=a(484),y=a(53),x=a(8),C=a(7045),S=["classes","className","message","onClose","variant"],N={success:O.a,warning:w.a,error:f.a,info:g.a};var T=Object(x.a)((function(e){return{success:{backgroundColor:e.palette.success.main},error:{backgroundColor:e.palette.error.dark},info:{backgroundColor:e.palette.info.main},warning:{backgroundColor:e.palette.warning.main},icon:{fontSize:20},iconVariant:{opacity:.9,marginRight:e.spacing(1)},message:{display:"flex",alignItems:"center"}}}))((function(e){var t=e.classes,a=e.className,n=e.message,r=e.onClose,o=e.variant,i=Object(c.a)(e,S),l=N[o];return s.a.createElement(k.a,Object.assign({className:d()(t[o],a),"aria-describedby":"client-snackbar",message:s.a.createElement("span",{id:"client-snackbar",className:t.message},s.a.createElement(l,{className:d()(t.icon,t.iconVariant)}),n),action:[s.a.createElement(y.a,{key:"close","aria-label":"Close",color:"inherit",className:t.close,onClick:r},s.a.createElement(E.a,{className:t.icon}))]},i))})),P=function(e){Object(o.a)(a,e);var t=Object(i.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={open:!1},e.UNSAFE_componentWillReceiveProps=function(t){t.snackbar.toggle!==e.props.snackbar.toggle&&e.setState({open:!0})},e.handleClose=function(){e.setState({open:!1})},e}return Object(r.a)(a,[{key:"render",value:function(){return s.a.createElement(C.a,{anchorOrigin:{vertical:this.props.snackbar.vertical,horizontal:this.props.snackbar.horizontal},open:this.state.open,autoHideDuration:6e3,onClose:this.handleClose},s.a.createElement(T,{onClose:this.handleClose,variant:this.props.snackbar.color,message:this.props.snackbar.msg}))}}]),a}(l.Component),L=Object(u.c)((function(e){return{snackbar:e.viewUpdate.snackbar}}),(function(){return{}}))(Object(x.a)((function(e){return{margin:{margin:e.spacing(1)}}}))(P));t.a=L},382:function(e,t,a){"use strict";var n=a(13),r=a(14),o=a(16),i=a(17),c=a(6),l=a(0),s=a.n(l),u=a(5),p=a(407),d=a.n(p),m=a(30),f=a(20),h=a(19),g=a(7034),b=a(149),E=a(74),v=a(64),O=a(256),j=a(54),w=a(7159),k=a(8),y=a(12),x=a(18),C=a(2),S=a(199),N=function(e){Object(o.a)(a,e);var t=Object(i.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).handleClose=function(){e.props.setUserPopover(null)},e.openURL=function(e){window.location.href=e},e.sigOut=function(){y.c.delete("/user/session/").then((function(){e.props.toggleSnackbar("top","right",e.props.t("login.loggedOut"),"success"),h.a.signout(),window.location.reload(),e.props.setSessionStatus(!1)})).catch((function(t){e.props.toggleSnackbar("top","right",t.message,"warning")})).then((function(){e.handleClose()}))},e}return Object(r.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.t,r=h.a.GetUser(),o=x.a.isAdminPage(this.props.location.pathname);return s.a.createElement(g.a,{open:null!==this.props.anchorEl,onClose:this.handleClose,anchorEl:this.props.anchorEl,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"}},!h.a.Check()&&s.a.createElement("div",{className:a.visitorMenu},s.a.createElement(b.a,null),s.a.createElement(E.a,{onClick:function(){return e.props.history.push("/login")}},s.a.createElement(v.a,null,s.a.createElement(m.a,null)),n("login.signIn")),this.props.registerEnabled&&s.a.createElement(E.a,{onClick:function(){return e.props.history.push("/signup")}},s.a.createElement(v.a,null,s.a.createElement(m.c,null)),n("login.signUp"))),h.a.Check()&&s.a.createElement("div",null,s.a.createElement("div",{className:a.header},s.a.createElement("div",{className:a.largeAvatarContainer},s.a.createElement(O.a,{className:a.largeAvatar,src:"/api/v3/user/avatar/"+r.id+"/l"})),s.a.createElement("div",{className:a.info},s.a.createElement(j.a,{noWrap:!0},r.nickname),s.a.createElement(j.a,{color:"textSecondary",style:{fontSize:"0.875rem"},noWrap:!0},r.user_name),s.a.createElement(w.a,{className:a.badge,color:1===r.group.id?"secondary":"default",label:r.group.name}))),s.a.createElement("div",null,s.a.createElement(b.a,null),!o&&s.a.createElement(E.a,{style:{padding:" 11px 16px 11px 16px"},onClick:function(){e.handleClose(),e.props.history.push("/profile/"+r.id)}},s.a.createElement(v.a,null,s.a.createElement(m.w,null)),n("navbar.myProfile")),1===r.group.id&&s.a.createElement(E.a,{style:{padding:" 11px 16px 11px 16px"},onClick:function(){e.handleClose(),e.props.history.push("/admin/home")}},s.a.createElement(v.a,null,s.a.createElement(m.h,null)),n("navbar.dashboard")),s.a.createElement(E.a,{style:{padding:" 11px 16px 11px 16px"},onClick:this.sigOut},s.a.createElement(v.a,null,s.a.createElement(m.D,null)),n("login.logout")))))}}]),a}(l.Component),T=Object(u.c)((function(e){return{anchorEl:e.viewUpdate.userPopoverAnchorEl,registerEnabled:e.siteConfig.registerEnabled}}),(function(e){return{setUserPopover:function(t){e(Object(C.O)(t))},toggleSnackbar:function(t,a,n,r){e(Object(C.S)(t,a,n,r))},setSessionStatus:function(t){e(Object(C.L)(t))}}}))(Object(k.a)((function(){return{avatar:{width:"30px",height:"30px"},header:{display:"flex",padding:"20px 20px 20px 20px"},largeAvatar:{height:"90px",width:"90px"},info:{marginLeft:"10px",width:"139px"},badge:{marginTop:"10px"},visitorMenu:{width:200}}}))(Object(f.k)(Object(S.a)()(N)))),P=a(90),L=a(80),F=a(53),D=a(234),I=a(7105),R=function(e){Object(o.a)(a,e);var t=Object(i.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={anchorEl:null},e.showUserInfo=function(t){e.props.setUserPopover(t.currentTarget)},e.handleClose=function(){e.setState({anchorEl:null})},e.openURL=function(e){window.location.href=e},e.returnHome=function(){window.location.href="/home"},e}return Object(r.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.t,r=h.a.Check(this.props.isLogin),o=h.a.GetUser(this.props.isLogin),i=x.a.isAdminPage(this.props.location.pathname);return s.a.createElement("div",{className:a.mobileHidden},s.a.createElement(P.a,{in:this.props.selected.length<=1&&!(!this.props.isMultiple&&this.props.withFile)},s.a.createElement("div",null,!i&&s.a.createElement(s.a.Fragment,null,s.a.createElement(D.a,{position:"top"}),r&&s.a.createElement(s.a.Fragment,null,s.a.createElement(L.a,{title:n("navbar.setting"),placement:"bottom"},s.a.createElement(F.a,{onClick:function(){return e.props.history.push("/setting?")},color:"inherit"},s.a.createElement(d.a,null))))),i&&s.a.createElement(L.a,{title:n("navbar.backToHomepage"),placement:"bottom"},s.a.createElement(F.a,{color:"inherit",onClick:this.returnHome},s.a.createElement(I.a,null))),s.a.createElement(F.a,{color:"inherit",onClick:this.showUserInfo},!r&&s.a.createElement(m.b,null),r&&s.a.createElement(O.a,{src:"/api/v3/user/avatar/"+o.id+"/s",className:a.avatar}))," ")),s.a.createElement(T,null))}}]),a}(l.Component),M=Object(u.c)((function(e){return{selected:e.explorer.selected,isMultiple:e.explorer.selectProps.isMultiple,withFolder:e.explorer.selectProps.withFolder,withFile:e.explorer.selectProps.withFile,isLogin:e.viewUpdate.isLogin}}),(function(e){return{setUserPopover:function(t){e(Object(C.O)(t))}}}))(Object(k.a)((function(e){var t;return{mobileHidden:(t={},Object(c.a)(t,e.breakpoints.down("xs"),{display:"none"}),Object(c.a)(t,"whiteSpace","nowrap"),t),avatar:{width:"30px",height:"30px"},header:{display:"flex",padding:"20px 20px 20px 20px"},largeAvatar:{height:"90px",width:"90px"},info:{marginLeft:"10px",width:"139px"},badge:{marginTop:"10px"},visitorMenu:{width:200}}}))(Object(f.k)(Object(S.a)()(R))));t.a=M},386:function(e,t,a){"use strict";(function(e){var n=a(13),r=a(14),o=a(16),i=a(17),c=a(6),l=a(0),s=a.n(l),u=a(31),p=a.n(u),d=a(5),m=a(120),f=a.n(m),h=a(237),g=a.n(h),b=a(419),E=a.n(b),v=a(129),O=a.n(v),j=a(121),w=a.n(j),k=a(236),y=a.n(k),x=a(161),C=a.n(x),S=a(105),N=a.n(S),T=a(276),P=a.n(T),L=a(49),F=a(25),D=a(464),I=a(18),R=a(401),M=a(403),A=a(382),_=a(408),U=a(30),W=a(20),z=a(8),B=a(198),G=a(64),H=a(62),V=a(7036),q=a(7037),K=a(53),Y=a(90),J=a(54),Z=a(80),Q=a(486),X=a(7054),$=a(89),ee=a(277),te=a(19),ae=a(12),ne=a(409),re=a(7042),oe=a(7043),ie=a(7044),ce=a(7038),le=a(149),se=a(235),ue=a(2),pe=a(40),de=a(199),me=a(148);Object(F.s)();var fe=Object(z.a)((function(e){return{root:{borderRadius:e.shape.borderRadius}}}))(me.a),he=function(t){Object(o.a)(l,t);var a=Object(i.a)(l);function l(e){var t;return Object(n.a)(this,l),(t=a.call(this,e)).UNSAFE_componentWillReceiveProps=function(e){0===t.props.selected.length!==(0===e.selected.length)&&Object(F.d)(0!==t.props.selected.length?"dark"===t.props.theme.palette.type?t.props.theme.palette.background.default:t.props.theme.palette.primary.main:t.props.theme.palette.background.default)},t.handleDrawerToggle=function(){t.setState((function(e){return{mobileOpen:!e.mobileOpen}}))},t.openDownload=function(){t.props.startDownload(t.props.shareInfo,t.props.selected[0])},t.openDirectoryDownload=function(e){t.props.startDirectoryDownload(t.props.shareInfo)},t.archiveDownload=function(e){t.props.startBatchDownload(t.props.shareInfo)},t.signOut=function(){ae.c.delete("/user/session/").then((function(){t.props.toggleSnackbar("top","right",t.props.t("login.loggedOut"),"success"),te.a.signout(),window.location.reload(),t.props.setSessionStatus(!1)})).catch((function(e){t.props.toggleSnackbar("top","right",e.message,"warning")})).finally((function(){t.handleClose()}))},t.state={mobileOpen:!1},t.UploaderRef=s.a.createRef(),t}return Object(r.a)(l,[{key:"UNSAFE_componentWillMount",value:function(){var e=this;this.unlisten=this.props.history.listen((function(){e.setState((function(){return{mobileOpen:!1}}))}))}},{key:"componentWillUnmount",value:function(){this.unlisten()}},{key:"componentDidMount",value:function(){Object(F.d)(this.props.selected.length<=1&&(this.props.isMultiple||!this.props.withFile)?this.props.theme.palette.primary.main:this.props.theme.palette.background.default)}},{key:"render",value:function(){var t,a=this,n=this.props,r=n.classes,o=n.t,i=te.a.GetUser(this.props.isLogin),l=I.a.isHomePage(this.props.location.pathname),u=I.a.isSharePage(this.props.location.pathname),d=s.a.createElement("div",{id:"container",className:r.upDrawer},I.a.isMobile()&&s.a.createElement(_.a,null),te.a.Check(this.props.isLogin)&&s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:r.minStickDrawer},s.a.createElement(ne.a,null),s.a.createElement(B.a,{className:r.paddingList},s.a.createElement(fe,{button:!0,key:"\u6211\u7684\u5206\u4eab",onClick:function(){return a.props.history.push("/shares?")}},s.a.createElement(G.a,null,s.a.createElement(f.a,{className:r.iconFix})),s.a.createElement(H.a,{primary:o("navbar.myShare")})),i.group.allowRemoteDownload&&s.a.createElement(fe,{button:!0,key:"\u79bb\u7ebf\u4e0b\u8f7d",onClick:function(){return a.props.history.push("/aria2?")}},s.a.createElement(G.a,null,s.a.createElement(w.a,{className:r.iconFix})),s.a.createElement(H.a,{primary:o("navbar.remoteDownload")})),i.group.webdav&&s.a.createElement(fe,{button:!0,key:"WebDAV",onClick:function(){return a.props.history.push("/webdav?")}},s.a.createElement(G.a,null,s.a.createElement(re.a,{className:r.iconFix})),s.a.createElement(H.a,{primary:o("navbar.connect")})),s.a.createElement(fe,{button:!0,key:"\u4efb\u52a1\u961f\u5217",onClick:function(){return a.props.history.push("/tasks?")}},s.a.createElement(G.a,null,s.a.createElement(oe.a,{className:r.iconFix})),s.a.createElement(H.a,{primary:o("navbar.taskQueue")})),I.a.isMobile()&&s.a.createElement(s.a.Fragment,null,s.a.createElement(le.a,null),s.a.createElement(fe,{button:!0,key:"\u4e2a\u4eba\u8bbe\u7f6e",onClick:function(){return a.props.history.push("/setting?")}},s.a.createElement(G.a,null,s.a.createElement(ie.a,{className:r.iconFix})),s.a.createElement(H.a,{primary:o("navbar.setting")})),s.a.createElement(fe,{button:!0,key:"\u9000\u51fa\u767b\u5f55",onClick:this.signOut},s.a.createElement(G.a,null,s.a.createElement(U.D,{className:r.iconFix})),s.a.createElement(H.a,{primary:o("login.logout")}))))),s.a.createElement("div",null,s.a.createElement(M.a,null))),!te.a.Check(this.props.isLogin)&&s.a.createElement("div",null,s.a.createElement(fe,{button:!0,key:"\u767b\u5f55",onClick:function(){return a.props.history.push("/login")}},s.a.createElement(G.a,null,s.a.createElement(U.a,{className:r.iconFix})),s.a.createElement(H.a,{primary:o("login.signIn")})),this.props.registerEnabled&&s.a.createElement(fe,{button:!0,key:"\u6ce8\u518c",onClick:function(){return a.props.history.push("/signup")}},s.a.createElement(G.a,null,s.a.createElement(U.c,{className:r.iconFix})),s.a.createElement(H.a,{primary:o("login.signUp")})))),m=e.browser&&/iPad|iPhone|iPod/.test(navigator.userAgent);return s.a.createElement("div",null,s.a.createElement(V.a,{position:"fixed",className:r.appBar,color:"dark"!==this.props.theme.palette.type&&0===this.props.selected.length?"primary":"default"},s.a.createElement(q.a,null,0===this.props.selected.length&&s.a.createElement(K.a,{color:"inherit","aria-label":"Open drawer",onClick:this.handleDrawerToggle,className:r.menuButton},s.a.createElement(P.a,null)),0===this.props.selected.length&&s.a.createElement(K.a,{color:"inherit","aria-label":"Open drawer",onClick:function(){return a.props.handleDesktopToggle(!a.props.desktopOpen)},className:r.menuButtonDesktop},s.a.createElement(P.a,null)),this.props.selected.length>0&&(l||I.a.isSharePage(this.props.location.pathname))&&s.a.createElement(Y.a,{in:this.props.selected.length>0},s.a.createElement(K.a,{color:"inherit",className:r.menuIcon,onClick:function(){return a.props.setSelectedTarget([])}},s.a.createElement(E.a,null))),0===this.props.selected.length&&s.a.createElement(J.a,{variant:"h6",color:"inherit",noWrap:!0,onClick:function(){a.props.history.push("/")}},this.props.subTitle?this.props.subTitle:this.props.title),!this.props.isMultiple&&(this.props.withFile||this.props.withFolder)&&!I.a.isMobile()&&s.a.createElement(J.a,{variant:"h6",color:"inherit",noWrap:!0},this.props.selected[0].name," ",this.props.withFile&&(l||I.a.isSharePage(this.props.location.pathname))&&"("+Object(F.r)(this.props.selected[0].size)+")"),this.props.selected.length>1&&!I.a.isMobile()&&s.a.createElement(J.a,{variant:"h6",color:"inherit",noWrap:!0},o("navbar.objectsSelected",{num:this.props.selected.length})),0===this.props.selected.length&&s.a.createElement(R.a,null),s.a.createElement("div",{className:r.grow}),this.props.selected.length>0&&(l||u)&&s.a.createElement("div",{className:r.sectionForFile},!this.props.isMultiple&&this.props.withFile&&Object(L.i)(this.props.selected[0].name)&&s.a.createElement(Y.a,{in:!this.props.isMultiple&&this.props.withFile&&Object(L.i)(this.props.selected[0].name)},s.a.createElement(Z.a,{title:o("fileManager.open")},s.a.createElement(K.a,{color:"inherit",onClick:function(){return a.props.openPreview(a.props.shareInfo)}},s.a.createElement(O.a,null)))),!this.props.isMultiple&&this.props.withFile&&s.a.createElement(Y.a,{in:!this.props.isMultiple&&this.props.withFile},s.a.createElement(Z.a,{title:o("fileManager.download")},s.a.createElement(K.a,{color:"inherit",onClick:function(){return a.openDownload()}},s.a.createElement(w.a,null)))),(this.props.isMultiple||this.props.withFolder)&&window.showDirectoryPicker&&window.isSecureContext&&s.a.createElement(Y.a,{in:(this.props.isMultiple||this.props.withFolder)&&window.showDirectoryPicker&&window.isSecureContext},s.a.createElement(Z.a,{title:o("fileManager.download")},s.a.createElement(K.a,{color:"inherit",onClick:function(){return a.openDirectoryDownload()}},s.a.createElement(U.m,null)))),(this.props.isMultiple||this.props.withFolder)&&s.a.createElement(Y.a,{in:this.props.isMultiple||this.props.withFolder},s.a.createElement(Z.a,{title:o("fileManager.batchDownload")},s.a.createElement(K.a,{color:"inherit",disableClickAway:!0,onClick:function(){return a.archiveDownload()}},s.a.createElement(w.a,null)))),!this.props.isMultiple&&!I.a.isMobile()&&!u&&s.a.createElement(Y.a,{in:!this.props.isMultiple},s.a.createElement(Z.a,{title:o("fileManager.share")},s.a.createElement(K.a,{color:"inherit",onClick:function(){return a.props.openShareDialog()}},s.a.createElement(f.a,null)))),!this.props.isMultiple&&!u&&s.a.createElement(Y.a,{in:!this.props.isMultiple},s.a.createElement(Z.a,{title:o("fileManager.rename")},s.a.createElement(K.a,{color:"inherit",onClick:function(){return a.props.openRenameDialog()}},s.a.createElement(y.a,null)))),!u&&s.a.createElement("div",{style:{display:"flex"}},!I.a.isMobile()&&s.a.createElement(Y.a,{in:0!==this.props.selected.length&&!I.a.isMobile()},s.a.createElement(Z.a,{title:o("fileManager.move")},s.a.createElement(K.a,{color:"inherit",onClick:function(){return a.props.openMoveDialog()}},s.a.createElement(C.a,null)))),s.a.createElement(Y.a,{in:0!==this.props.selected.length},s.a.createElement(Z.a,{title:o("fileManager.delete")},s.a.createElement(K.a,{color:"inherit",onClick:function(){return a.props.openRemoveDialog()}},s.a.createElement(N.a,null)))),I.a.isMobile()&&s.a.createElement(Y.a,{in:0!==this.props.selected.length&&I.a.isMobile()},s.a.createElement(Z.a,{title:o("fileManager.moreActions")},s.a.createElement(K.a,{color:"inherit",onClick:function(){return a.props.changeContextMenu("file",!0)}},s.a.createElement(ce.a,null)))))),this.props.selected.length<=1&&!(!this.props.isMultiple&&this.props.withFile)&&null!=this.props.audioPreviewPlayingName&&s.a.createElement(K.a,{title:o("navbar.music"),className:r.sideButton,onClick:this.props.audioPreviewOpen,color:"inherit"},s.a.createElement(g.a,{fontSize:"default"})),0===this.props.selected.length&&s.a.createElement(A.a,null),0===this.props.selected.length&&I.a.isMobile()&&(l||this.props.shareInfo)&&s.a.createElement(se.a,{inherit:!0}))),s.a.createElement(D.a,null),s.a.createElement(Q.a,{smUp:!0,implementation:"css"},s.a.createElement(X.a,{container:this.props.container,variant:"temporary",classes:{paper:r.drawerPaper},anchor:"left",open:this.state.mobileOpen,onClose:this.handleDrawerToggle,onOpen:function(){return a.setState((function(){return{mobileOpen:!0}}))},disableDiscovery:m,ModalProps:{keepMounted:!0}},d)),s.a.createElement(Q.a,{xsDown:!0,implementation:"css"},s.a.createElement($.a,{classes:{paper:r.drawerPaperDesktop},className:p()(r.drawer,(t={},Object(c.a)(t,r.drawerOpen,this.props.desktopOpen),Object(c.a)(t,r.drawerClose,!this.props.desktopOpen),t)),variant:"persistent",anchor:"left",open:this.props.desktopOpen},s.a.createElement("div",{className:r.toolbar}),d)))}}]),l}(l.Component),ge=Object(d.c)((function(e){return{desktopOpen:e.viewUpdate.open,selected:e.explorer.selected,isMultiple:e.explorer.selectProps.isMultiple,withFolder:e.explorer.selectProps.withFolder,withFile:e.explorer.selectProps.withFile,path:e.navigator.path,title:e.siteConfig.title,subTitle:e.viewUpdate.subTitle,loadUploader:e.viewUpdate.loadUploader,isLogin:e.viewUpdate.isLogin,shareInfo:e.viewUpdate.shareInfo,registerEnabled:e.siteConfig.registerEnabled,audioPreviewPlayingName:e.explorer.audioPreview.playingName,audioPreviewIsOpen:e.explorer.audioPreview.isOpen}}),(function(e){return{handleDesktopToggle:function(t){e(Object(ue.i)(t))},setSelectedTarget:function(t){e(Object(ue.K)(t))},navigateTo:function(t){e(Object(ue.j)(t))},openCreateFolderDialog:function(){e(Object(ue.o)())},changeContextMenu:function(t,a){e(Object(ue.d)(t,a))},saveFile:function(){e(Object(ue.E)())},openMusicDialog:function(){e(Object(ue.u)())},showImgPreivew:function(t){e(Object(ue.Q)(t))},toggleSnackbar:function(t,a,n,r){e(Object(ue.S)(t,a,n,r))},openRenameDialog:function(){e(Object(ue.y)())},openMoveDialog:function(){e(Object(ue.t)())},openRemoveDialog:function(){e(Object(ue.x)())},openShareDialog:function(){e(Object(ue.A)())},openLoadingDialog:function(t){e(Object(ue.s)(t))},setSessionStatus:function(){e(Object(ue.L)())},openPreview:function(t){e(Object(ue.v)(t))},audioPreviewOpen:function(){e(Object(ue.b)(!0))},startBatchDownload:function(t){e(Object(pe.startBatchDownload)(t))},startDirectoryDownload:function(t){e(Object(pe.startDirectoryDownload)(t))},startDownload:function(t,a){e(Object(pe.startDownload)(t,a))}}}))(Object(ee.a)(Object(z.a)((function(e){var t;return{appBar:(t={marginLeft:240},Object(c.a)(t,e.breakpoints.down("xs"),{marginLeft:270}),Object(c.a)(t,"zIndex",e.zIndex.drawer+1),Object(c.a)(t,"transition"," background-color 250ms"),t),drawer:{width:0,flexShrink:0},drawerDesktop:{width:240,flexShrink:0},icon:{marginRight:e.spacing(2)},menuButton:Object(c.a)({marginRight:20},e.breakpoints.up("sm"),{display:"none"}),menuButtonDesktop:Object(c.a)({marginRight:20},e.breakpoints.down("xs"),{display:"none"}),menuIcon:{marginRight:20},toolbar:e.mixins.toolbar,drawerPaper:{width:270},drawerPaperDesktop:{width:240},upDrawer:Object(c.a)({overflowX:"hidden"},e.breakpoints.up("sm"),{display:"flex",flexDirection:"column",height:"100%",justifyContent:"space-between"}),drawerOpen:{width:240,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerClose:{transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),overflowX:"hidden",width:0},content:{flexGrow:1,padding:e.spacing(3)},grow:{flexGrow:1},badge:{top:1,right:-15},nested:{paddingLeft:e.spacing(4)},sectionForFile:{display:"flex"},extendedIcon:{marginRight:e.spacing(1)},addButton:{marginLeft:"40px",marginTop:"25px",marginBottom:"15px"},fabButton:{borderRadius:"100px"},badgeFix:{right:"10px"},iconFix:{marginLeft:"16px"},dividerFix:{marginTop:"8px"},folderShareIcon:{verticalAlign:"sub",marginRight:"5px"},shareInfoContainer:{display:"flex",marginTop:"15px",marginBottom:"20px",marginLeft:"28px",textDecoration:"none"},shareAvatar:{width:"40px",height:"40px"},stickFooter:{bottom:"0px",position:"absolute",backgroundColor:e.palette.background.paper,width:"100%"},ownerInfo:{marginLeft:"10px",width:"150px"},minStickDrawer:{overflowY:"auto"},paddingList:{padding:e.spacing(1)}}}))(Object(W.k)(Object(de.a)()(he)))));t.a=ge}).call(this,a(296))},39:function(e,t,a){"use strict";a(212);var n=a(41),r=a(11),o=a.n(r),i=a(23),c=a(81),l=a(36),s=function(e){if(0===e)return"0 B";var t=Math.floor(Math.log(e)/Math.log(1024));return(e/Math.pow(1024,t)).toFixed(1)+" "+["B","KB","MB","GB","TB","PB","EB","ZB","YB"][t]};function u(e,t){(!t||t>e.size||0==t)&&(t=e.size);for(var a=[],n=Math.ceil(e.size/t),r=0;r<n;r++){var o=e.slice(t*r,r===n-1?e.size:t*(r+1));a.push(o)}return 0==a.length&&a.push(e.slice(0)),a}function p(e){return e.reduce((function(e,t){return e+t.loaded}),0)}function d(e){return e.name?"".concat("cd_upload_ctx_","name_").concat(e.name,"_dst_").concat(e.dst,"_size_").concat(e.size,"_policy_").concat(e.policy.id):e}function m(e,t){var a=d(e);try{localStorage.setItem(a,JSON.stringify(e))}catch(n){t.warn(new l.u(l.v.WriteCtxFailed,"setResumeCtx failed: ".concat(a)))}}function f(e,t){var a=d(e);try{localStorage.removeItem(a)}catch(n){t.warn(new l.u(l.v.RemoveCtxFailed,"removeResumeCtx failed. key: ".concat(a)))}}function h(e){for(var t=0;t<localStorage.length;t++){var a=localStorage.key(t);if(a&&a.startsWith("cd_upload_ctx_"))try{localStorage.removeItem(a)}catch(n){e.warn(new l.u(l.v.RemoveCtxFailed,"removeResumeCtx failed. key: ".concat(a)))}}}function g(e,t){var a=d(e),n=null;try{n=localStorage.getItem(a)}catch(o){t.warn(new l.u(l.v.ReadCtxFailed,"getResumeCtx failed. key: ".concat(a)))}if(null==n)return null;var r=null;try{r=JSON.parse(n)}catch(i){f(e,t),t.warn(new l.u(l.v.InvalidCtxData,"getResumeCtx failed to parse. key: ".concat(a)))}return r&&r.session&&r.session.expires<Math.floor(Date.now()/1e3)?(f(e,t),t.warn(new l.u(l.v.CtxExpired,"upload session already expired at ".concat(r.session.expires,". key: ").concat(a))),null):r}function b(e){for(var t=[],a=0,n=localStorage.length;a<n;a++){var r=localStorage.key(a);if(r&&r.startsWith("cd_upload_ctx_")){var o=g(r,e);o&&t.push(o)}}return t}function E(e){var t="";for(var a in e){if(t+="<"+a+">",Array.isArray(e[a])){var n,r=Object(c.a)(e[a]);try{for(r.s();!(n=r.n()).done;){var o=n.value;t+="</"+a+">",t+="<"+a+">",t+=E(new Object(o))}}catch(i){r.e(i)}finally{r.f()}}else"object"==typeof e[a]?t+=E(new Object(e[a])):t+=e[a];t+="</"+a+">"}return t.replace(/<\/?[0-9]{1,}>/g,"")}function v(e,t){var a=document.createElement("input");return a.type="file",a.id="upload-file-input-".concat(e),t?(a.id="upload-folder-input-".concat(e),a.setAttribute("webkitdirectory","true"),a.setAttribute("mozdirectory","true")):(a.id="upload-file-input-".concat(e),a.multiple=!0),a.hidden=!0,document.body.appendChild(a),a}function O(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/";return(e=e.map((function(a,n){return n&&(a=a.replace(new RegExp("^"+t),"")),n!==e.length-1&&(a=a.replace(new RegExp(t+"$"),"")),a}))).join(t)}function j(e,t){return e.startsWith(t)?e.slice(t.length):e}function w(e,t){var a=t.webkitRelativePath;return a&&""!=a||(a=t.fsPath)&&""!=a?function(e){var t=e.split("/");return t.pop(),""===t.join("/")?"/":t.join("/")}(O([e,a=j(a,"/")])):e}function k(e){return y.apply(this,arguments)}function y(){return(y=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,new Promise((function(e,a){t.readEntries(e,a)}));case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function x(e,t){return C.apply(this,arguments)}function C(){return(C=Object(i.a)(o.a.mark((function e(t,a){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,new Promise((function(e,n){t.file((function(t){t.fsPath=a,e(t)}))}));case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function S(e){return N.apply(this,arguments)}function N(){return(N=Object(i.a)(o.a.mark((function e(t){var a,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],e.next=3,k(t);case 3:r=e.sent;case 4:if(!(r.length>0)){e.next=11;break}return a.push.apply(a,Object(n.a)(r)),e.next=8,k(t);case 8:r=e.sent,e.next=4;break;case 11:return e.abrupt("return",a);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e){return P.apply(this,arguments)}function P(){return(P=Object(i.a)(o.a.mark((function e(t){var a,r,i,c,l,s,u;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a=[],r=[],i=0;i<t.length;i++)t[i].webkitGetAsEntry()||(c=t[i].getAsFile())&&a.push(c),r.push(t[i].webkitGetAsEntry());case 3:if(!(r.length>0)){e.next=23;break}if(l=r.shift()){e.next=7;break}return e.abrupt("continue",3);case 7:if(!l.isFile){e.next=15;break}return e.t0=a,e.next=11,x(l,l.fullPath);case 11:e.t1=e.sent,e.t0.push.call(e.t0,e.t1),e.next=21;break;case 15:if(!l.isDirectory){e.next=21;break}return s=l.createReader(),e.next=19,S(s);case 19:u=e.sent,r.push.apply(r,Object(n.a)(u));case 21:e.next=3;break;case 23:return e.abrupt("return",a);case 24:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(e){return!!e.dataTransfer&&e.dataTransfer.types.includes("Files")}a(213);var F=a(214);a.d(t,"p",(function(){return s})),a.d(t,"d",(function(){return u})),a.d(t,"q",(function(){return p})),a.d(t,"h",(function(){return d})),a.d(t,"o",(function(){return m})),a.d(t,"l",(function(){return f})),a.d(t,"b",(function(){return h})),a.d(t,"g",(function(){return g})),a.d(t,"j",(function(){return b})),a.d(t,"a",(function(){return E})),a.d(t,"f",(function(){return v})),a.d(t,"k",(function(){return O})),a.d(t,"r",(function(){return j})),a.d(t,"e",(function(){return w})),a.d(t,"c",(function(){return T})),a.d(t,"i",(function(){return L})),a.d(t,"m",(function(){return F.b})),a.d(t,"n",(function(){return F.c}))},40:function(e,t,a){"use strict";a.r(t);var n=a(11),r=a.n(n),o=a(23),i=a(10),c=a(41),l=a(52),s=a(391),u=a.n(s),p=a(13),d=a(14),m=function(){function e(){Object(p.a)(this,e),this.crc=-1}return Object(d.a)(e,[{key:"append",value:function(e){for(var t=0|this.crc,a=this.table,n=0,r=0|e.length;n<r;n++)t=t>>>8^a[255&(t^e[n])];this.crc=t}},{key:"get",value:function(){return~this.crc}}]),e}();m.prototype.table=function(){var e,t,a,n=[];for(e=0;e<256;e++){for(a=e,t=0;t<8;t++)a=1&a?a>>>1^3988292384:a>>>1;n[e]=a}return n}();var f=function(e){var t=new Uint8Array(e);return{array:t,view:new DataView(t.buffer)}};window.ZIP=function(e){var t,a,n,r=Object.create(null),o=[],i=new TextEncoder,c=0,l=0;function s(){l++,(a=r[o[l]])?d():n&&p()}var u={enqueue:function(e){if(n)throw new TypeError("Cannot enqueue a chunk into a readable stream that is closed or has been requested to be closed");var l=e.name.trim(),u=new Date("undefined"===typeof e.lastModified?Date.now():e.lastModified);if(e.directory&&!l.endsWith("/")&&(l+="/"),r[l])throw new Error("File already exists.");var p=i.encode(l);o.push(l);var m=r[l]={level:0,ctrl:t,directory:!!e.directory,nameBuf:p,comment:i.encode(e.comment||""),compressedLength:0,uncompressedLength:0,writeHeader:function(){var e=f(26),a=f(30+p.length);m.offset=c,m.header=e,0===m.level||m.directory||e.view.setUint16(4,2048),e.view.setUint32(0,335546376),e.view.setUint16(6,(u.getHours()<<6|u.getMinutes())<<5|u.getSeconds()/2,!0),e.view.setUint16(8,(u.getFullYear()-1980<<4|u.getMonth()+1)<<5|u.getDate(),!0),e.view.setUint16(22,p.length,!0),a.view.setUint32(0,1347093252),a.array.set(e.array,4),a.array.set(p,30),c+=a.array.length,t.enqueue(a.array)},writeFooter:function(){var e=f(16);e.view.setUint32(0,1347094280),m.crc&&(m.header.view.setUint32(10,m.crc.get(),!0),m.header.view.setUint32(14,m.compressedLength,!0),m.header.view.setUint32(18,m.uncompressedLength,!0),e.view.setUint32(4,m.crc.get(),!0),e.view.setUint32(8,m.compressedLength,!0),e.view.setUint32(12,m.uncompressedLength,!0)),t.enqueue(e.array),c+=m.compressedLength+16,s()},fileLike:e};a||(a=m,d())},close:function(){if(n)throw new TypeError("Cannot close a readable stream that has already been requested to be closed");a||p(),n=!0}};function p(){var e,a,n=0,i=0;for(e=0;e<o.length;e++)n+=46+(a=r[o[e]]).nameBuf.length+a.comment.length;var l=f(n+22);for(e=0;e<o.length;e++)a=r[o[e]],l.view.setUint32(i,1347092738),l.view.setUint16(i+4,5120),l.array.set(a.header.array,i+6),l.view.setUint16(i+32,a.comment.length,!0),a.directory&&l.view.setUint8(i+38,16),l.view.setUint32(i+42,a.offset,!0),l.array.set(a.nameBuf,i+46),l.array.set(a.comment,i+46+a.nameBuf.length),i+=46+a.nameBuf.length+a.comment.length;l.view.setUint32(i,1347093766),l.view.setUint16(i+8,o.length,!0),l.view.setUint16(i+10,o.length,!0),l.view.setUint32(i+12,n,!0),l.view.setUint32(i+16,c,!0),t.enqueue(l.array),t.close()}function d(){var e;if(a)return a.directory?a.writeFooter(a.writeHeader()):a.reader?(e=a).reader.read().then((function(t){if(t.done)return e.writeFooter();var a=t.value;e.crc.append(a),e.uncompressedLength+=a.length,e.compressedLength+=a.length,e.ctrl.enqueue(a)})):void(a.fileLike.stream?(a.crc=new m,a.reader=a.fileLike.stream().getReader(),a.writeHeader()):s())}return new ReadableStream({start:function(a){t=a,e.start&&Promise.resolve(e.start(u))},pull:function(){return d()||e.pull&&Promise.resolve(e.pull(u))}})};var h=a(18),g=a(25),b=a(12),E=a(39),v=a(81),O=a(159);function j(e){return encodeURIComponent("/"===e.path?e.path+e.name:e.path+"/"+e.name)}function w(e,t){return k.apply(this,arguments)}function k(){return(k=Object(o.a)(r.a.mark((function e(t,a){var n,o,i,l,s,u;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],o=Object(v.a)(t),e.prev=2,o.s();case 4:if((i=o.n()).done){e.next=19;break}if("file"!==(l=i.value).type){e.next=9;break}return n.push(l),e.abrupt("continue",17);case 9:if("dir"!==l.type){e.next=17;break}return e.next=12,Object(O.a)(Object(E.k)([l.path,l.name]),a,"","");case 12:return s=e.sent,e.next=15,w(s.data.objects,a);case 15:u=e.sent,n=[].concat(Object(c.a)(n),Object(c.a)(u));case 17:e.next=4;break;case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(2),o.e(e.t0);case 24:return e.prev=24,o.f(),e.finish(24);case 27:return e.abrupt("return",n);case 28:case"end":return e.stop()}}),e,null,[[2,21,24,27]])})))).apply(this,arguments)}var y=a(165),x=a(19),C=a(49),S=a(71),N=a(2),T=a(160),P=a(21),L=a(9);function F(e){var t,a,n,r=2;for("undefined"!=typeof Symbol&&(a=Symbol.asyncIterator,n=Symbol.iterator);r--;){if(a&&null!=(t=e[a]))return t.call(e);if(n&&null!=(t=e[n]))return new D(t.call(e));a="@@asyncIterator",n="@@iterator"}throw new TypeError("Object is not async iterable")}function D(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then((function(e){return{value:e,done:t}}))}return(D=function(e){this.s=e,this.n=e.next}).prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var a=this.s.return;return void 0===a?Promise.resolve({value:e,done:!0}):t(a.apply(this.s,arguments))},throw:function(e){var a=this.s.return;return void 0===a?Promise.reject(e):t(a.apply(this.s,arguments))}},new D(e)}var I=function(){var e=Object(o.a)(r.a.mark((function e(t){var a,n,o,i,l,s,u,p,d,m,f=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=f.length>1&&void 0!==f[1]?f[1]:"",n=[],o=!1,i=!1,e.prev=4,s=F(t.entries());case 6:return e.next=8,s.next();case 8:if(!(o=!(u=e.sent).done)){e.next=25;break}if(p=Object(L.a)(u.value,2),d=p[0],!((m=p[1])instanceof window.FileSystemFileHandle)){e.next=14;break}n.push("".concat(a).concat(d)),e.next=22;break;case 14:return e.t0=n.push,e.t1=n,e.t2=c.a,e.next=19,I(m,"".concat(a).concat(d,"/"));case 19:e.t3=e.sent,e.t4=(0,e.t2)(e.t3),e.t0.apply.call(e.t0,e.t1,e.t4);case 22:o=!1,e.next=6;break;case 25:e.next=31;break;case 27:e.prev=27,e.t5=e.catch(4),i=!0,l=e.t5;case 31:if(e.prev=31,e.prev=32,!o||null==s.return){e.next=36;break}return e.next=36,s.return();case 36:if(e.prev=36,!i){e.next=39;break}throw l;case 39:return e.finish(36);case 40:return e.finish(31);case 41:return e.abrupt("return",n);case 42:case"end":return e.stop()}}),e,null,[[4,27,31,41],[32,,36,40]])})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=Object(o.a)(r.a.mark((function e(t,a){var n,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t;case 1:if(!(a.length>0)){e.next=10;break}if(o=a.shift()){e.next=5;break}return e.abrupt("break",10);case 5:return e.next=7,n.getDirectoryHandle(o,{create:!0});case 7:n=e.sent,e.next=1;break;case 10:return e.abrupt("return",n);case 11:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),M=function(){var e=Object(o.a)(r.a.mark((function e(t,a,n){var o,i,c,l,s,u,p=arguments;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=!(p.length>3&&void 0!==p[3])||p[3],i=n.split("/"),c=i.pop()){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,R(t,i);case 7:return l=e.sent,e.next=10,l.getFileHandle(c,{create:o});case 10:return s=e.sent,e.next=13,s.createWritable();case 13:return u=e.sent,e.next=16,u.write(a);case 16:return e.next=18,u.close();case 18:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}();function A(e){return _.apply(this,arguments)}function _(){return(_=Object(o.a)(r.a.mark((function e(t){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={mode:"readwrite"},e.next=3,t.queryPermission(a);case 3:if(e.t0=e.sent,"granted"!==e.t0){e.next=6;break}return e.abrupt("return",!0);case 6:return e.next=8,t.requestPermission(a);case 8:if(e.t1=e.sent,"granted"!==e.t1){e.next=11;break}return e.abrupt("return",!0);case 11:return e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}a.d(t,"setFileList",(function(){return W})),a.d(t,"setDirList",(function(){return z})),a.d(t,"setSortMethod",(function(){return B})),a.d(t,"setSideBar",(function(){return G})),a.d(t,"setCurrentPolicy",(function(){return H})),a.d(t,"removeSelectedTargets",(function(){return V})),a.d(t,"addSelectedTargets",(function(){return q})),a.d(t,"setSelectedTarget",(function(){return K})),a.d(t,"setLastSelect",(function(){return Y})),a.d(t,"setShiftSelectedIds",(function(){return J})),a.d(t,"sortMethodFuncs",(function(){return Z})),a.d(t,"selectAll",(function(){return Q})),a.d(t,"updateFileList",(function(){return X})),a.d(t,"changeSortMethod",(function(){return $})),a.d(t,"toggleObjectInfoSidebar",(function(){return ee})),a.d(t,"serverSideBatchDownload",(function(){return te})),a.d(t,"startDownload",(function(){return ae})),a.d(t,"startBatchDownload",(function(){return ne})),a.d(t,"cancelDirectoryDownload",(function(){return re})),a.d(t,"startDirectoryDownload",(function(){return oe})),a.d(t,"getViewerURL",(function(){return ie})),a.d(t,"openViewer",(function(){return ce})),a.d(t,"openPreview",(function(){return le})),a.d(t,"selectFile",(function(){return se})),a.d(t,"submitCompressTask",(function(){return ue})),a.d(t,"submitDecompressTask",(function(){return de})),a.d(t,"batchGetSource",(function(){return me})),a.d(t,"openTorrentDownload",(function(){return fe})),a.d(t,"openParentFolder",(function(){return he}));var U,W=function(e){return{type:"SET_FILE_LIST",list:e}},z=function(e){return{type:"SET_DIR_LIST",list:e}},B=function(e){return{type:"SET_SORT_METHOD",method:e}},G=function(e){return{type:"SET_SIDE_BAR",open:e}},H=function(e){return{type:"SET_CURRENT_POLICY",policy:e}},V=function(e){return{type:"RMOVE_SELECTED_TARGETS",fileIds:e}},q=function(e){return{type:"ADD_SELECTED_TARGETS",targets:e}},K=function(e){return{type:"SET_SELECTED_TARGET",targets:e}},Y=function(e,t){return{type:"SET_LAST_SELECT",file:e,index:t}},J=function(e){return{type:"SET_SHIFT_SELECTED_IDS",shiftSelectedIds:e}},Z={sizePos:function(e,t){return e.size-t.size},sizeRes:function(e,t){return t.size-e.size},namePos:function(e,t){return e.name.localeCompare(t.name,navigator.languages[0]||navigator.language,{numeric:!0,ignorePunctuation:!0})},nameRev:function(e,t){return t.name.localeCompare(e.name,navigator.languages[0]||navigator.language,{numeric:!0,ignorePunctuation:!0})},timePos:function(e,t){return Date.parse(e.create_date)-Date.parse(t.create_date)},timeRev:function(e,t){return Date.parse(t.create_date)-Date.parse(e.create_date)},modifyTimePos:function(e,t){return Date.parse(e.date)-Date.parse(t.date)},modifyTimeRev:function(e,t){return Date.parse(t.date)-Date.parse(e.date)}},Q=function(){return function(e,t){var a=t().explorer,n=a.selected,r=a.fileList,o=a.dirList;n.length>=o.length+r.length?e(K([])):e(K([].concat(Object(c.a)(o),Object(c.a)(r))))}},X=function(e){return function(t,a){var n=a().viewUpdate,r=n.sortMethod,o=n.pagination,c=e.filter((function(e){return"dir"===e.type})),s=e.filter((function(e){return"file"===e.type})),u=Z[r];t(z(c.sort(u))),t(W(s.sort(u)));var p=c.length+s.length;o.page*o.size>p&&t(Object(l.h)(Object(i.a)(Object(i.a)({},o),{},{page:Math.max(Math.ceil(p/o.size),1)})))}},$=function(e){return function(t,a){var n=a().explorer,r=n.fileList,o=n.dirList,i=Z[e];x.a.SetPreference("sort",e),t(B(e)),t(z(o.slice().sort(i))),t(W(r.slice().sort(i)))}},ee=function(e){return function(t,a){a();e&&t(Object(l.c)()),t(G(!0))}},te=function(e){return function(t,a){t(Object(N.s)(P.a.t("fileManager.preparingBathDownload")));var n=a(),r=n.explorer.selected,o=n.router.location.pathname,i=[],c=[];r.map((function(e){return"dir"===e.type?i.push(e.id):c.push(e.id),null}));var l="/file/archive",s={items:c,dirs:i};h.a.isSharePage(o)&&(l="/share/archive/"+e.key,s.path=r[0].path),b.c.post(l,s).then((function(e){0===e.rawData.code?(t(Object(N.f)()),window.location.assign(e.data)):t(Object(N.S)("top","right",e.rawData.msg,"warning")),t(Object(N.f)())})).catch((function(e){t(Object(N.S)("top","right",e.message,"error")),t(Object(N.f)())}))}},ae=function(e,t){return function(){var a=Object(o.a)(r.a.mark((function a(n,o){var i,c,l,s;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(i=o(),c=i.router.location.pathname,l=x.a.GetUser(),!h.a.isSharePage(c)||x.a.Check()||!l||l.group.shareDownload){a.next=5;break}return n(Object(N.S)("top","right",P.a.t("share.pleaseLogin"),"warning")),a.abrupt("return");case 5:return n(Object(N.d)("file",!1)),n(Object(N.s)(P.a.t("fileManager.preparingDownload"))),a.prev=7,a.next=10,Object(T.a)(t||e);case 10:s=a.sent,window.location.assign(s.data),n(Object(N.f)()),a.next=19;break;case 15:a.prev=15,a.t0=a.catch(7),n(Object(N.S)("top","right",a.t0.message,"warning")),n(Object(N.f)());case 19:case"end":return a.stop()}}),a,null,[[7,15]])})));return function(e,t){return a.apply(this,arguments)}}()},ne=function(e){return function(){var t=Object(o.a)(r.a.mark((function t(a,n){var i,c,l,s,p,d;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a(Object(N.d)("file",!1)),i=n(),c=i.explorer.selected,!x.a.GetUser().group.allowArchiveDownload){t.next=16;break}return t.prev=4,t.next=7,a(Object(y.a)([{key:"client",name:P.a.t("fileManager.browserBatchDownload"),description:P.a.t("fileManager.browserBatchDownloadDescription")},{key:"server",name:P.a.t("fileManager.serverBatchDownload"),description:P.a.t("fileManager.serverBatchDownloadDescription")}],P.a.t("fileManager.selectArchiveMethod")));case 7:l=t.sent,t.next=13;break;case 10:return t.prev=10,t.t0=t.catch(4),t.abrupt("return");case 13:if("server"!==l.key){t.next=16;break}return a(te(e)),t.abrupt("return");case 16:return a(Object(N.s)(P.a.t("modals.listingFiles"))),s=[],t.prev=18,t.next=21,w(c,e);case 21:s=t.sent,t.next=29;break;case 24:return t.prev=24,t.t1=t.catch(18),a(Object(N.S)("top","right",P.a.t("modals.listingFileError",{message:t.t1.message}),"warning")),a(Object(N.f)()),t.abrupt("return");case 29:if(a(Object(N.f)()),a(Object(N.S)("top","center",P.a.t("fileManager.batchDownloadStarted"),"info")),p=u.a.createWriteStream("archive.zip"),0,d=new window.ZIP({start:function(e){},pull:function(t){return Object(o.a)(r.a.mark((function a(){var n,o,i,c;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!(s.length>0)){a.next=17;break}if(!(n=s.pop())||"file"!==n.type){a.next=15;break}return o=j(n),i=Object(b.d)()+(h.a.isSharePage(location.pathname)?"/share/preview/"+e.key+(""!==o?"?path="+o:""):"/file/preview/"+n.id),a.prev=5,a.delegateYield(r.a.mark((function e(){var a,o,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(i,{cache:"no-cache"});case 2:return a=e.sent,o=function(){return a.body},c=Object(E.r)(Object(E.k)([n.path,n.name]),"/"),t.enqueue({name:c,stream:o}),e.abrupt("return",{v:void 0});case 7:case"end":return e.stop()}}),e)}))(),"t0",7);case 7:if("object"!==typeof(c=a.t0)){a.next=10;break}return a.abrupt("return",c.v);case 10:a.next=15;break;case 12:a.prev=12,a.t1=a.catch(5);case 15:a.next=0;break;case 17:t.close();case 18:case"end":return a.stop()}}),a,null,[[5,12]])})))()}}),!window.WritableStream||!d.pipeTo){t.next=36;break}return t.abrupt("return",d.pipeTo(p).then((function(){return a(Object(N.f)())})).catch((function(e){console.log(e),Object(N.S)("top","right",P.a.t("modals.batchDownloadError",{message:e&&e.message}),"warning"),a(Object(N.f)())})));case 36:case"end":return t.stop()}}),t,null,[[4,10],[18,24]])})));return function(e,a){return t.apply(this,arguments)}}()},re=function(){return U.abort()},oe=function(e){return function(){var t=Object(o.a)(r.a.mark((function t(a,n){var o,i,c,l,s,u,p,d,m,f,g,v,O,k,x,C;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a(Object(N.d)("file",!1)),U=new AbortController,window.showDirectoryPicker&&window.isSecureContext){t.next=4;break}return t.abrupt("return");case 4:return t.prev=4,t.next=7,window.showDirectoryPicker({startIn:"downloads",mode:"readwrite"});case 7:return o=t.sent,t.next=10,A(o);case 10:if(t.sent){t.next=12;break}throw new Error(P.a.t("fileManager.directoryDownloadPermissionError"));case 12:a(Object(N.f)()),t.next=20;break;case 15:return t.prev=15,t.t0=t.catch(4),a(Object(N.S)("top","right",P.a.t("modals.directoryDownloadError",{msg:t.t0&&t.t0.message}),"error")),a(Object(N.f)()),t.abrupt("return");case 20:return i=n(),c=i.explorer.selected,l=i.navigator.path,a(Object(N.s)(P.a.t("modals.listingFiles"))),s=[],t.prev=23,t.next=26,w(c,e);case 26:s=t.sent,t.next=34;break;case 29:return t.prev=29,t.t1=t.catch(23),a(Object(N.S)("top","right",P.a.t("modals.listingFileError",{message:t.t1.message}),"warning")),a(Object(N.f)()),t.abrupt("return");case 34:return a(Object(N.f)()),u=0,t.next=38,I(o,"");case 38:if(d=t.sent,!((m=s.map((function(e){return Object(E.r)("".concat(e.path,"/").concat(e.name),"/"===l?"/":l+"/")})).filter((function(e){return d.includes(e)}))).length>0)){t.next=50;break}return t.prev=41,t.next=44,a(Object(y.a)([{key:"replace",name:P.a.t("fileManager.directoryDownloadReplace"),description:P.a.t("fileManager.directoryDownloadReplaceDescription",{duplicates:m.slice(0,m.length>=3?3:m.length).join(", "),num:m.length})},{key:"skip",name:P.a.t("fileManager.directoryDownloadSkip"),description:P.a.t("fileManager.directoryDownloadSkipDescription",{duplicates:m.slice(0,m.length>=3?3:m.length).join(", "),num:m.length})}],P.a.t("fileManager.selectDirectoryDuplicationMethod")));case 44:p=t.sent,t.next=50;break;case 47:return t.prev=47,t.t2=t.catch(41),t.abrupt("return");case 50:a(Object(N.f)()),a(Object(N.S)("top","center",P.a.t("fileManager.directoryDownloadStarted"),"info")),f=function(e,t){a(Object(N.q)(!0,e,t))},g="";case 54:if(!(s.length>0)){t.next=100;break}if(!(v=s.pop())||"file"!==v.type){t.next=98;break}if(O=j(v),k=Object(b.d)()+(h.a.isSharePage(location.pathname)?"/share/preview/"+e.key+(""!==O?"?path="+O:""):"/file/preview/"+v.id),x=Object(E.r)(Object(E.k)([v.path,v.name]),"/"===l?"/":l+"/"),g=(""===g?"":g+"\n\n")+P.a.t("modals.directoryDownloadStarted",{name:x}),f(g,!1),t.prev=62,!m.includes(x)){t.next=72;break}if("skip"!==p.key){t.next=70;break}return g+="\n"+P.a.t("modals.directoryDownloadSkipNotifiction",{name:x}),f(g,!1),t.abrupt("continue",54);case 70:g+="\n"+P.a.t("modals.directoryDownloadReplaceNotifiction",{name:x}),f(g,!1);case 72:return t.next=74,fetch(k,{cache:"no-cache",signal:U.signal});case 74:return C=t.sent,t.t3=M,t.t4=o,t.next=79,C.blob();case 79:return t.t5=t.sent,t.t6=x,t.next=83,(0,t.t3)(t.t4,t.t5,t.t6);case 83:g+="\n"+P.a.t("modals.directoryDownloadFinished"),f(g,!1),t.next=98;break;case 87:if(t.prev=87,t.t7=t.catch(62),"AbortError"!==t.t7.name){t.next=94;break}return a(Object(N.S)("top","right",P.a.t("modals.directoryDownloadCancelled"),"warning")),g+="\n\n"+P.a.t("modals.directoryDownloadCancelled"),f(g,!0),t.abrupt("return");case 94:u++,a(Object(N.S)("top","right",P.a.t("modals.directoryDownloadErrorNotification",{name:x,msg:t.t7&&t.t7.message}),"warning")),g+="\n"+P.a.t("modals.directoryDownloadError",{msg:t.t7.message}),f(g,!1);case 98:t.next=54;break;case 100:g+="\n"+(0===u?P.a.t("fileManager.directoryDownloadFinished"):P.a.t("fileManager.directoryDownloadFinishedWithError",{failed:u})),f(g,!0),a(Object(N.S)("top","center",0===u?P.a.t("fileManager.directoryDownloadFinished"):P.a.t("fileManager.directoryDownloadFinishedWithError",{failed:u}),"success"));case 103:case"end":return t.stop()}}),t,null,[[4,15],[23,29],[41,47],[62,87]])})));return function(e,a){return t.apply(this,arguments)}}()},ie=function(e,t,a){var n=j(t);return a?"/s/"+t.key+"/".concat(e,"?name=")+encodeURIComponent(t.name)+"&share_path="+n:"/".concat(e,"?p=")+n+"&id="+t.id},ce=function(e,t,a){return function(n,r){n(Object(S.d)(ie(e,t,a)))}},le=function(e){return function(t,a){var n=a(),r=n.explorer.selected,o=n.router.location.pathname,i=h.a.isSharePage(o);if(i){var c=x.a.GetUser();if(!x.a.Check()&&c&&!c.group.shareDownload)return t(Object(N.S)("top","right",P.a.t("share.pleaseLogin"),"warning")),void t(Object(N.d)("file",!1))}switch(t(Object(N.d)("file",!1)),Object(C.i)(r[0].name)){case"img":return void t(Object(N.Q)(r[0]));case"msDoc":return void t(ce("doc",r[0],i));case"audio":return void t(Object(N.P)(r[0]));case"video":return void t(ce("video",r[0],i));case"pdf":return void t(ce("pdf",r[0],i));case"edit":return void t(ce("text",r[0],i));case"code":return void t(ce("code",r[0],i));case"epub":return void t(ce("epub",r[0],i));default:return void t(ae(e,r[0]))}}},se=function(e,t,a){var n=t.ctrlKey,r=t.metaKey,o=t.shiftKey;return function(t,i){if(!([n,o].filter(Boolean).length>1||[r,o].filter(Boolean).length>1)){var l=Object(g.l)(),s=i().explorer,u=s.selected,p=s.lastSelect,d=s.dirList,m=s.fileList;s.shiftSelectedIds;if(o&&!n&&!r&&0!==u.length){t(V(u.map((function(e){return e.id}))));var f=[].concat(Object(c.a)(d),Object(c.a)(m)),h=Math.min(p.index,a),b=Math.max(p.index,a),E=(e.type,f.slice(h,b+1));return t(q(E))}return t(Y(e,a)),t(J([])),n&&!l||r&&l?t(-1!==u.findIndex((function(t){return t.id===e.id}))?V([e.id]):q([e])):t(K([e]))}}},ue=function(e,t){return function(){var a=Object(o.a)(r.a.mark((function a(n,o){var i,c,l,s;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return i=o(),c=i.explorer.selected,l=[],s=[],c.map((function(e){"dir"===e.type?l.push(e.id):s.push(e.id)})),a.next=5,b.c.post("/file/compress",{src:{dirs:l,items:s},name:e,dst:"//"===t?"/":t});case 5:return a.abrupt("return",a.sent);case 6:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}()},pe=["ibm866","iso8859_2","iso8859_3","iso8859_4","iso8859_5","iso8859_6","iso8859_7","iso8859_8","iso8859_8I","iso8859_10","iso8859_13","iso8859_14","iso8859_15","iso8859_16","koi8r","koi8u","macintosh","windows874","windows1250","windows1251","windows1252","windows1253","windows1254","windows1255","windows1256","windows1257","windows1258","macintoshcyrillic","gbk","big5","eucjp","iso2022jp","shiftjis","euckr","utf16be","utf16le"],de=function(e){return function(){var t=Object(o.a)(r.a.mark((function t(a,n){var o,i,l,s,u;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=n(),i=o.explorer.selected,l="",!(i.length>0&&Object(C.c)(i[0].name))){t.next=14;break}return t.prev=3,u=pe.map((function(e){return{key:e,name:e.toUpperCase()}})),t.next=7,a(Object(y.a)([{key:"",name:P.a.t("modals.defaultEncoding")},{key:"gb18030",name:"GB18030",description:P.a.t("modals.chineseMajorEncoding")}].concat(Object(c.a)(u)),P.a.t("modals.selectEncoding")));case 7:s=t.sent,t.next=13;break;case 10:throw t.prev=10,t.t0=t.catch(3),new Error(P.a.t("modals.noEncodingSelected"));case 13:l=s.key;case 14:return t.next=16,b.c.post("/file/decompress",{src:Object(g.f)(i[0]),dst:"//"===e?"/":e,encoding:l});case 16:return t.abrupt("return",t.sent);case 17:case"end":return t.stop()}}),t,null,[[3,10]])})));return function(e,a){return t.apply(this,arguments)}}()},me=function(){return function(){var e=Object(o.a)(r.a.mark((function e(t,a){var n,o,i,c,l;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a(),o=n.explorer.selected,n.router.location.pathname,o.findIndex((function(e){return"dir"===e.type}))>=0&&t(Object(N.s)(P.a.t("modals.listingFiles"))),i=[],e.prev=3,e.next=6,w(o,null);case 6:i=e.sent,e.next=14;break;case 9:return e.prev=9,e.t0=e.catch(3),t(Object(N.S)("top","right",P.a.t("modals.listingFileError",{message:e.t0.message}),"warning")),t(Object(N.f)()),e.abrupt("return");case 14:if(t(Object(N.s)(P.a.t("modals.generatingSourceLinks"))),0!==(c=i.filter((function(e){return e.source_enabled&&"file"===e.type})).map((function(e){return e.id}))).length){e.next=20;break}return t(Object(N.S)("top","right",P.a.t("modals.noFileCanGenerateSourceLink"),"warning")),t(Object(N.f)()),e.abrupt("return");case 20:if(l=x.a.GetUser(),!(c.length>l.group.sourceBatch)){e.next=25;break}return t(Object(N.S)("top","right",P.a.t("modals.sourceBatchSizeExceeded",{limit:l.group.sourceBatch}),"warning")),t(Object(N.f)()),e.abrupt("return");case 25:b.c.post("/file/source",{items:c}).then((function(e){t(Object(N.f)()),1==e.data.length&&e.data[0].error?t(Object(N.S)("top","right",e.data[0].error,"warning")):t(Object(N.r)(1==e.data.length?e.data[0].url:e.data.map((function(e){return"".concat(e.name,": ").concat(e.url).concat(e.error?e.error:"")})).join("\n")))})).catch((function(e){t(Object(N.S)("top","right",e.message,"warning")),t(Object(N.f)())}));case 26:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(t,a){return e.apply(this,arguments)}}()},fe=function(){return function(e,t){var a=t().explorer.selected;e(Object(N.B)(a[0]))}},he=function(){return function(){var e=Object(o.a)(r.a.mark((function e(t,a){var n,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=a(),o=n.explorer.selected,t(Object(N.s)(P.a.t("modals.processing"))),b.c.get("/object/property/"+o[0].id+"?trace_root=true&is_folder="+("dir"===o[0].type).toString()).then((function(e){var a=""===e.data.path?o[0].path:e.data.path;t(Object(N.j)(a)),t(Object(N.f)())})).catch((function(e){t(Object(N.S)("top","right",e.message,"warning")),t(Object(N.f)())}));case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()}},401:function(e,t,a){"use strict";var n=a(13),r=a(14),o=a(16),i=a(17),c=a(6),l=a(0),s=a.n(l),u=a(402),p=a.n(u),d=a(107),m=a(228),f=a.n(m),h=a(120),g=a.n(h),b=a(5),E=a(293),v=a(473),O=a(285),j=a(99),w=a(74),k=a(64),y=a(62),x=a(54),C=a(8),S=a(20),N=a(18),T=a(166),P=a(2),L=a(79),F=a.n(L),D=a(292),I=a(199);Object(T.configure)({ignoreTags:[]});var R={SEARCH:"enter"},M=function(e){Object(o.a)(a,e);var t=Object(i.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).handlers={SEARCH:function(e){N.a.isHomePage(r.props.location.pathname)?r.searchMyFile("")():r.searchShare(),e.target.blur()}},r.handleChange=function(e){var t=e.currentTarget;r.input=e.target.value,r.setState({anchorEl:t,input:e.target.value})},r.cancelSuggest=function(){r.setState({input:""})},r.searchMyFile=function(e){return function(){r.props.searchMyFile("keywords/"+r.input,e)}},r.searchShare=function(){r.props.history.push("/search?keywords="+encodeURIComponent(r.input))},r.state={anchorEl:null,input:""},r}return Object(r.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.t,r=this.state.anchorEl,o=""!==this.state.input?"simple-popper":null,i=N.a.isHomePage(this.props.location.pathname);return s.a.createElement("div",{className:a.search},s.a.createElement("div",{className:a.searchIcon},s.a.createElement(p.a,null)),s.a.createElement(T.HotKeys,{keyMap:R,handlers:this.handlers},s.a.createElement(E.a,{placeholder:n("navbar.searchPlaceholder"),classes:{root:a.inputRoot,input:a.inputInput},onChange:this.handleChange,onBlur:this.cancelSuggest,value:this.state.input})),s.a.createElement(v.a,{id:o,open:""!==this.state.input,anchorEl:r,className:a.suggestBox,transition:!0},(function(t){var n=t.TransitionProps;return s.a.createElement(O.a,Object.assign({},n,{timeout:350}),s.a.createElement(j.a,{square:!0},i&&s.a.createElement(w.a,{onClick:e.searchMyFile("")},s.a.createElement(k.a,{className:a.icon},s.a.createElement(f.a,null)),s.a.createElement(y.a,{classes:{primary:a.primary},primary:s.a.createElement(x.a,{noWrap:!0},s.a.createElement(D.a,{i18nKey:"navbar.searchInFiles",values:{name:e.state.input},components:[s.a.createElement("strong",{key:0})]}))})),i&&"/"!==e.props.path&&!e.props.search&&s.a.createElement(w.a,{onClick:e.searchMyFile(e.props.path)},s.a.createElement(k.a,{className:a.icon},s.a.createElement(F.a,null)),s.a.createElement(y.a,{classes:{primary:a.primary},primary:s.a.createElement(x.a,{noWrap:!0},s.a.createElement(D.a,{i18nKey:"navbar.searchInFolders",values:{name:e.state.input},components:[s.a.createElement("strong",{key:0})]}))})),s.a.createElement(w.a,{onClick:e.searchShare},s.a.createElement(k.a,{className:a.icon},s.a.createElement(g.a,null)),s.a.createElement(y.a,{classes:{primary:a.primary},primary:s.a.createElement(x.a,{noWrap:!0},s.a.createElement(D.a,{i18nKey:"navbar.searchInShares",values:{name:e.state.input},components:[s.a.createElement("strong",{key:0})]}))}))))})))}}]),a}(l.Component),A=Object(b.c)((function(e){return{path:e.navigator.path,search:e.explorer.search}}),(function(e){return{searchMyFile:function(t,a){e(Object(P.F)(t,a))}}}))(Object(C.a)((function(e){var t;return{search:(t={},Object(c.a)(t,e.breakpoints.down("sm"),{display:"none"}),Object(c.a)(t,"position","relative"),Object(c.a)(t,"borderRadius",e.shape.borderRadius),Object(c.a)(t,"backgroundColor",Object(d.fade)(e.palette.common.white,.15)),Object(c.a)(t,"&:hover",{backgroundColor:Object(d.fade)(e.palette.common.white,.25)}),Object(c.a)(t,"marginRight",e.spacing(2)),Object(c.a)(t,"marginLeft",0),Object(c.a)(t,"width","100%"),Object(c.a)(t,e.breakpoints.up("sm"),{marginLeft:e.spacing(7.2),width:"auto"}),t),searchIcon:{width:e.spacing(9),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit",width:"100%"},inputInput:Object(c.a)({paddingTop:e.spacing(1),paddingRight:e.spacing(1),paddingBottom:e.spacing(1),paddingLeft:e.spacing(7),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("md"),{width:200,"&:focus":{width:300}}),suggestBox:{zIndex:"9999",width:364}}}))(Object(S.k)(Object(I.a)()(M))));t.a=A},403:function(e,t,a){"use strict";var n=a(13),r=a(14),o=a(16),i=a(17),c=a(6),l=a(0),s=a.n(l),u=a(404),p=a.n(u),d=a(5),m=a(12),f=a(25),h=a(149),g=a(54),b=a(7039),E=a(80),v=a(8),O=a(137),j=a(20),w=a(2),k=a(199),y=function(e){Object(o.a)(a,e);var t=Object(i.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={percent:0,used:null,total:null,showExpand:!1},e.firstLoad=!0,e.componentDidMount=function(){e.firstLoad&&e.props.isLogin&&(e.firstLoad=!e.firstLoad,e.updateStatus())},e.UNSAFE_componentWillReceiveProps=function(t){(e.props.isLogin&&e.props.refresh!==t.refresh||e.props.isLogin!==t.isLogin&&t.isLogin)&&e.updateStatus()},e.updateStatus=function(){var t=0;m.c.get("/user/storage").then((function(a){a.data.used/a.data.total>=1?(t=100,e.props.toggleSnackbar("top","right",e.props.t("navbar.exceedQuota"),"warning")):t=a.data.used/a.data.total*100,e.setState({percent:t,used:Object(f.r)(a.data.used),total:Object(f.r)(a.data.total)})})).catch((function(){}))},e}return Object(r.a)(a,[{key:"componentWillUnmount",value:function(){this.firstLoad=!1}},{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.t;return s.a.createElement("div",{onMouseEnter:function(){return e.setState({showExpand:!0})},onMouseLeave:function(){return e.setState({showExpand:!1})},className:a.stickFooter},s.a.createElement(h.a,null),s.a.createElement(O.a,null,s.a.createElement("div",{className:a.storageContainer},s.a.createElement(p.a,{className:a.iconFix}),s.a.createElement("div",{className:a.detail},s.a.createElement(g.a,{variant:"subtitle2"},n("navbar.storage")),s.a.createElement(b.a,{className:a.bar,color:"secondary",variant:"determinate",value:this.state.percent}),s.a.createElement("div",{className:a.info},s.a.createElement(E.a,{title:n("navbar.storageDetail",{used:null===this.state.used?" -- ":this.state.used,total:null===this.state.total?" -- ":this.state.total}),placement:"top"},s.a.createElement(g.a,{variant:"caption",noWrap:!0,color:"textSecondary"},null===this.state.used?" -- ":this.state.used," / ",null===this.state.total?" -- ":this.state.total)))))))}}]),a}(l.Component),x=Object(d.c)((function(e){return{refresh:e.viewUpdate.storageRefresh,isLogin:e.viewUpdate.isLogin}}),(function(e){return{toggleSnackbar:function(t,a,n,r){e(Object(w.S)(t,a,n,r))}}}))(Object(v.a)((function(e){var t;return{iconFix:{marginLeft:"32px",marginRight:"17px",color:e.palette.text.secondary,marginTop:"2px"},textFix:{padding:" 0 0 0 16px"},storageContainer:{display:"flex",marginTop:"15px",textAlign:"left",marginBottom:"11px"},detail:{width:"100%",marginRight:"35px"},info:(t={width:"131px",overflow:"hidden",textOverflow:"ellipsis"},Object(c.a)(t,e.breakpoints.down("xs"),{width:"162px"}),Object(c.a)(t,"marginTop","5px"),t),bar:{marginTop:"5px"},stickFooter:{backgroundColor:e.palette.background.paper}}}))(Object(j.k)(Object(k.a)()(y))));t.a=x},408:function(e,t,a){"use strict";var n=a(13),r=a(14),o=a(16),i=a(17),c=a(0),l=a.n(c),s=a(5),u=a(54),p=a(8),d=a(19),m=a(234),f=a(256),h=a(2),g=a(199),b=function(e){Object(o.a)(a,e);var t=Object(i.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).showUserInfo=function(t){e.props.setUserPopover(t.currentTarget)},e}return Object(r.a)(a,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.t,n=d.a.Check(this.props.isLogin),r=d.a.GetUser(this.props.isLogin);return l.a.createElement("div",{className:t.userNav},l.a.createElement("div",{className:t.flexAvatar},l.a.createElement("a",{onClick:this.showUserInfo,className:t.avatar},n&&l.a.createElement(f.a,{src:"/api/v3/user/avatar/"+r.id+"/l",className:t.avatarImg}),!n&&l.a.createElement(f.a,{src:"/api/v3/user/avatar/0/l",className:t.avatarImg})),l.a.createElement(m.a,{position:"left"})),l.a.createElement("div",{className:t.storageCircle},l.a.createElement(u.a,{className:t.nickName,component:"h2",noWrap:!0},n?r.nickname:a("navbar.notLoginIn")),l.a.createElement(u.a,{className:t.groupName,component:"h2",color:"textSecondary",noWrap:!0},n?r.group.name:a("navbar.visitor"))))}}]),a}(c.Component),E=Object(s.c)((function(e){return{isLogin:e.viewUpdate.isLogin}}),(function(e){return{setUserPopover:function(t){e(Object(h.O)(t))}}}))(Object(p.a)((function(e){return{userNav:{height:"170px",backgroundColor:e.palette.primary.main,padding:"20px 20px 2em",backgroundImage:"url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1600 900'%3E%3Cpolygon fill='"+e.palette.primary.light.replace("#","%23")+"' points='957 450 539 900 1396 900'/%3E%3Cpolygon fill='"+e.palette.primary.dark.replace("#","%23")+"' points='957 450 872.9 900 1396 900'/%3E%3Cpolygon fill='"+e.palette.secondary.main.replace("#","%23")+"' points='-60 900 398 662 816 900'/%3E%3Cpolygon fill='"+e.palette.secondary.dark.replace("#","%23")+"' points='337 900 398 662 816 900'/%3E%3Cpolygon fill='"+e.palette.secondary.light.replace("#","%23")+"' points='1203 546 1552 900 876 900'/%3E%3Cpolygon fill='"+e.palette.secondary.main.replace("#","%23")+"' points='1203 546 1552 900 1162 900'/%3E%3Cpolygon fill='"+e.palette.primary.dark.replace("#","%23")+"' points='641 695 886 900 367 900'/%3E%3Cpolygon fill='"+e.palette.primary.main.replace("#","%23")+"' points='587 900 641 695 886 900'/%3E%3Cpolygon fill='"+e.palette.secondary.light.replace("#","%23")+"' points='1710 900 1401 632 1096 900'/%3E%3Cpolygon fill='"+e.palette.secondary.dark.replace("#","%23")+"' points='1710 900 1401 632 1365 900'/%3E%3Cpolygon fill='"+e.palette.secondary.main.replace("#","%23")+"' points='1210 900 971 687 725 900'/%3E%3Cpolygon fill='"+e.palette.secondary.dark.replace("#","%23")+"' points='943 900 1210 900 971 687'/%3E%3C/svg%3E\")",backgroundSize:"cover"},avatar:{display:"block",width:"70px",height:"70px",border:" 2px solid #fff",borderRadius:"50%",overflow:"hidden",boxShadow:"0 2px 5px 0 rgba(0,0,0,0.16), 0 2px 10px 0 rgba(0,0,0,0.12)"},avatarImg:{width:"66px",height:"66px"},nickName:{color:"#fff",marginTop:"15px",fontSize:"17px"},flexAvatar:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},groupName:{color:"#ffffff",opacity:"0.54"},storageCircle:{width:"200px"}}}))(Object(g.a)()(b)));t.a=E},409:function(e,t,a){"use strict";a.d(t,"a",(function(){return Q}));var n=a(6),r=a(41),o=a(9),i=a(0),c=a.n(i),l=a(8),s=a(95),u=a(64),p=a(62),d=a(149),m=a(198),f=a(7040),h=a(7041),g=a(31),b=a.n(g),E=a(410),v=a.n(E),O=a(134),j=a.n(O),w=a(411),k=a.n(w),y=a(412),x=a.n(y),C=a(413),S=a.n(C),N=a(414),T=a.n(N),P=a(20),L=a(18),F=a(474),D=a(476),I=a(477),R=a(148),M=a(5),A=a(19),_=a(30),U=a(200),W=a(53),z=a(12),B=a(2),G=a(111),H=Object(l.a)((function(e){return{root:{borderRadius:e.shape.borderRadius}}}))(R.a),V=Object(l.a)({root:{maxWidth:"100%",boxShadow:"none","&:not(:last-child)":{borderBottom:0},"&:before":{display:"none"},"&$expanded":{margin:0}},expanded:{}})(F.a),q=Object(l.a)((function(e){return{root:{minHeight:0,padding:0,"&$expanded":{minHeight:0}},content:{maxWidth:"100%",margin:0,display:"block","&$expanded":{margin:"0"}},expanded:{}}}))(D.a),K=Object(l.a)((function(e){return{root:{display:"block",padding:e.spacing(0)}}}))(I.a),Y=Object(s.a)((function(e){return{expand:{display:"none",transition:".15s all ease-in-out"},expanded:{display:"block",transform:"rotate(90deg)"},iconFix:{marginLeft:"16px"},hiddenButton:{display:"none"},subMenu:{marginLeft:e.spacing(2)},overFlow:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},paddingList:{padding:e.spacing(1)},paddingSummary:{paddingLeft:e.spacing(1),paddingRight:e.spacing(1)}}})),J={Circle:_.e,CircleOutline:_.f,Heart:_.q,HeartOutline:_.r,Hexagon:_.s,HexagonOutline:_.t,Hexagram:_.u,HexagramOutline:_.v,Rhombus:_.I,RhombusOutline:_.J,Square:_.L,SquareOutline:_.M,Triangle:_.O,TriangleOutline:_.P,FolderHeartOutline:_.n},Z=c.a.lazy((function(){return a.e(12).then(a.bind(null,7073))}));function Q(){var e,t=Y(),a=Object(G.a)().t,l=Object(P.h)(),s=Object(P.g)(),g=L.a.isHomePage(l.pathname),E=Object(i.useState)(!0),O=Object(o.a)(E,2),w=O[0],y=O[1],C=Object(i.useState)(!1),N=Object(o.a)(C,2),F=N[0],D=N[1],I=Object(i.useState)(null),R=Object(o.a)(I,2),Q=R[0],X=R[1],$=Object(i.useState)(A.a.GetUser().tags?A.a.GetUser().tags:[]),ee=Object(o.a)($,2),te=ee[0],ae=ee[1],ne=Object(M.d)(),re=Object(i.useCallback)((function(e,t){return ne(Object(B.F)(e,t))}),[ne]),oe=Object(i.useCallback)((function(e){return ne(Object(B.j)(e))}),[ne]),ie=Object(i.useCallback)((function(e,t,a,n){return ne(Object(B.S)(e,t,a,n))}),[ne]);return c.a.createElement(c.a.Fragment,null,c.a.createElement(i.Suspense,{fallback:""},c.a.createElement(Z,{onSuccess:function(e){var t=[].concat(Object(r.a)(te),[e]);ae(t);var a=A.a.GetUser();a.tags=t,A.a.SetUser(a)},open:F,onClose:function(){return D(!1)}})),c.a.createElement(V,{square:!0,expanded:w&&g,onChange:function(){return g&&y(!w)}},c.a.createElement(q,{"aria-controls":"panel1d-content",id:"panel1d-header"},c.a.createElement("div",{className:t.paddingSummary},c.a.createElement(H,{button:!0,key:"\u6211\u7684\u6587\u4ef6",onClick:function(){return!g&&s.push("/home?path=%2F")}},c.a.createElement(u.a,null,c.a.createElement(f.a,{className:b()((e={},Object(n.a)(e,t.expanded,w&&g),Object(n.a)(e,t.iconFix,!0),e),t.expand)}),!(w&&g)&&c.a.createElement(v.a,{className:t.iconFix})),c.a.createElement(p.a,{primary:a("navbar.myFiles")}))),c.a.createElement(d.a,null)),c.a.createElement(K,null,c.a.createElement(m.a,{className:t.paddingList,onMouseLeave:function(){return X(null)}},c.a.createElement(H,{button:!0,id:"pickfiles",className:t.hiddenButton},c.a.createElement(u.a,null,c.a.createElement(j.a,null)),c.a.createElement(p.a,null)),c.a.createElement(H,{button:!0,id:"pickfolder",className:t.hiddenButton},c.a.createElement(u.a,null,c.a.createElement(j.a,null)),c.a.createElement(p.a,null)),[{key:a("navbar.videos"),id:"video",icon:c.a.createElement(k.a,{className:[t.iconFix,t.iconVideo]})},{key:a("navbar.photos"),id:"image",icon:c.a.createElement(x.a,{className:[t.iconFix,t.iconImg]})},{key:a("navbar.music"),id:"audio",icon:c.a.createElement(S.a,{className:[t.iconFix,t.iconAudio]})},{key:a("navbar.documents"),id:"doc",icon:c.a.createElement(T.a,{className:[t.iconFix,t.iconDoc]})}].map((function(e){return c.a.createElement(H,{button:!0,key:e.key,onClick:function(){return re(e.id+"/internal","")}},c.a.createElement(u.a,{className:t.subMenu},e.icon),c.a.createElement(p.a,{primary:e.key}))})),te.map((function(e){return c.a.createElement(H,{button:!0,key:e.id,onMouseEnter:function(){return X(e.id)},onClick:function(){0===e.type?re("tag/"+e.id,""):oe(e.expression)}},c.a.createElement(u.a,{className:t.subMenu},function(e,a){if(J[e]){var n=J[e];return c.a.createElement(n,{className:[t.iconFix],style:a?{color:a}:{}})}return c.a.createElement(_.e,{className:[t.iconFix]})}(0===e.type?e.icon:"FolderHeartOutline",0===e.type?e.color:null)),c.a.createElement(p.a,{className:t.overFlow,primary:e.name}),Q===e.id&&c.a.createElement(U.a,{onClick:function(){return t=e.id,void z.c.delete("/tag/"+t).then((function(){var e=te.filter((function(e){return e.id!==t}));ae(e);var a=A.a.GetUser();a.tags=e,A.a.SetUser(a)})).catch((function(e){ie("top","right",e.message,"error")}));var t}},c.a.createElement(W.a,{size:"small",edge:"end","aria-label":"delete"},c.a.createElement(h.a,null))))})),c.a.createElement(H,{button:!0,onClick:function(){return D(!0)}},c.a.createElement(u.a,{className:t.subMenu},c.a.createElement(_.N,{className:t.iconFix})),c.a.createElement(p.a,{primary:a("navbar.addATag")})))," ",c.a.createElement(d.a,null))))}},433:function(e,t,a){"use strict";a.r(t);var n=a(13),r=a(14),o=a(16),i=a(17),c=a(0),l=a.n(c),s=a(5),u=a(12),p=a(49),d=a(8),m=a(18),f=a(20),h=a(434),g=(a(7022),a(117)),b=a(2),E=function(e){Object(o.a)(a,e);var t=Object(i.a)(a);function a(){var e;Object(n.a)(this,a);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={items:[],photoIndex:0,isOpen:!1},e.UNSAFE_componentWillReceiveProps=function(t){var a=[],n=0;if(""!==t.first.id){if(m.a.isSharePage(e.props.location.pathname)&&!t.first.path){var r={intro:t.first.name,src:u.b+"/share/preview/"+t.first.key};return n=0,a.push(r),void e.setState({photoIndex:n,items:a,isOpen:!0})}t.other.map((function(r){var o=r.name.split(".").pop().toLowerCase();if(-1!==p.g.indexOf(o)){var i="";i=m.a.isSharePage(e.props.location.pathname)?(i=u.b+"/share/preview/"+r.key)+"?path="+encodeURIComponent("/"===r.path?r.path+r.name:r.path+"/"+r.name):u.b+"/file/preview/"+r.id;var c={intro:r.name,src:i};r.path===t.first.path&&r.name===t.first.name&&(n=a.length),a.push(c)}})),e.setState({photoIndex:n,items:a,isOpen:!0})}},e.handleClose=function(){e.props.showImgPreivew(g.initState.imgPreview.first),e.setState({isOpen:!1})},e}return Object(r.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.photoIndex,n=t.isOpen,r=t.items;return l.a.createElement("div",null,n&&l.a.createElement(h.a,{images:r,visible:n,onClose:function(){return e.handleClose()},index:a,onIndexChange:function(t){return e.setState({photoIndex:t})}}))}}]),a}(c.Component),v=Object(s.c)((function(e){return{first:e.explorer.imgPreview.first,other:e.explorer.imgPreview.other}}),(function(e){return{showImgPreivew:function(t){e(Object(b.Q)(t))}}}))(Object(d.a)((function(){return{}}))(Object(f.k)(E)));t.default=v},464:function(e,t,a){"use strict";var n,r,o=a(41),i=a(9),c=a(0),l=a.n(c),s=a(11),u=a.n(s),p=a(23),d=a(10),m=a(13),f=a(14);!function(e){e.local="local",e.remote="remote",e.oss="oss",e.qiniu="qiniu",e.onedrive="onedrive",e.cos="cos",e.upyun="upyun",e.s3="s3"}(n||(n={})),function(e){e[e.file=0]="file",e[e.resumeHint=1]="resumeHint"}(r||(r={}));var h,g=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"OFF",a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"UPLOAD",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;Object(m.a)(this,e),this.level=t,this.prefix=a,this.id=n}return Object(f.a)(e,[{key:"getPrintPrefix",value:function(e){return"Cloudreve-Uploader [".concat(e,"][").concat(this.prefix,"#").concat(this.id,"]:")}},{key:"info",value:function(){var e=["INFO"];if(e.includes(this.level)){for(var t,a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];(t=console).log.apply(t,[this.getPrintPrefix("INFO")].concat(n))}}},{key:"warn",value:function(){var e=["INFO","WARN"];if(e.includes(this.level)){for(var t,a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];(t=console).warn.apply(t,[this.getPrintPrefix("WARN")].concat(n))}}},{key:"error",value:function(){var e=["INFO","WARN","ERROR"];if(e.includes(this.level)){for(var t,a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];(t=console).error.apply(t,[this.getPrintPrefix("ERROR")].concat(n))}}}]),e}(),b=a(36),E=a(16),v=a(17),O=a(213),j=a(214),w=a(92),k=a.n(w),y=a(39);function x(e,t){return C.apply(this,arguments)}function C(){return(C=Object(p.a)(u.a.mark((function e(t,a){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(y.n)("file/upload",{method:"put",data:t,cancelToken:a});case 2:if(0==(n=e.sent).data.code){e.next=5;break}throw new b.c(n.data);case 5:return e.abrupt("return",n.data.data);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(){return(S=Object(p.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(y.n)("file/upload/".concat(t),{method:"delete"});case 2:if(0==(a=e.sent).data.code){e.next=5;break}throw new b.d(a.data);case 5:return e.abrupt("return",a.data.data);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(e,t,a,n){return T.apply(this,arguments)}function T(){return(T=Object(p.a)(u.a.mark((function e(t,a,n,r){var o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(y.n)("file/upload/".concat(t,"/").concat(a.index),{method:"post",headers:{"content-type":"application/octet-stream"},data:a.chunk,onUploadProgress:function(e){n({loaded:e.loaded,total:e.total})},cancelToken:r});case 2:if(0==(o=e.sent).data.code){e.next=5;break}throw new b.g(o.data,a.index);case 5:return e.abrupt("return",o.data.data);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(e,t,a,n,r){return L.apply(this,arguments)}function L(){return(L=Object(p.a)(u.a.mark((function e(t,a,n,r,o){var i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(y.m)("".concat(t,"?chunk=").concat(n.index),{method:"post",headers:{"content-type":"application/octet-stream",Authorization:a},data:n.chunk,onUploadProgress:function(e){r({loaded:e.loaded,total:e.total})},cancelToken:o});case 2:if(0==(i=e.sent).data.code){e.next=5;break}throw new b.r(i.data,n.index);case 5:return e.abrupt("return",i.data.data);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(e,t,a,n,r){return D.apply(this,arguments)}function D(){return(D=Object(p.a)(u.a.mark((function e(t,a,n,r,o){var i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(y.m)(t,{method:""===a?"get":"put",headers:Object(d.a)({"content-type":"application/octet-stream"},""!==a&&{"content-range":a}),data:n.chunk,onUploadProgress:function(e){r({loaded:e.loaded,total:e.total})},cancelToken:o}).catch((function(e){if(e instanceof b.f&&e.response)throw new b.h(e.response.data);throw e}));case 2:return i=e.sent,e.abrupt("return",i.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(e,t){return R.apply(this,arguments)}function R(){return(R=Object(p.a)(u.a.mark((function e(t,a){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(y.n)("callback/onedrive/finish/".concat(t),{method:"post",data:"{}",cancelToken:a});case 2:if(0==(n=e.sent).data.code){e.next=5;break}throw new b.j(n.data);case 5:return e.abrupt("return",n.data.data);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(e,t,a,n){return A.apply(this,arguments)}function A(){return(A=Object(p.a)(u.a.mark((function e(t,a,n,r){var o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(y.m)(t,{method:"put",headers:{"content-type":"application/octet-stream"},data:a.chunk,onUploadProgress:function(e){n({loaded:e.loaded,total:e.total})},cancelToken:r,responseType:"document",transformResponse:void 0}).catch((function(e){if(e instanceof b.f&&e.response)throw new b.o(e.response.data);throw e}));case 2:return o=e.sent,e.abrupt("return",o.headers.etag);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(e,t,a,n){return U.apply(this,arguments)}function U(){return(U=Object(p.a)(u.a.mark((function e(t,a,n,r){var o,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o="",a||(o+="<CompleteMultipartUpload>",n.forEach((function(e){o+="<Part>";var t={PartNumber:e.index+1,ETag:e.etag};o+=Object(y.a)(t),o+="</Part>"})),o+="</CompleteMultipartUpload>"),e.next=4,Object(y.m)(t,{method:"post",cancelToken:r,responseType:"document",transformResponse:void 0,data:o,headers:a?{"content-type":"application/octet-stream","x-oss-forbid-overwrite":"true","x-oss-complete-all":"yes"}:{"content-type":"application/xhtml+xml"},validateStatus:function(e){return 200==e}}).catch((function(e){if(e instanceof b.f&&e.response)throw new b.p(e.response.data);throw e}));case 4:return i=e.sent,e.abrupt("return",i.data);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(e,t,a,n,r){return z.apply(this,arguments)}function z(){return(z=Object(p.a)(u.a.mark((function e(t,a,n,r,o){var i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(y.m)("".concat(t,"/").concat(n.index+1),{method:"put",headers:{"content-type":"application/octet-stream",authorization:"UpToken "+a},data:n.chunk,onUploadProgress:function(e){r({loaded:e.loaded,total:e.total})},cancelToken:o}).catch((function(e){if(e instanceof b.f&&e.response)throw new b.l(e.response.data);throw e}));case 2:return i=e.sent,e.abrupt("return",i.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(e,t,a,n){return G.apply(this,arguments)}function G(){return(G=Object(p.a)(u.a.mark((function e(t,a,n,r){var o,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={parts:n.map((function(e){return{etag:e.etag,partNumber:e.index+1}}))},e.next=3,Object(y.m)("".concat(t),{method:"post",headers:{"content-type":"application/json",authorization:"UpToken "+a},data:o,cancelToken:r}).catch((function(e){if(e instanceof b.f&&e.response)throw new b.m(e.response.data);throw e}));case 3:return i=e.sent,e.abrupt("return",i.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(e,t,a,n,r,o,i,c,l,s,u){return V.apply(this,arguments)}function V(){return(V=Object(p.a)(u.a.mark((function e(t,a,n,r,o,i,c,l,s,p,d){var m,f;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(m=new FormData).append("policy",n),m.append("key",r),m.append("x-cos-meta-callback",o),m.append("x-cos-meta-key",i),m.append("q-sign-algorithm","sha1"),m.append("q-key-time",c),m.append("q-ak",s),m.append("q-signature",l),m.append("name",a.name),m.append("file",a),e.next=13,Object(y.m)("".concat(t),{method:"post",headers:{"content-type":"multipart/form-data"},data:m,onUploadProgress:function(e){p({loaded:e.loaded,total:e.total})},cancelToken:d,responseType:"document",transformResponse:void 0}).catch((function(e){if(e instanceof b.f&&e.response)throw new b.b(e.response.data);throw e}));case 13:return f=e.sent,e.abrupt("return",f.data);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(e,t){return K.apply(this,arguments)}function K(){return(K=Object(p.a)(u.a.mark((function e(t,a){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(y.n)("callback/cos/".concat(t),{method:"get",data:"{}",cancelToken:a});case 2:if(0==(n=e.sent).data.code){e.next=5;break}throw new b.a(n.data);case 5:return e.abrupt("return",n.data.data);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y(e,t,a,n,r,o){return J.apply(this,arguments)}function J(){return(J=Object(p.a)(u.a.mark((function e(t,a,n,r,o,i){var c,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(c=new FormData).append("policy",n),c.append("authorization",r),c.append("file",a),e.next=6,Object(y.m)("".concat(t),{method:"post",headers:{"content-type":"multipart/form-data"},data:c,onUploadProgress:function(e){o({loaded:e.loaded,total:e.total})},cancelToken:i}).catch((function(e){if(e instanceof b.f&&e.response)throw new b.w(e.response.data);throw e}));case 6:return l=e.sent,e.abrupt("return",l.data);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(e,t){return Q.apply(this,arguments)}function Q(){return(Q=Object(p.a)(u.a.mark((function e(t,a){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(y.n)("callback/s3/".concat(t),{method:"get",data:"{}",cancelToken:a});case 2:if(0==(n=e.sent).data.code){e.next=5;break}throw new b.q(n.data);case 5:return e.abrupt("return",n.data.data);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(e){e[e.added=0]="added",e[e.resumable=1]="resumable",e[e.initialized=2]="initialized",e[e.queued=3]="queued",e[e.preparing=4]="preparing",e[e.processing=5]="processing",e[e.finishing=6]="finishing",e[e.finished=7]="finished",e[e.error=8]="error",e[e.canceled=9]="canceled"}(h||(h={}));var X=[n.local,n.remote,n.qiniu,n.oss,n.onedrive,n.s3],$=function(){function e(t,a){var n=this;Object(m.a)(this,e),this.task=t,this.manager=a,this.child=void 0,this.status=h.added,this.error=void 0,this.id=++e.id,this.logger=void 0,this.subscriber=void 0,this.cancelToken=j.a.source(),this.progress=void 0,this.lastTime=Date.now(),this.startTime=Date.now(),this.subscribe=function(e){n.subscriber=e},this.start=Object(p.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.logger.info("Activate uploading task"),n.transit(h.initialized),n.lastTime=n.startTime=Date.now(),e.prev=3,Object(O.a)(n.task.file,n.task.policy),e.next=12;break;case 7:return e.prev=7,e.t0=e.catch(3),n.logger.error("File validate failed with error:",e.t0),n.setError(e.t0),e.abrupt("return");case 12:n.logger.info("Enqueued in manager pool"),n.transit(h.queued),n.manager.pool.enqueue(n).catch((function(e){n.logger.info("Upload task failed with error:",e),n.setError(e)}));case 15:case"end":return e.stop()}}),e,null,[[3,7]])}))),this.run=Object(p.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.logger.info("Start upload task, create upload session..."),n.transit(h.preparing),null!=(t=y.g(n.task,n.logger))){e.next=10;break}return e.next=6,x({path:n.task.dst,size:n.task.file.size,name:n.task.file.name,policy_id:n.task.policy.id,last_modified:n.task.file.lastModified,mime_type:n.task.file.type},n.cancelToken.token);case 6:n.task.session=e.sent,n.logger.info("Upload session created:",n.task.session),e.next=14;break;case 10:n.task.session=t.session,n.task.resumed=!0,n.task.chunkProgress=t.chunkProgress,n.logger.info("Resume upload from cached ctx:",t);case 14:return n.transit(h.processing),e.next=17,n.upload();case 17:return e.next=19,n.afterUpload();case 19:y.l(n.task,n.logger),n.transit(h.finished),n.logger.info("Upload task completed");case 22:case"end":return e.stop()}}),e)}))),this.cancel=Object(p.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.status!==h.finished){e.next=2;break}return e.abrupt("return");case 2:return n.cancelToken.cancel(),e.next=5,n.cancelUploadSession();case 5:n.transit(h.canceled);case 6:case"end":return e.stop()}}),e)}))),this.reset=function(){n.cancelToken=k.a.CancelToken.source(),n.progress={total:{size:0,loaded:0,percent:0}}},this.cancelUploadSession=function(){return new Promise((function(e){y.l(n.task,n.logger),n.task.session?setTimeout((function(){var t;(function(e){return S.apply(this,arguments)})(null===(t=n.task.session)||void 0===t?void 0:t.sessionID).catch((function(e){n.logger.warn("Failed to cancel upload session: ",e)})).finally((function(){e()}))}),500):e()}))},this.logger=new g(this.manager.logger.level,"UPLOADER",this.id),this.logger.info("Initialize new uploader for task: ",t),this.subscriber={onTransition:function(e){},onError:function(e){},onProgress:function(e){},onMsg:function(e,t){}}}return Object(f.a)(e,[{key:"afterUpload",value:function(){var e=Object(p.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"setError",value:function(e){e instanceof b.u&&e.Retryable()&&X.includes(this.task.policy.type)||(this.logger.warn("Non-resume error occurs, clean resume ctx cache"),this.cancelUploadSession()),e instanceof b.n||(this.status=h.error,this.error=e,this.subscriber.onError(e))}},{key:"transit",value:function(e){this.status=e,this.subscriber.onTransition(e)}},{key:"getProgressInfoItem",value:function(e,t,a){return Object(d.a)({size:t,loaded:e,percent:e/t*100},null==a?{}:{fromCache:a})}},{key:"key",value:function(){return y.h(this.task)}}]),e}();$.id=0;var ee,te=function(e){Object(E.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).chunks=void 0,e.upload=Object(p.a)(u.a.mark((function t(){var a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.logger.info("Preparing uploading file chunks."),e.initBeforeUploadChunks(),e.logger.info("Starting uploading file chunks:",e.chunks),e.updateLocalCache(),a=0;case 5:if(!(a<e.chunks.length)){t.next=14;break}if(!(e.task.chunkProgress[a].loaded<e.chunks[a].size||0==e.chunks[a].size)){t.next=11;break}return t.next=9,e.uploadChunk({chunk:e.chunks[a],index:a});case 9:e.logger.info("Chunk [".concat(a,"] uploaded.")),e.updateLocalCache();case 11:a++,t.next=5;break;case 14:case"end":return t.stop()}}),t)}))),e}return Object(f.a)(a,[{key:"initBeforeUploadChunks",value:function(){var e;this.chunks=y.d(this.task.file,null===(e=this.task.session)||void 0===e?void 0:e.chunkSize),null==y.g(this.task,this.logger)&&(this.task.chunkProgress=this.chunks.map((function(e,t){return{loaded:0,index:t}}))),this.notifyResumeProgress()}},{key:"updateChunkProgress",value:function(e,t){this.task.chunkProgress[t].loaded=e,this.notifyResumeProgress()}},{key:"notifyResumeProgress",value:function(){var e=this;this.progress={total:this.getProgressInfoItem(y.q(this.task.chunkProgress),this.task.file.size+1),chunks:this.chunks.map((function(t,a){return e.getProgressInfoItem(e.task.chunkProgress[a].loaded,t.size,!1)}))},this.subscriber.onProgress(this.progress)}},{key:"updateLocalCache",value:function(){y.o(this.task,this.logger)}}]),a}($),ae=function(e){Object(E.a)(a,e);var t=Object(v.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(f.a)(a,[{key:"uploadChunk",value:function(){var e=Object(p.a)(u.a.mark((function e(t){var a,n=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",N(null===(a=this.task.session)||void 0===a?void 0:a.sessionID,t,(function(e){n.updateChunkProgress(e.loaded,t.index)}),this.cancelToken.token));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),a}(te),ne=a(212),re=function(e){Object(E.a)(a,e);var t=Object(v.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(f.a)(a,[{key:"uploadChunk",value:function(){var e=Object(p.a)(u.a.mark((function e(t){var a,n,r=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",P("".concat(null===(a=this.task.session)||void 0===a?void 0:a.uploadURLs[0]),null===(n=this.task.session)||void 0===n?void 0:n.credential,t,(function(e){r.updateChunkProgress(e.loaded,t.index)}),this.cancelToken.token));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),a}(te),oe=function(e){Object(E.a)(a,e);var t=Object(v.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(f.a)(a,[{key:"uploadChunk",value:function(){var e=Object(p.a)(u.a.mark((function e(t){var a,n=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.chunk.size){e.next=2;break}throw new b.i;case 2:return a=this.progress.total.loaded+t.chunk.size-1,e.abrupt("return",this.sendRange(t,this.progress.total.loaded,a,0).catch((function(e){if(e instanceof b.h&&e.response.error.innererror&&"fragmentOverlap"==e.response.error.innererror.code)return n.alignChunkOffset(t);throw e})));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendRange",value:function(){var e=Object(p.a)(u.a.mark((function e(t,a,n,r){var o,i,c=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i="bytes ".concat(a,"-").concat(n,"/").concat(this.task.file.size),e.abrupt("return",F("".concat(null===(o=this.task.session)||void 0===o?void 0:o.uploadURLs[0]),i,t,(function(e){c.updateChunkProgress(r+e.loaded,t.index)}),this.cancelToken.token));case 2:case"end":return e.stop()}}),e,this)})));return function(t,a,n,r){return e.apply(this,arguments)}}()},{key:"alignChunkOffset",value:function(){var e=Object(p.a)(u.a.mark((function e(t){var a,n,r,o,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.logger.info("Chunk [".concat(t.index,"] overlapped, checking next expected range...")),e.next=3,F("".concat(null===(a=this.task.session)||void 0===a?void 0:a.uploadURLs[0]),"",t,(function(e){return null}),this.cancelToken.token);case 3:if(n=e.sent,r=parseInt(n.nextExpectedRanges[0].split("-")[0]),this.logger.info("Next expected range start from OneDrive is ".concat(r,".")),!(r>=this.progress.total.loaded)){e.next=12;break}return this.logger.info("This whole chunk is overlapped, skipping..."),this.updateChunkProgress(t.chunk.size,t.index),e.abrupt("return");case 12:return this.updateChunkProgress(0,t.index),o=this.progress.total.loaded+t.chunk.size-1,i=r-this.progress.total.loaded,t.chunk=t.chunk.slice(i),this.updateChunkProgress(i,t.index),e.abrupt("return",this.sendRange(t,r,o,i));case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"afterUpload",value:function(){var e=Object(p.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.logger.info("Finishing upload..."),this.transit(h.finishing),e.abrupt("return",I(this.task.session.sessionID,this.cancelToken.token));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),a}(te),ie=function(e){Object(E.a)(a,e);var t=Object(v.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(f.a)(a,[{key:"uploadChunk",value:function(){var e=Object(p.a)(u.a.mark((function e(t){var a,n=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",M(null===(a=this.task.session)||void 0===a?void 0:a.uploadURLs[t.index],t,(function(e){n.updateChunkProgress(e.loaded,t.index)}),this.cancelToken.token));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"afterUpload",value:function(){var e=Object(p.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.logger.info("Finishing multipart upload..."),this.transit(h.finishing),e.abrupt("return",_(this.task.session.completeURL,!0,this.task.chunkProgress,this.cancelToken.token));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),a}(te),ce=function(e){Object(E.a)(a,e);var t=Object(v.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(f.a)(a,[{key:"uploadChunk",value:function(){var e=Object(p.a)(u.a.mark((function e(t){var a,n,r,o=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W(null===(a=this.task.session)||void 0===a?void 0:a.uploadURLs[0],null===(n=this.task.session)||void 0===n?void 0:n.credential,t,(function(e){o.updateChunkProgress(e.loaded,t.index)}),this.cancelToken.token);case 2:r=e.sent,this.task.chunkProgress[t.index].etag=r.etag;case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"afterUpload",value:function(){var e=Object(p.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.logger.info("Finishing multipart upload..."),this.transit(h.finishing),e.abrupt("return",B(null===(t=this.task.session)||void 0===t?void 0:t.uploadURLs[0],null===(a=this.task.session)||void 0===a?void 0:a.credential,this.task.chunkProgress,this.cancelToken.token));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),a}(te),le=function(e){Object(E.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).upload=Object(p.a)(u.a.mark((function t(){var a,n,r,o,i,c,l,s;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.logger.info("Starting uploading file stream:",e.task.file),t.next=3,H(null===(a=e.task.session)||void 0===a?void 0:a.uploadURLs[0],e.task.file,null===(n=e.task.session)||void 0===n?void 0:n.policy,null===(r=e.task.session)||void 0===r?void 0:r.path,null===(o=e.task.session)||void 0===o?void 0:o.callback,null===(i=e.task.session)||void 0===i?void 0:i.sessionID,null===(c=e.task.session)||void 0===c?void 0:c.keyTime,null===(l=e.task.session)||void 0===l?void 0:l.credential,null===(s=e.task.session)||void 0===s?void 0:s.ak,(function(t){e.subscriber.onProgress({total:e.getProgressInfoItem(t.loaded,t.total)})}),e.cancelToken.token);case 3:case"end":return t.stop()}}),t)}))),e}return Object(f.a)(a,[{key:"afterUpload",value:function(){var e=Object(p.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.transit(h.finishing),this.logger.info("Sending COS upload callback..."),e.prev=2,e.next=5,q(this.task.session.sessionID,this.cancelToken.token);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),this.logger.warn("Failed to finish COS upload:",e.t0);case 10:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(){return e.apply(this,arguments)}}()}]),a}($),se=function(e){Object(E.a)(a,e);var t=Object(v.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).upload=Object(p.a)(u.a.mark((function t(){var a,n,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.logger.info("Starting uploading file stream:",e.task.file),t.next=3,Y(null===(a=e.task.session)||void 0===a?void 0:a.uploadURLs[0],e.task.file,null===(n=e.task.session)||void 0===n?void 0:n.policy,null===(r=e.task.session)||void 0===r?void 0:r.credential,(function(t){e.subscriber.onProgress({total:e.getProgressInfoItem(t.loaded,t.total)})}),e.cancelToken.token);case 3:case"end":return t.stop()}}),t)}))),e}return Object(f.a)(a)}($),ue=function(e){Object(E.a)(a,e);var t=Object(v.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(f.a)(a,[{key:"uploadChunk",value:function(){var e=Object(p.a)(u.a.mark((function e(t){var a,n,r=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M(null===(a=this.task.session)||void 0===a?void 0:a.uploadURLs[t.index],t,(function(e){r.updateChunkProgress(e.loaded,t.index)}),this.cancelToken.token);case 2:n=e.sent,this.task.chunkProgress[t.index].etag=n;case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"afterUpload",value:function(){var e=Object(p.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.logger.info("Finishing multipart upload..."),this.transit(h.finishing),e.next=4,_(this.task.session.completeURL,!1,this.task.chunkProgress,this.cancelToken.token);case 4:return this.logger.info("Sending S3-like upload callback..."),e.abrupt("return",Z(this.task.session.sessionID,this.cancelToken.token));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),a}(te),pe=function(e){Object(E.a)(a,e);var t=Object(v.a)(a);function a(e,n){var r;return Object(m.a)(this,a),(r=t.call(this,e,n)).status=h.resumable,r.progress={total:r.getProgressInfoItem(y.q(r.task.chunkProgress),r.task.size+1)},r.subscriber.onProgress(r.progress),r}return Object(f.a)(a,[{key:"uploadChunk",value:function(){var e=Object(p.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),a}(te);!function(e){e[e.File=0]="File",e[e.Directory=1]="Directory"}(ee||(ee={}));var de=function(){function e(t){var a=this;Object(m.a)(this,e),this.o=t,this.logger=void 0,this.pool=void 0,this.policy=void 0,this.fileInput=void 0,this.directoryInput=void 0,this.id=++e.id,this.currentPath="/",this.changeConcurrentLimit=function(e){a.pool.limit=e},this.select=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ee.File;return new Promise((function(n){if(void 0==a.policy)throw a.logger.warn("Calling file selector while no policy is set"),new b.u(b.v.NoPolicySelected,"No policy selected.");a.fileInput.onchange=function(t){return a.fileSelectCallback(t,e,n)},a.directoryInput.onchange=function(t){return a.fileSelectCallback(t,e,n)},a.fileInput.value="",a.directoryInput.value="",t==ee.File?a.fileInput.click():a.directoryInput.click()}))},this.resumeTasks=function(){var e=Object(y.j)(a.logger);return e.length>0&&a.logger.info("Resumed ".concat(e.length," unfinished task(s) from local storage:"),e),e.filter((function(e){return e.chunkProgress.length>0&&e.chunkProgress[0].loaded>0})).map((function(e){return a.dispatchUploader(Object(d.a)(Object(d.a)({},e),{},{type:r.resumeHint}))}))},this.cleanupSessions=function(){Object(y.b)(a.logger)},this.fileSelectCallback=function(e,t,n){var o=[];if(e instanceof Event){var i=e.target;if(!e||!i||!i.files)return;i.files.length>0&&(o=Array.from(i.files))}else o=e;o.length>0&&n(o.map((function(e){return a.dispatchUploader({type:r.file,policy:a.policy,dst:Object(y.e)(t,e),file:e,size:e.size,name:e.name,chunkProgress:[],resumed:!1})})))},this.onFileDroppedIn=function(){var e=Object(p.a)(u.a.mark((function e(t){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.dataTransfer&&t.dataTransfer.types.includes("Files"))){e.next=11;break}return a.o.onDropLeave&&a.o.onDropLeave(t),e.next=5,Object(y.c)(t.dataTransfer.items);case 5:return n=e.sent,console.log(n),e.next=9,new Promise((function(e){return a.fileSelectCallback(n,a.currentPath,e)}));case 9:r=e.sent,a.o.onDropFileAdded&&a.o.onDropFileAdded(r);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.logger=new g(t.logLevel,"MANAGER"),this.logger.info("Initialized with log level: ".concat(t.logLevel)),this.pool=new ne.a(t.concurrentLimit),this.fileInput=Object(y.f)(this.id,!1),this.directoryInput=Object(y.f)(this.id,!0),t.dropZone&&(this.logger.info("Drag and drop container set to:",t.dropZone),t.dropZone.addEventListener("dragenter",(function(e){Object(y.i)(e)&&(e.preventDefault(),t.onDropOver&&t.onDropOver(e))})),t.dropZone.addEventListener("dragleave",(function(e){Object(y.i)(e)&&(e.preventDefault(),t.onDropLeave&&t.onDropLeave(e))})),t.dropZone.addEventListener("drop",this.onFileDroppedIn))}return Object(f.a)(e,[{key:"dispatchUploader",value:function(e){if(e.type==r.resumeHint)return new pe(e,this);switch(e.policy.type){case n.local:return new ae(e,this);case n.remote:return new re(e,this);case n.onedrive:return new oe(e,this);case n.oss:return new ie(e,this);case n.qiniu:return new ce(e,this);case n.cos:return new le(e,this);case n.upyun:return new se(e,this);case n.s3:return new ue(e,this);default:throw new b.t("Unknown policy type.",e.policy)}}},{key:"setPolicy",value:function(e,t){if(this.policy=e,this.currentPath=t,void 0!=e)if(this.logger.info("Switching policy to:",e),void 0!=e.allowedSuffix&&e.allowedSuffix.length>0){var a=e.allowedSuffix.map((function(e){return"."+e})).join(",");this.logger.info("Set allowed file suffix to ".concat(a)),this.fileInput.setAttribute("accept",a)}else this.logger.info("Set allowed file suffix to *"),this.fileInput.removeAttribute("accept");else this.logger.info("Currently no policy selected")}}]),e}();de.id=0;var me=a(5),fe=a(95),he=a(470),ge=a(7092),be=a(7093),Ee=a(7164),ve=a(7094),Oe=a(141),je=a.n(Oe),we=a(280),ke=a.n(we),ye=a(128),xe=a(18),Ce=a(472),Se=a(30),Ne=a(147),Te=a(2),Pe=a(111),Le=Object(fe.a)((function(){return{fab:{margin:0,top:"auto",right:20,bottom:20,left:"auto",zIndex:5,position:"fixed"},badge:{position:"absolute",bottom:26,top:"auto",zIndex:9999,right:7},"@global":{".MuiSpeedDialAction-staticTooltipLabel":{whiteSpace:"nowrap"}},fabProgress:{color:Ne.a[500],position:"absolute",bottom:-6,left:-6,zIndex:1},buttonSuccess:{backgroundColor:Ne.a[500],"&:hover":{backgroundColor:Ne.a[700]}}}}));function Fe(e){var t=Object(Pe.a)("application",{keyPrefix:"fileManager"}).t,a=Object(c.useState)(!1),n=Object(i.a)(a,2),r=n[0],o=n[1],s=Object(c.useState)(5),u=Object(i.a)(s,2),p=u[0],d=u[1],m=Object(me.e)((function(e){return e.navigator.path})),f=Le(),h=Object(me.d)(),g=(Object(c.useCallback)((function(e,t,a,n){return h(Object(Te.S)(e,t,a,n))}),[h]),Object(c.useCallback)((function(){return h(Object(Te.o)())}),[h])),b=Object(c.useCallback)((function(){return h(Object(Te.n)())}),[h]);Object(c.useEffect)((function(){d(e.Queued)}),[e.Queued]);var E=function(){r&&(0!==p?e.openFileList():e.selectFile(m))},v=Object(c.useMemo)((function(){if(e.progress.totalSize>0)return l.a.createElement(he.a,{key:1,size:68,variant:"determinate",value:e.progress.processedSize/e.progress.totalSize*100,className:f.fabProgress})}),[f,e.progress]);return l.a.createElement(ye.a,{enable:!0,hide:e.taskListOpen},l.a.createElement(ge.a,{badgeContent:p,classes:{badge:f.badge},className:f.fab,invisible:0===p,color:"primary"},l.a.createElement(Ce.a,{open:r&&xe.a.isMobile()}),l.a.createElement(be.a,{hidden:!1,tooltipTitle:t("uploadFiles"),icon:l.a.createElement(Ee.a,{openIcon:!xe.a.isMobile()&&l.a.createElement(ke.a,null)}),onClose:function(){o(!1)},FabProps:{onClick:function(){return!xe.a.isMobile()&&E()},color:"secondary"},onOpen:function(){o(!0)},open:r,ariaLabel:""},xe.a.isMobile()&&l.a.createElement(ve.a,{key:"UploadFile",icon:l.a.createElement(ke.a,null),tooltipOpen:!0,tooltipTitle:t("uploadFiles"),onClick:function(){return E()},title:t("uploadFiles")}),!xe.a.isMobile()&&l.a.createElement(ve.a,{key:"UploadFolder",icon:l.a.createElement(Se.o,null),tooltipOpen:!0,tooltipTitle:t("uploadFolder"),onClick:function(){return e.selectFile(m,ee.Directory)},title:t("uploadFolder")}),l.a.createElement(ve.a,{key:"NewFolder",icon:l.a.createElement(je.a,null),tooltipOpen:!0,tooltipTitle:t("newFolder"),onClick:function(){return g()},title:t("newFolder")}),l.a.createElement(ve.a,{key:"NewFile",icon:l.a.createElement(Se.j,null),tooltipOpen:!0,tooltipTitle:t("newFile"),onClick:function(){return b()},title:t("newFile")})),v))}var De=a(20),Ie=a(6),Re=a(7035),Me=a(285),Ae=a(478),_e=a(7103),Ue=a(7036),We=a(7037),ze=a(80),Be=a(53),Ge=a(54),He=a(7104),Ve=a(480),qe=a(46),Ke=a(7099),Ye=a(233),Je=a.n(Ye),Ze=a(400),Qe=a.n(Ze),Xe=a(399),$e=a.n(Xe),et=a(31),tt=a.n(et),at=a(90),nt=a(148),rt=a(62),ot=a(149),it=a(58);var ct=a(25),lt=a(107),st=a(7159),ut=a(105),pt=a.n(ut),dt=a(119),mt=a.n(dt),ft=a(7097),ht=a(194),gt=a.n(ht),bt=a(69),Et=a.n(bt),vt=a(474),Ot=a(476),jt=a(477),wt=a(7098),kt=a(103),yt=a(292),xt=Object(fe.a)((function(e){return{infoTitle:{fontWeight:700},infoValue:{color:e.palette.text.secondary,wordBreak:"break-all"}}}));function Ct(e){var t=e.uploader,a=e.navigateToDst,n=e.error,r=Object(Pe.a)().t,o=xt(),i=[{name:r("uploader.fileName"),value:t.task.name},{name:r("uploader.fileSize"),value:"".concat(Object(ct.r)(t.task.size)," ").concat(t.task.session&&t.task.session.chunkSize>0?r("uploader.chunkDescription",{total:t.task.chunkProgress.length,size:Object(ct.r)(t.task.session.chunkSize)}):r("uploader.noChunks"))},{name:r("fileManager.storagePolicy"),value:t.task.policy.name},{name:r("uploader.destination"),value:l.a.createElement(ft.a,{href:"javascript:void",onClick:function(){return a(t.task.dst)}},"/"===t.task.dst?r("uploader.rootFolder"):t.task.dst)},t.task.session?{name:r("uploader.uploadSession"),value:l.a.createElement(l.a.Fragment,null,l.a.createElement(yt.a,{i18nKey:"uploader.sessionExpiredIn",components:[l.a.createElement(kt.a,{key:0,datetime:t.task.session?1e3*t.task.session.expires:0,locale:r("timeAgoLocaleCode",{ns:"common"})})]}))}:null,t.status===h.error?{name:r("uploader.errorDetails"),value:n}:null];return l.a.createElement(wt.a,{container:!0},i.map((function(e){return l.a.createElement(l.a.Fragment,null,e&&l.a.createElement(wt.a,{key:e.name,container:!0,xs:12},l.a.createElement(wt.a,{item:!0,xs:3,className:o.infoTitle},e.name),l.a.createElement(wt.a,{item:!0,xs:9,className:o.infoValue},e.value)))})))}var St=Object(fe.a)((function(e){return{progressContent:{position:"relative",zIndex:9},progress:{transition:"width .4s linear",zIndex:1,height:"100%",position:"absolute",left:0,top:0},progressContainer:{position:"relative"},listAction:{marginLeft:20,marginRight:20},wordBreak:{wordBreak:"break-all",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},successStatus:{color:e.palette.success.main},errorStatus:Object(Ie.a)({color:e.palette.warning.main,wordBreak:"break-all"},e.breakpoints.up("sm"),{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}),disabledBadge:{marginLeft:e.spacing(1),height:18},delete:{zIndex:9},dstLink:{color:e.palette.success.main,fontWeight:600},fileNameContainer:{display:"flex",alignItems:"center"}}})),Nt=Et()({root:{maxWidth:"100%",boxShadow:"none","&:not(:last-child)":{borderBottom:0},"&:before":{display:"none"},"&$expanded":{margin:0}},expanded:{}})(vt.a),Tt=Et()({root:{minHeight:0,padding:0,display:"block","&$expanded":{}},content:{margin:0,display:"block","&$expanded":{margin:"0"}},expanded:{}})(Ot.a),Pt=Et()((function(e){return{root:{paddingLeft:16,paddingRight:16,paddingTop:8,paddingBottom:8,display:"block",backgroundColor:e.palette.background.default}}}))(jt.a),Lt=function(e,t,a){var n=t;return a||(n=e),"".concat(Object(ct.r)(n||0)," /s")},Ft=function(e){var t=e.message;return e instanceof b.u&&(t=e.Message("")),t};function Dt(e){var t=e.uploader,a=e.useAvgSpeed,n=e.onCancel,r=e.onClose,o=e.selectFile,s=e.onRefresh,u=Object(Pe.a)("application",{keyPrefix:"uploader"}).t,p=St(),d=Object(qe.a)(),m=Object(c.useState)(!1),f=Object(i.a)(m,2),g=f[0],b=f[1],E=Object(c.useState)(!1),v=Object(i.a)(E,2),O=v[0],j=v[1],w=function(e){var t=Object(c.useRef)(0),a=Object(c.useState)(e.status),n=Object(i.a)(a,2),r=n[0],o=n[1],s=Object(c.useState)(e.error),u=Object(i.a)(s,2),p=u[0],d=u[1],m=Object(c.useState)(e.progress),f=Object(i.a)(m,2),h=f[0],g=f[1],b=Object(me.d)(),E=Object(c.useCallback)((function(e,t,a,n){return b(Object(Te.S)(e,t,a,n))}),[b]);Object(c.useEffect)((function(){e.subscribe({onTransition:function(e){o(e)},onError:function(t){d(t),o(e.status)},onProgress:function(e){g(e)},onMsg:function(e,t){E("top","right",e,t)}})}),[]);var v=l.a.useMemo((function(){if(null==h||null==h.total||null==h.total.loaded)return[0,0];var a=(Date.now()-(e.lastTime||0))/1e3,n=(Date.now()-(e.startTime||0))/1e3,r=h.total.loaded>t.current?Math.floor((h.total.loaded-t.current)/a):0,o=h.total.loaded>0?Math.floor(h.total.loaded/n):0;return t.current=h.total.loaded,e.lastTime=Date.now(),[r,o]}),[h]),O=Object(i.a)(v,2),j=O[0],w=O[1];return{status:r,error:p,progress:h,speed:j,speedAvg:w,retry:function(){e.reset(),e.start()}}}(t),k=w.status,y=w.error,x=w.progress,C=w.speed,S=w.speedAvg,N=w.retry,T=Object(Ke.a)(d.breakpoints.down("sm")),P=Object(c.useState)(!1),L=Object(i.a)(P,2),F=L[0],D=L[1],I=Object(me.d)(),R=Object(c.useCallback)((function(e){return I(Object(Te.j)(e))}),[I]),M=function(e){r(null,"backdropClick"),R(e)};Object(c.useEffect)((function(){k>=h.finished&&s()}),[k]);var A=Object(c.useMemo)((function(){var e=Object(ct.g)(t.task.dst);switch(k){case h.added:case h.initialized:case h.queued:return l.a.createElement("div",null,u("pendingInQueue"));case h.preparing:return l.a.createElement("div",null,u("preparing"));case h.error:return l.a.createElement("div",{className:p.errorStatus},Ft(y),l.a.createElement("br",null));case h.finishing:return l.a.createElement("div",null,u("processing"));case h.resumable:return l.a.createElement("div",null,u("progressDescription",{uploaded:Object(ct.r)(x.total.loaded),total:Object(ct.r)(x.total.size),percentage:x.total.percent.toFixed(2)}));case h.processing:return x?l.a.createElement("div",null,u("progressDescriptionFull",{speed:Lt(C,S,a),uploaded:Object(ct.r)(x.total.loaded),total:Object(ct.r)(x.total.size),percentage:x.total.percent.toFixed(2)})):l.a.createElement("div",null,u("progressDescriptionPlaceHolder"));case h.finished:return l.a.createElement("div",{className:p.successStatus},u("uploadedTo"),l.a.createElement(ze.a,{title:t.task.dst},l.a.createElement(ft.a,{className:p.dstLink,href:"javascript:void",onClick:function(){return M(t.task.dst)}},""===e?u("rootFolder"):e)),l.a.createElement("br",null));default:return l.a.createElement("div",null,u("unknownStatus"))}}),[k,y,x,C,S,a]),_=Object(c.useMemo)((function(){return t.task.resumed&&!T?l.a.createElement(st.a,{className:p.disabledBadge,size:"small",label:u("resumed")}):null}),[k,T]),U=Object(c.useMemo)((function(){return k!==h.resumable||T?null:l.a.createElement(st.a,{className:p.disabledBadge,size:"small",color:"secondary",label:u("resumable")})}),[k,T]),W=Object(c.useMemo)((function(){return k!==h.processing&&k!==h.finishing&&k!==h.resumable||!x?null:l.a.createElement("div",{style:{backgroundColor:"light"===d.palette.type?Object(lt.lighten)(d.palette.primary.main,.8):Object(lt.darken)(d.palette.background.paper,.2),width:x.total.percent+"%"},className:p.progress})}),[k,x,d]),z=Object(c.useMemo)((function(){return l.a.createElement(Ct,{error:y&&Ft(y),navigateToDst:M,uploader:t})}),[t,O]),B=function(){D(!0),t.cancel().then((function(){D(!1),n((function(e){return e.id!=t.id}))}))},G=function(e){e.stopPropagation()},H=Object(c.useMemo)((function(){if(!g&&!T)return l.a.createElement(l.a.Fragment,null);var e=[{show:k===h.error,title:u("retry"),click:N,icon:l.a.createElement(mt.a,null),loading:!1},{show:!0,title:k===h.finished?u("deleteTask"):u("cancelAndDelete"),click:B,icon:l.a.createElement(pt.a,null),loading:F},{show:k===h.resumable,title:u("selectAndResume"),click:function(){return o(t.task.dst,ee.File,t)},icon:l.a.createElement(gt.a,null),loading:!1}];return l.a.createElement(l.a.Fragment,null,e.map((function(e){return l.a.createElement(l.a.Fragment,null,e.show&&l.a.createElement(at.a,{in:e.show},l.a.createElement(ze.a,{title:e.title},l.a.createElement(Be.a,{onMouseDown:G,onTouchStart:G,disabled:e.loading,onClick:function(t){t.stopPropagation(),e.click()}},e.icon))))})))}),[k,F,g,T,t]),V=Object(c.useMemo)((function(){if(!T)return l.a.createElement(it.a,{fileName:t.task.name,isUpload:!0})}),[t,T]);return l.a.createElement(l.a.Fragment,null,l.a.createElement(Nt,{square:!0,expanded:O,onChange:function(e,t){j(!!t)}},l.a.createElement(Tt,{"aria-controls":"panel1d-content",id:"panel1d-header"},l.a.createElement("div",{className:p.progressContainer,onMouseLeave:function(){return b(!1)},onMouseOver:function(){return b(!0)}},W,l.a.createElement(nt.a,{className:p.progressContent,button:!0},V,l.a.createElement(rt.a,{className:p.listAction,primary:l.a.createElement("div",{className:p.fileNameContainer},l.a.createElement("div",{className:p.wordBreak},t.task.name),l.a.createElement("div",null,_),l.a.createElement("div",null,U)),secondary:l.a.createElement("div",{className:p.wordBreak},A)}),H))),l.a.createElement(Pt,null,z)),l.a.createElement(ot.a,null))}var It=a(7038),Rt=a(7100),Mt=a(253),At=a(74),_t=a(64),Ut=a(12),Wt=a(109),zt=a.n(Wt),Bt=a(479),Gt=a(481),Ht=a(287),Vt=a(482),qt=a(254),Kt=a(170),Yt=a(19),Jt=Object(fe.a)((function(e){return{}}));function Zt(e){var t=e.open,a=e.onClose,n=e.onSave,r=Object(Pe.a)().t,o=Object(c.useState)(Yt.a.GetPreferenceWithDefault("concurrent_limit","5")),s=Object(i.a)(o,2),u=s[0],p=s[1],d=Jt();return l.a.createElement(Ae.a,{fullWidth:!0,maxWidth:"xs",open:t,onClose:a,"aria-labelledby":"form-dialog-title"},l.a.createElement(Bt.a,{id:"form-dialog-title"},r("uploader.setConcurrent")),l.a.createElement(Ve.a,null,l.a.createElement(Kt.a,{fullWidth:!0},l.a.createElement(Gt.a,{htmlFor:"component-helper"},r("uploader.concurrentTaskNumber")),l.a.createElement(Ht.a,{type:"number",inputProps:{min:1,step:1,max:20},value:u,onChange:function(e){return p(e.target.value)}}))),l.a.createElement(Vt.a,null,l.a.createElement(qt.a,{onClick:a},r("cancel",{ns:"common"})),l.a.createElement("div",{className:d.wrapper},l.a.createElement(qt.a,{color:"primary",disabled:""===u,onClick:function(){return n(u)}},r("ok",{ns:"common"})))))}var Qt=a(7101),Xt=a(7102),$t=Object(fe.a)((function(e){return{icon:{minWidth:38}}}));function ea(e){var t=e.anchorEl,a=e.onClose,n=e.uploadManager,o=e.deleteTask,s=e.useAvgSpeed,u=e.setUseAvgSpeed,p=e.filter,d=e.setFilter,m=e.sorter,f=e.setSorter,h=e.cleanFinished,g=e.retryFailed,b=Object(Pe.a)("application",{keyPrefix:"uploader"}).t,E=$t(),v=Object(me.d)(),O=Object(c.useState)(!1),j=Object(i.a)(O,2),w=j[0],k=j[1],y=Object(c.useCallback)((function(e,t,a,n){return v(Object(Te.S)(e,t,a,n))}),[v]),x=Object(c.useCallback)((function(){return v(Object(Te.D)())}),[v]),C=Boolean(t),S=C?"uploader-action-popover":void 0,N=Object(c.useMemo)((function(){return[{tooltip:b("hideCompletedTooltip"),onClick:function(){return d("default"===p?"ongoing":"default")},icon:"default"!==p?l.a.createElement(zt.a,null):l.a.createElement(Rt.a,null),text:b("hideCompleted"),divider:!0},{tooltip:b("addTimeAscTooltip"),onClick:function(){return f("default")},icon:"default"===m?l.a.createElement(zt.a,null):l.a.createElement(Rt.a,null),text:b("addTimeAsc"),divider:!1},{tooltip:b("addTimeDescTooltip"),onClick:function(){return f("reverse")},icon:"reverse"===m?l.a.createElement(zt.a,null):l.a.createElement(Rt.a,null),text:b("addTimeDesc"),divider:!0},{tooltip:b("showInstantSpeedTooltip"),onClick:function(){return u(!1)},icon:s?l.a.createElement(Rt.a,null):l.a.createElement(zt.a,null),text:b("showInstantSpeed"),divider:!1},{tooltip:b("showAvgSpeedTooltip"),onClick:function(){return u(!0)},icon:s?l.a.createElement(zt.a,null):l.a.createElement(Rt.a,null),text:b("showAvgSpeed"),divider:!0},{tooltip:b("cleanAllSessionTooltip"),onClick:function(){return n.cleanupSessions(),void Ut.c.delete("/file/upload").then((function(e){0===e.rawData.code?y("top","right",b("uploadSessionCleaned"),"success"):y("top","right",e.rawData.msg,"warning"),o((function(e){return e.task.type!==r.resumeHint})),x()})).catch((function(e){y("top","right",e.message,"error")}))},icon:l.a.createElement(Se.g,null),text:b("cleanAllSession"),divider:!1},{tooltip:b("cleanCompletedTooltip"),onClick:function(){return h()},icon:l.a.createElement(pt.a,null),text:b("cleanCompleted"),divider:!1},{tooltip:b("retryFailedTasksTooltip"),onClick:function(){return g()},icon:l.a.createElement(Qt.a,null),text:b("retryFailedTasks"),divider:!0},{tooltip:b("setConcurrentTooltip"),onClick:function(){return k(!0)},icon:l.a.createElement(Xt.a,null),text:b("setConcurrent"),divider:!1}]}),[s,u,m,f,p,d,h]);return l.a.createElement(l.a.Fragment,null,l.a.createElement(Mt.a,{id:S,open:C,anchorEl:t,onClose:a},N.map((function(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement(ze.a,{enterNextDelay:500,key:e.text,title:e.tooltip},l.a.createElement(At.a,{dense:!0,onClick:(t=e.onClick,function(){a(),t()})},l.a.createElement(_t.a,{className:E.icon},e.icon),e.text)),e.divider&&l.a.createElement(ot.a,null));var t}))),l.a.createElement(Zt,{open:w,onClose:function(){return k(!1)},onSave:function(e){(e=parseInt(e))>0&&(Yt.a.SetPreference("concurrent_limit",e),n.changeConcurrentLimit(parseInt(e))),k(!1)}}))}var ta=a(132),aa=a(72),na=l.a.forwardRef((function(e,t){return l.a.createElement(Re.a,Object.assign({direction:"up",ref:t},e))})),ra=Object(fe.a)((function(e){var t;return{rootOverwrite:{top:"auto!important",left:"auto!important"},appBar:{position:"relative"},flex:{flex:1},popup:{alignItems:"flex-end",justifyContent:"flex-end"},dialog:{margin:0,right:10,bottom:10,zIndex:9999,position:"fixed",inset:"-1!important"},paddingZero:{padding:0},dialogContent:(t={},Object(Ie.a)(t,e.breakpoints.up("md"),{width:500,minHeight:300,maxHeight:"calc(100vh - 140px)"}),Object(Ie.a)(t,"padding",0),Object(Ie.a)(t,"paddingTop","0!important"),t),virtualList:Object(Ie.a)({height:"100%",maxHeight:"calc(100vh - 56px)"},e.breakpoints.up("md"),{minHeight:300,maxHeight:"calc(100vh - 140px)"}),expandIcon:{transform:"rotate(0deg)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandIconExpanded:{transform:"rotate(180deg)"},toolbar:{paddingLeft:e.spacing(1),paddingRight:e.spacing(1)},progress:{transition:"width .4s linear",zIndex:-1,height:"100%",position:"absolute",left:0,top:0}}})),oa={default:function(e,t){return e.id-t.id},reverse:function(e,t){return t.id-e.id}},ia={default:function(e){return!0},ongoing:function(e){return e.status<h.finished}};function ca(e){var t,a=e.open,n=e.onClose,r=e.selectFile,o=e.taskList,s=e.onCancel,u=e.uploadManager,p=e.progress,d=e.setUploaders,m=Object(Pe.a)("application",{keyPrefix:"uploader"}).t,f=ra(),g=Object(qe.a)(),b=Object(Ke.a)(g.breakpoints.down("sm")),E=Object(me.e)((function(e){return e.navigator.path})),v=Object(c.useState)(!0),O=Object(i.a)(v,2),j=O[0],w=O[1],k=Object(c.useState)(Yt.a.GetPreferenceWithDefault("use_avg_speed",!0)),y=Object(i.a)(k,2),x=y[0],C=y[1],S=Object(c.useState)(null),N=Object(i.a)(S,2),T=N[0],P=N[1],L=Object(c.useState)(Yt.a.GetPreferenceWithDefault("task_filter","default")),F=Object(i.a)(L,2),D=F[0],I=F[1],R=Object(c.useState)(Yt.a.GetPreferenceWithDefault("task_sorter","default")),M=Object(i.a)(R,2),A=M[0],_=M[1],U=Object(c.useState)(!1),W=Object(i.a)(U,2),z=W[0],B=W[1],G=function(e,t){"backdropClick"!==t?n():w(!1)};Object(c.useMemo)((function(){a&&w(!0)}),[o]);var H=Object(c.useMemo)((function(){return p.totalSize>0?l.a.createElement(Me.a,{in:p.totalSize>0&&!j},l.a.createElement("div",null,l.a.createElement("div",{style:{backgroundColor:(g.palette.type,Object(lt.lighten)(g.palette.primary.main,.2)),width:p.processedSize/p.totalSize*100+"%"},className:f.progress}))):null}),[p,j,f,g]),V=Object(c.useMemo)((function(){var e=o.filter(ia[D]).sort(oa[A]);return 0===e.length?l.a.createElement(aa.a,{size:.5,top:63,primary:m("taskListEmpty")}):l.a.createElement(ta.b,{style:{height:(b?500:73)*e.length},className:f.virtualList,increaseViewportBy:180,data:e,itemContent:function(e,t){return l.a.createElement(Dt,{selectFile:r,onClose:G,onCancel:s,key:t.id,useAvgSpeed:x,uploader:t,filter:ia[D],onRefresh:function(){return B((function(e){return!e}))}})}})}),[f,o,x,b,D,A,z]);return l.a.createElement(l.a.Fragment,null,l.a.createElement(ea,{deleteTask:s,onClose:function(){P(null)},uploadManager:u,anchorEl:T,useAvgSpeed:x,setUseAvgSpeed:function(e){Yt.a.SetPreference("use_avg_speed",e),C(e)},filter:D,sorter:A,setFilter:function(e){Yt.a.SetPreference("task_filter",e),I(e)},setSorter:function(e){Yt.a.SetPreference("task_sorter",e),_(e)},retryFailed:function(){o.forEach((function(e){e.status===h.error&&(e.reset(),e.start())}))},cleanFinished:function(){return d((function(e){return e.filter(ia.ongoing)}))}}),l.a.createElement(Ae.a,{classes:{container:f.popup,root:tt()(Object(Ie.a)({},f.rootOverwrite,!b))},className:tt()(Object(Ie.a)({},f.dialog,!b)),fullScreen:b,open:a,onClose:G,TransitionComponent:na,disableEnforceFocus:!j,hideBackdrop:!j,disableBackdropClick:!j,disableScrollLock:!j},l.a.createElement(_e.a,{expanded:j||b,onChange:function(e,t){w(t)}},l.a.createElement(Ue.a,{className:f.appBar},H,l.a.createElement(We.a,{disableGutters:!0,className:f.toolbar},l.a.createElement(ze.a,{title:m("hideTaskList")},l.a.createElement(Be.a,{color:"inherit",onClick:G,"aria-label":"Close"},l.a.createElement(Je.a,null))),l.a.createElement(Ge.a,{variant:"h6",color:"inherit",className:f.flex},m("uploadTasks")),l.a.createElement(ze.a,{title:m("moreActions")},l.a.createElement(Be.a,{color:"inherit",onClick:function(e){P(e.currentTarget)}},l.a.createElement(It.a,null))),l.a.createElement(ze.a,{title:m("addNewFiles")},l.a.createElement(Be.a,{color:"inherit",onClick:function(){return r(E)}},l.a.createElement($e.a,null))),!b&&l.a.createElement(ze.a,{title:m("toggleTaskList")},l.a.createElement(Be.a,{color:"inherit",onClick:function(){return w(!j)}},l.a.createElement(Qe.a,{className:tt()((t={},Object(Ie.a)(t,f.expandIconExpanded,j),Object(Ie.a)(t,f.expandIcon,!0),t))}))))),l.a.createElement(He.a,{className:f.paddingZero},l.a.createElement(Ve.a,{className:f.dialogContent},V)))))}var la=a(373),sa=a(134),ua=a.n(sa),pa=Object(fe.a)((function(e){return Object(la.a)({backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff",flexDirection:"column"}})}));function da(e){var t=e.open,a=pa(),n=Object(Pe.a)().t;return l.a.createElement(Ce.a,{className:a.backdrop,open:t},l.a.createElement("div",null,l.a.createElement(ua.a,{style:{fontSize:80}})),l.a.createElement("div",null,l.a.createElement(Ge.a,{variant:"h4"},n("uploader.dropFileHere"))))}a.d(t,"a",(function(){return ha}));var ma=null,fa=-1;function ha(){var e=Object(Pe.a)("application",{keyPrefix:"uploader"}).t,t=Object(c.useState)([]),a=Object(i.a)(t,2),n=a[0],r=a[1],s=Object(c.useState)(!1),u=Object(i.a)(s,2),p=u[0],d=u[1],m=Object(c.useState)(0),f=Object(i.a)(m,2),g=f[0],E=f[1],v=Object(c.useState)({totalSize:0,processedSize:0,total:0,processed:0}),O=Object(i.a)(v,2),j=O[0],w=O[1],k=Object(me.e)((function(e){return e.explorer.search})),y=Object(me.e)((function(e){return e.explorer.currentPolicy})),x=Object(me.e)((function(e){return e.viewUpdate.isLogin})),C=Object(me.e)((function(e){return e.navigator.path})),S=Object(me.e)((function(e){return e.viewUpdate.openFileSelector})),N=Object(me.e)((function(e){return e.viewUpdate.openFolderSelector})),T=Object(De.h)(),P=Object(me.d)(),L=Object(c.useCallback)((function(e,t,a,n){return P(Object(Te.S)(e,t,a,n))}),[P]),F=Object(c.useCallback)((function(){return P(Object(Te.C)())}),[P]),D=Object(c.useCallback)((function(){return P(Object(Te.D)())}),[P]),I=Object(c.useMemo)((function(){return xe.a.isHomePage(T.pathname)&&x&&!k}),[T.pathname,x,k]),R=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return function(a){null===t||1===a.length&&a[0].key()===t.key()?(a.forEach((function(e){return e.start()})),d(!0),r((function(e){return null!==t&&(e=e.filter((function(e){return e.key()!==t.key()}))),[].concat(Object(o.a)(e),Object(o.a)(a))}))):L("top","right",e("fileNotMatchError"),"warning")}},M=Object(c.useMemo)((function(){return new de({logLevel:"INFO",concurrentLimit:parseInt(Yt.a.GetPreferenceWithDefault("concurrent_limit","5")),dropZone:document.querySelector("body"),onToast:function(e,t){L("top","right",t,e)},onDropOver:function(e){E((function(e){return!e}))},onDropLeave:function(e){E((function(e){return!e}))},onDropFileAdded:R()})}),[]);Object(c.useEffect)((function(){M.setPolicy(y,C)}),[y]),Object(c.useEffect)((function(){var e=M.resumeTasks();r((function(t){return[].concat(Object(o.a)(t),Object(o.a)(e))})),ma||(ma=setInterval((function(){var e={totalSize:0,processedSize:0,total:0,processed:0};r((function(t){return t.forEach((function(t){t.id<=fa||(e.totalSize+=t.task.size,e.total+=1,t.status!==h.finished&&t.status!==h.canceled&&t.status!==h.error||(e.processedSize+=t.task.size,e.processed+=1),t.status!==h.added&&t.status!==h.initialized&&t.status!==h.queued&&t.status!==h.preparing&&t.status!==h.processing&&t.status!==h.finishing||(e.processedSize+=t.progress?t.progress.total.loaded:0))})),e.total>0&&e.processed===e.total&&(fa=t[t.length-1].id),t})),e.total>0&&e.total===e.processed&&(F(),D()),w(e)}),2e3))}),[]);var A=function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ee.File,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;d(!0),M.select(t,a).then(R(n)).catch((function(t){t instanceof b.u?L("top","right",t.Message(),"warning"):L("top","right",e("unknownError",{msg:t.message}),"error")}))};Object(c.useEffect)((function(){S>0&&A(C)}),[S]),Object(c.useEffect)((function(){N>0&&A(C,ee.Directory)}),[N]);return l.a.createElement(l.a.Fragment,null,I&&l.a.createElement(l.a.Fragment,null,l.a.createElement(da,{open:g>0}),l.a.createElement(Fe,{progress:j,taskListOpen:p,selectFile:A,Queued:n.length,openFileList:function(){return d(!0)}}),l.a.createElement(ca,{progress:j,uploadManager:M,taskList:n,open:p,onCancel:function(e){r((function(t){return t.filter(e)}))},selectFile:A,onClose:function(){return d(!1)},setUploaders:r})))}},49:function(e,t,a){"use strict";a.d(t,"g",(function(){return r})),a.d(t,"m",(function(){return i})),a.d(t,"a",(function(){return c})),a.d(t,"n",(function(){return l})),a.d(t,"b",(function(){return d})),a.d(t,"k",(function(){return m})),a.d(t,"i",(function(){return f})),a.d(t,"j",(function(){return h})),a.d(t,"h",(function(){return g})),a.d(t,"c",(function(){return b})),a.d(t,"e",(function(){return j})),a.d(t,"f",(function(){return w})),a.d(t,"d",(function(){return k})),a.d(t,"l",(function(){return y}));var n=a(21),r=["bmp","png","gif","jpg","jpeg","svg","webp"],o=["ppt","pptx","pps","doc","docx","xlsx","xls"],i=["ass","srt","vrr"],c=["mp3","ogg","wav","flac","m4a"],l=["mp4","mkv","webm","avi","m3u8","mov"],s=["pdf"],u=["md","txt"],p=["epub"],d={json:"json",php:"php",py:"python",bat:"bat",cpp:"cpp",c:"cpp",h:"cpp",cs:"csharp",css:"css",dockerfile:"dockerfile",go:"go",html:"html",ini:"ini",java:"java",js:"javascript",jsx:"javascript",less:"less",lua:"lua",sh:"shell",sql:"sql",xml:"xml",yaml:"yaml"},m={audio:["mp3","flac","ape","wav","acc","ogg","m4a"],video:["mp4","flv","avi","wmv","mkv","rm","rmvb","mov","ogv"],image:["bmp","iff","png","gif","jpg","jpeg","psd","svg","webp","heif","heic","tiff","avif"],pdf:["pdf"],word:["doc","docx"],ppt:["ppt","pptx"],excel:["xls","xlsx","csv"],text:["txt","md","html"],torrent:["torrent"],zip:["zip","gz","xz","tar","rar","7z"],excute:["exe"],android:["apk"],php:["php"],go:["go"],python:["py"],cpp:["cpp"],c:["c"],js:["js","jsx"],epub:p},f=function(e){var t=e.split(".").pop().toLowerCase();return-1!==r.indexOf(t)?"img":-1!==o.indexOf(t)?"msDoc":-1!==c.indexOf(t)?"audio":-1!==l.indexOf(t)?"video":-1!==u.indexOf(t)?"edit":-1!==s.indexOf(t)?"pdf":-1!==Object.keys(d).indexOf(t)?"code":-1!==p.indexOf(t)&&"epub"},h=function(e){var t=e.split(".").pop().toLowerCase();return-1!==m.torrent.indexOf(t)},g=function(e){var t=e.split(".").pop().toLowerCase();return"7z"!==t&&-1!==m.zip.indexOf(t)},b=function(e){return"zip"===e.split(".").pop().toLowerCase()},E=["setting.queueing","setting.processing","setting.failed","setting.canceled","setting.finished"],v=["fileManager.compress","fileManager.decompress","setting.fileTransfer","setting.importFiles","setting.fileRecycle"],O=["setting.waiting","setting.compressing","setting.decompressing","setting.downloading","setting.transferring","setting.indexing","setting.listing"],j=function(e){return n.a.t(E[e])},w=function(e){return n.a.t(v[e])},k=function(e,t){return 2===e?n.a.t("setting.transferProgress",{num:t}):n.a.t(O[t])},y=function(e){o=e}},52:function(e,t,a){"use strict";a.d(t,"c",(function(){return u})),a.d(t,"b",(function(){return p})),a.d(t,"g",(function(){return d})),a.d(t,"d",(function(){return m})),a.d(t,"e",(function(){return f})),a.d(t,"h",(function(){return h})),a.d(t,"i",(function(){return g})),a.d(t,"a",(function(){return b})),a.d(t,"f",(function(){return E}));var n=a(11),r=a.n(n),o=a(23),i=a(10),c=a(19),l=a(165),s=a(21),u=function(){return{type:"CLOSE_CONTEXT_MENU"}},p=function(e){return function(t,a){var n=a();document.title=null===e||void 0===e?n.siteConfig.title:e+" - "+n.siteConfig.title,t(function(e){return{type:"SET_SUBTITLE",title:e}}(e))}},d=function(e){return{type:"SET_OPTION_MODAL",option:e}},m=function(){return{type:"OPEN_FILE_SELECTOR"}},f=function(){return{type:"OPEN_FOLDER_SELECTOR"}},h=function(e){return{type:"SET_PAGINATION",pagination:e}},g=function(e){return{type:"SET_SHARE_INFO",shareInfo:e}},b=function(e){return function(t,a){var n=a(),r=n.explorer,o=r.dirList,l=r.fileList,s=n.viewUpdate.pagination,u=o.length+l.length,p=s.page;s.page*e>u?p=Math.max(Math.ceil(u/e),1):-1===e&&(p=1),c.a.SetPreference("pagination",e),t(h(Object(i.a)(Object(i.a)({},s),{},{size:e,page:p})))}},E=function(){return function(){var e=Object(o.a)(r.a.mark((function e(t,a){var n,o,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o="",e.prev=1,i=s.b.map((function(e){return{key:e.code,name:e.displayName}})),e.next=5,t(Object(l.a)(i,s.a.t("setting.language")));case 5:n=e.sent,e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(1),console.log(e.t0),e.abrupt("return");case 12:return o=n.key,e.next=15,s.a.changeLanguage(o);case 15:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,a){return e.apply(this,arguments)}}()}},56:function(e,t,a){"use strict";a.d(t,"c",(function(){return m})),a.d(t,"b",(function(){return f})),a.d(t,"a",(function(){return h})),a.d(t,"d",(function(){return g}));var n=a(197),r=a.n(n),o=a(435),i=a.n(o),c=a(436),l=a.n(c),s=a(19),u=a(21);r.a.extend(l.a),r.a.extend(i.a);var p="";try{p=Intl.DateTimeFormat().resolvedOptions().timeZone}catch(b){console.log(b)}p&&"Etc/Unknown"!=p||(p="Asia/Shanghai");var d=s.a.GetPreference("timeZone"),m=d||p;function f(){m=(m=s.a.GetPreference("timeZone"))||p}function h(e){return u.a.t("intlDateTime",{ns:"common",val:r()(e).tz(m).toDate(),formatParams:{val:{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}}})}function g(e){try{r()().tz(e).format()}catch(b){return!1}return!0}},58:function(e,t,a){"use strict";var n,r=a(0),o=a.n(r),i=a(49),c=a(395),l=a.n(c),s=a(394),u=a.n(s),p=a(393),d=a.n(p),m=a(396),f=a.n(m),h=a(30),g=a(228),b=a.n(g),E=a(29),v=a(397),O=a.n(v),j=a(256),w=a(7030),k={audio:{color:"#651fff",icon:d.a},video:{color:"#d50000",icon:u.a},image:{color:"#d32f2f",icon:l.a},pdf:{color:"#f44336",icon:f.a},word:{color:"#538ce5",icon:h.l},ppt:{color:"rgb(239, 99, 63)",icon:h.k},excel:{color:"#4caf50",icon:h.i},text:{color:"#607d8b",icon:h.K},torrent:{color:"#5c6bc0",icon:h.E},zip:{color:"#f9a825",icon:h.R},excute:{color:"#1a237e",icon:h.Q},android:{color:"#8bc34a",icon:h.d},file:{color:"#607d8b",icon:b.a},php:{color:"#777bb3",icon:h.B},go:{color:"#16b3da",icon:h.z},python:{color:"#3776ab",icon:h.C},c:{color:"#a8b9cc",icon:h.x},cpp:{color:"#004482",icon:h.y},js:{color:"#f4d003",icon:h.A},epub:{color:"#81b315",icon:w.a}};t.a=function(e){var t=O()(),a=e.fileName.split(".").pop().toLowerCase(),r="file";Object.keys(i.k).forEach((function(e){-1!==i.k[e].indexOf(a)&&(r=e)}));var c=k[r].icon;return n=function(e,t){return"light"===e.palette.type?t:Object(E.i)(t,.2)}(t,k[r].color),e.getColorValue&&e.getColorValue(n),o.a.createElement(o.a.Fragment,null,e.isUpload&&o.a.createElement(j.a,{className:e.className,style:{backgroundColor:n}},o.a.createElement(c,{className:e.iconClassName,style:{color:t.palette.background.paper}})),!e.isUpload&&o.a.createElement(c,{className:e.className,style:{color:n}}))}},6965:function(e,t,a){e.exports=a(7027)},7027:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(43),i=a.n(o);function c(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var l=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var s=a(20),u=a(5),p=a(145),d=a(463),m=a(10),f=a(126),h=a(19),g=["children"];var b=function(e){var t=e.children,a=Object(f.a)(e,g);return r.a.createElement(s.b,Object.assign({},a,{render:function(e){var n=e.location;return h.a.Check(a.isLogin)?t:r.a.createElement(s.a,{to:{pathname:"/login",state:{from:n}}})}}))},E=["children"];var v=function(e){var t=e.children,a=Object(f.a)(e,E);return r.a.createElement(s.b,Object.assign({},a,{render:function(e){var n=e.location;return h.a.Check(a.isLogin)?r.a.createElement(s.a,{to:{pathname:"/home",state:{from:n}}}):t}}))},O=a(386),j=a(7099),w=a(374),k=a(156),y=a(29),x=a(95),C=a(7096),S=a(7152),N=a(25),T=a(424),P=a.n(T),L=Object(x.a)((function(e){return{icon:{fontSize:"160px"},emptyContainer:{bottom:"0",height:"300px",margin:"50px auto",width:"300px",color:Object(y.i)(e.palette.text.disabled,.4),textAlign:"center",paddingTop:"20px"},emptyInfoBig:{fontSize:"25px",color:Object(y.i)(e.palette.text.disabled,.4)}}}));function F(e){var t=L();return r.a.createElement("div",{className:t.emptyContainer},r.a.createElement(P.a,{className:t.icon}),r.a.createElement("div",{className:t.emptyInfoBig},e.msg))}var D=a(9),I=a(6),R=a(427),M=a.n(R),A=a(99),_=a(256),U=a(54),W=a(170),z=a(7047),B=a(254),G=a(149),H=a(7097),V=a(48),q=a(12),K=a(7106),Y=a(7107),J=a(7108),Z=a(7109),Q=a(162),X=a.n(Q),$=a(288),ee=a(106),te=function(){return r.a.createElement(ee.d,{height:48,width:192,speed:2,primaryColor:"#f3f3f3",secondaryColor:"#e4e4e4"},r.a.createElement("rect",{x:"0",y:"0",rx:"3",ry:"3",width:"100%",height:"100%"}))};var ae=function(){return r.a.createElement(te,null)},ne=a(2),re=a(111),oe=Object(n.forwardRef)((function(e,t){var a=e.captchaRef,o=e.setLoading,i=Object(re.a)().t,c=ve(),l=Object(n.useState)(""),s=Object(D.a)(l,2),p=s[0],d=s[1],m=Object(n.useState)(null),f=Object(D.a)(m,2),h=f[0],g=f[1],b=Object(u.d)(),E=Object(n.useCallback)((function(e,t,a,n){return b(Object(ne.S)(e,t,a,n))}),[b]),v=function(){q.c.get("/site/captcha").then((function(e){g(e.data),o(!1)})).catch((function(e){E("top","right",i("login.captchaError",{message:e.message}),"error")}))};return Object(n.useEffect)((function(){t.current=v,v()}),[]),Object(n.useEffect)((function(){a.current.captchaCode=p}),[p]),r.a.createElement("div",{className:c.captchaInputContainer},r.a.createElement(W.a,{margin:"normal",required:!0,fullWidth:!0},r.a.createElement(z.a,{variant:"outlined",label:i("login.captcha"),inputProps:{name:"captcha",id:"captcha"},onChange:function(e){return d(e.target.value)},value:p,autoComplete:!0,InputProps:{endAdornment:r.a.createElement($.a,{position:"end"},r.a.createElement("div",{className:c.captchaImageContainer,title:i("login.clickToRefresh")},null===h&&r.a.createElement(ae,null),null!==h&&r.a.createElement("img",{className:c.captchaImage,src:h,alt:"captcha",onClick:v})))}}))," ")}));var ie=a(13),ce=a(14),le=a(138),se=a(16),ue=a(17),pe=["sitekey","onChange","theme","type","tabindex","onExpired","onErrored","size","stoken","grecaptcha","badge","hl"],de=function(e){Object(se.a)(a,e);var t=Object(ue.a)(a);function a(){var e;return Object(ie.a)(this,a),(e=t.call(this)).handleExpired=e.handleExpired.bind(Object(le.a)(e)),e.handleErrored=e.handleErrored.bind(Object(le.a)(e)),e.handleChange=e.handleChange.bind(Object(le.a)(e)),e.handleRecaptchaRef=e.handleRecaptchaRef.bind(Object(le.a)(e)),e}return Object(ce.a)(a,[{key:"getValue",value:function(){return this.props.grecaptcha&&void 0!==this._widgetId?this.props.grecaptcha.getResponse(this._widgetId):null}},{key:"getWidgetId",value:function(){return this.props.grecaptcha&&void 0!==this._widgetId?this._widgetId:null}},{key:"execute",value:function(){var e=this.props.grecaptcha;if(e&&void 0!==this._widgetId)return e.execute(this._widgetId);this._executeRequested=!0}},{key:"reset",value:function(){this.props.grecaptcha&&void 0!==this._widgetId&&this.props.grecaptcha.reset(this._widgetId)}},{key:"handleExpired",value:function(){this.props.onExpired?this.props.onExpired():this.handleChange(null)}},{key:"handleErrored",value:function(){this.props.onErrored&&this.props.onErrored()}},{key:"handleChange",value:function(e){this.props.onChange&&this.props.onChange(e)}},{key:"explicitRender",value:function(){if(this.props.grecaptcha&&this.props.grecaptcha.render&&void 0===this._widgetId){var e=document.createElement("div");this._widgetId=this.props.grecaptcha.render(e,{sitekey:this.props.sitekey,callback:this.handleChange,theme:this.props.theme,type:this.props.type,tabindex:this.props.tabindex,"expired-callback":this.handleExpired,"error-callback":this.handleErrored,size:this.props.size,stoken:this.props.stoken,hl:this.props.hl,badge:this.props.badge}),this.captcha.appendChild(e)}this._executeRequested&&this.props.grecaptcha&&void 0!==this._widgetId&&(this._executeRequested=!1,this.execute())}},{key:"componentDidMount",value:function(){this.explicitRender()}},{key:"componentDidUpdate",value:function(){this.explicitRender()}},{key:"componentWillUnmount",value:function(){void 0!==this._widgetId&&(this.delayOfCaptchaIframeRemoving(),this.reset())}},{key:"delayOfCaptchaIframeRemoving",value:function(){var e=document.createElement("div");for(document.body.appendChild(e),e.style.display="none";this.captcha.firstChild;)e.appendChild(this.captcha.firstChild);setTimeout((function(){document.body.removeChild(e)}),5e3)}},{key:"handleRecaptchaRef",value:function(e){this.captcha=e}},{key:"render",value:function(){var e=this.props,t=(e.sitekey,e.onChange,e.theme,e.type,e.tabindex,e.onExpired,e.onErrored,e.size,e.stoken,e.grecaptcha,e.badge,e.hl,Object(f.a)(e,pe));return r.a.createElement("div",Object.assign({},t,{ref:this.handleRecaptchaRef}))}}]),a}(r.a.Component);de.displayName="ReCAPTCHA",de.defaultProps={onChange:function(){},theme:"light",type:"image",tabindex:0,size:"normal",badge:"bottomright"};var me=a(425);var fe=Object(me.a)((function(){return"https://".concat("recaptcha.net","/recaptcha/api.js?onload=").concat("onloadcallback","&render=explicit")}),{callbackName:"onloadcallback",globalName:"grecaptcha"})(de),he=function(e){var t=e.captchaRef,a=e.setLoading,o=ve(),i=Object(n.useState)(""),c=Object(D.a)(i,2),l=c[0],s=c[1],p=Object(u.e)((function(e){return e.siteConfig.captcha_ReCaptchaKey}));return Object(n.useEffect)((function(){t.current.captchaCode=l}),[l]),Object(n.useEffect)((function(){return a(!1)}),[]),r.a.createElement("div",{className:o.captchaContainer},r.a.createElement(W.a,{margin:"normal",required:!0,fullWidth:!0},r.a.createElement("div",null,r.a.createElement(fe,{style:{display:"inline-block"},sitekey:p,onChange:function(e){return s(e)},id:"captcha",name:"captcha"})))," ")};var ge=a(426),be=a.n(ge),Ee=Object(n.forwardRef)((function(e,t){var a=e.captchaRef,n=e.setLoading,o=e.isValidateRef,i=e.submitRef,c=Object(u.e)((function(e){return e.siteConfig.tcaptcha_captcha_app_id}));return r.a.createElement(be.a,{url:"https://ssl.captcha.qq.com/TCaptcha.js",onLoad:function(){try{t.current=new window.TencentCaptcha(c,(function(e){0===e.ret?(a.current.ticket=e.ticket,a.current.randstr=e.randstr,o.current.isValidate=!0,i.current.submit(),console.log(i)):i.current.setLoading(!1)}))}catch(e){console.error(e)}n(!1)}})}));var ve=Object(x.a)((function(e){return{captchaContainer:Object(I.a)({display:"flex",marginTop:"10px",alignItems:"center"},e.breakpoints.down("sm"),{marginTop:0,display:"block"}),captchaInputContainer:{marginTop:0},captchaImageContainer:Object(I.a)({cursor:"pointer",marginLeft:"1rem"},e.breakpoints.down("sm"),{marginLeft:0}),captchaImage:{borderRadius:e.shape.borderRadius,height:48,marginTop:4}}})),Oe=function(e,t){},je=function(){var e=Object(u.e)((function(e){return e.siteConfig.captcha_type})),t=Object(n.useState)(!0),a=Object(D.a)(t,2),o=a[0],i=a[1],c=Object(n.useRef)((function(){})),l=function(e,t){var a=Object(n.useRef)({isValidate:!0}),o=Object(n.useRef)({captchaCode:""}),i=Object(n.useCallback)((function(){return r.a.createElement(oe,{captchaRef:o,ref:e,setLoading:t})}),[o,e,t]);return{isValidate:a,validate:Oe,captchaParamsRef:o,CaptchaRender:i}}(c,i),s=function(e){var t=Object(n.useRef)({isValidate:!0}),a=Object(n.useRef)({captchaCode:""}),o=Object(n.useCallback)((function(){return r.a.createElement(he,{captchaRef:a,setLoading:e})}),[a,e]);return{isValidate:t,validate:Oe,captchaParamsRef:a,CaptchaRender:o}}(i),p=function(e){var t=Object(n.useRef)({isValidate:!1}),a=Object(n.useRef)({ticket:"",randstr:""}),o=Object(n.useRef)({submit:function(){},setLoading:function(){}}),i=Object(n.useRef)(),c=Object(n.useCallback)((function(){return r.a.createElement(Ee,{captchaRef:a,setLoading:e,isValidateRef:t,submitRef:o,ref:i})}),[a,e,t,o,i]);return{isValidate:t,validate:function(e,t){o.current.submit=e,o.current.setLoading=t,i.current.show()},captchaParamsRef:a,CaptchaRender:c}}(i);switch(e){case"normal":return Object(m.a)(Object(m.a)({},l),{},{captchaRefreshRef:c,captchaLoading:o});case"recaptcha":return Object(m.a)(Object(m.a)({},s),{},{captchaRefreshRef:c,captchaLoading:o});case"tcaptcha":return Object(m.a)(Object(m.a)({},p),{},{captchaRefreshRef:c,captchaLoading:o});default:return Object(m.a)(Object(m.a)({},l),{},{captchaRefreshRef:c,captchaLoading:o})}},we=a(46),ke=Object(x.a)((function(e){var t;return{layout:(t={width:"auto",marginTop:"110px",marginLeft:e.spacing(3),marginRight:e.spacing(3)},Object(I.a)(t,e.breakpoints.up("sm"),{width:400,marginLeft:"auto",marginRight:"auto"}),Object(I.a)(t,"marginBottom",110),t),paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center",padding:"".concat(e.spacing(2),"px ").concat(e.spacing(3),"px ").concat(e.spacing(3),"px")},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{marginTop:e.spacing(3)},link:{marginTop:"20px",display:"flex",width:"100%",justifyContent:"space-between"},buttonContainer:{display:"flex"},authnLink:{textAlign:"center",marginTop:16}}}));var ye=function(){var e=Object(re.a)().t,t=Object(n.useState)(""),a=Object(D.a)(t,2),o=a[0],i=a[1],c=Object(n.useState)(""),l=Object(D.a)(c,2),p=l[0],d=l[1],f=Object(n.useState)(!1),g=Object(D.a)(f,2),b=g[0],E=g[1],v=Object(n.useState)(!1),O=Object(D.a)(v,2),w=O[0],k=O[1],y=Object(n.useState)(!1),x=Object(D.a)(y,2),C=x[0],S=x[1],T=Object(n.useState)(""),P=Object(D.a)(T,2),L=P[0],F=P[1],I=Object(u.e)((function(e){return e.siteConfig.loginCaptcha})),R=Object(u.e)((function(e){return e.siteConfig.registerEnabled})),Q=Object(u.e)((function(e){return e.siteConfig.title})),ee=Object(u.e)((function(e){return e.siteConfig.authn})),te=Object(we.a)(),ae=Object(j.a)(te.breakpoints.down("sm")),oe=Object(u.d)(),ie=Object(n.useCallback)((function(e,t,a,n){return oe(Object(ne.S)(e,t,a,n))}),[oe]),ce=Object(n.useCallback)((function(e){return oe(Object(ne.a)(e))}),[oe]),le=Object(n.useCallback)((function(e){return oe(Object(ne.L)(e))}),[oe]),se=Object(s.g)(),ue=Object(s.h)(),pe=je(),de=pe.captchaLoading,me=pe.isValidate,fe=pe.validate,he=pe.CaptchaRender,ge=pe.captchaRefreshRef,be=pe.captchaParamsRef,Ee=new URLSearchParams(Object(s.h)().search),ve=ke();Object(n.useEffect)((function(){i(Ee.get("username"))}),[ue]);var Oe=function(t){h.a.authenticate(t),""!==t.preferred_theme&&ce(t.preferred_theme),le(!0),Ee.get("redirect")?se.push(Ee.get("redirect")):se.push("/home"),ie("top","right",e("login.success"),"success"),localStorage.removeItem("siteConfigCache")};return r.a.createElement("div",{className:ve.layout},!C&&r.a.createElement(r.a.Fragment,null,r.a.createElement(A.a,{className:ve.paper},r.a.createElement(_.a,{className:ve.avatar},r.a.createElement(M.a,null)),r.a.createElement(U.a,{component:"h1",variant:"h5"},e("login.title",{title:Q})),!w&&r.a.createElement("form",{className:ve.form,onSubmit:function e(t){t.preventDefault(),E(!0),me.current.isValidate||!I?q.c.post("/user/session",Object(m.a)({userName:o,Password:p},be.current)).then((function(e){E(!1),203===e.rawData.code?S(!0):Oe(e.data)})).catch((function(e){E(!1),ie("top","right",e.message,"warning"),ge.current()})):fe((function(){return e(t)}),E)}},r.a.createElement(W.a,{margin:"normal",required:!0,fullWidth:!0},r.a.createElement(z.a,{label:e("login.email"),variant:"outlined",inputProps:{id:"email",type:"email",name:"email"},onChange:function(e){return i(e.target.value)},InputProps:{startAdornment:!ae&&r.a.createElement($.a,{position:"start"},r.a.createElement(K.a,null))},autoComplete:!0,value:o,autoFocus:!0})),r.a.createElement(W.a,{margin:"normal",required:!0,fullWidth:!0},r.a.createElement(z.a,{variant:"outlined",label:e("login.password"),inputProps:{name:"password",type:"password",id:"password"},onChange:function(e){return d(e.target.value)},InputProps:{startAdornment:!ae&&r.a.createElement($.a,{position:"start"},r.a.createElement(Y.a,null))},value:p,autoComplete:!0})),I&&r.a.createElement(he,null),r.a.createElement(B.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",disabled:b||!!I&&de,className:ve.submit},e("login.signIn"))),w&&r.a.createElement("form",{className:ve.form},r.a.createElement(W.a,{margin:"normal",required:!0,fullWidth:!0},r.a.createElement(z.a,{variant:"outlined",label:e("login.email"),InputProps:{id:"email",type:"email",name:"email",startAdornment:!ae&&r.a.createElement($.a,{position:"start"},r.a.createElement(K.a,null))},onChange:function(e){return i(e.target.value)},autoComplete:!0,value:o,autoFocus:!0,required:!0})),r.a.createElement(B.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",disabled:b,onClick:function(t){t.preventDefault(),navigator.credentials?(E(!0),q.c.get("/user/authn/"+o).then((function(e){var t=e.data;return console.log(t),t.publicKey.challenge=Object(N.b)(t.publicKey.challenge),t.publicKey.allowCredentials.forEach((function(e){e.id=Object(N.b)(e.id)})),navigator.credentials.get({publicKey:t.publicKey})})).then((function(e){var t=e.response.authenticatorData,a=e.response.clientDataJSON,n=e.rawId,r=e.response.signature,i=e.response.userHandle;return q.c.post("/user/authn/finish/"+o,JSON.stringify({id:e.id,rawId:Object(N.c)(n),type:e.type,response:{authenticatorData:Object(N.c)(t),clientDataJSON:Object(N.c)(a),signature:Object(N.c)(r),userHandle:Object(N.c)(i)}}))})).then((function(e){Oe(e.data)})).catch((function(e){console.log(e),ie("top","right",e.message,"warning")})).then((function(){E(!1)}))):ie("top","right",e("login.browserNotSupport"),"warning")},className:ve.submit},e("login.continue"))),r.a.createElement(G.a,null),r.a.createElement("div",{className:ve.link},r.a.createElement("div",null,r.a.createElement(H.a,{component:V.a,to:"/forget"},e("login.forgetPassword"))),r.a.createElement("div",null,R&&r.a.createElement(H.a,{component:V.a,to:"/signup"},e("login.signUpAccount"))))),ee&&r.a.createElement("div",{className:ve.authnLink},r.a.createElement(B.a,{color:"primary",onClick:function(){return k(!w)}},!w&&r.a.createElement(r.a.Fragment,null,r.a.createElement(J.a,{style:{marginRight:8}}),e("login.useFIDO2")),w&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Z.a,{style:{marginRight:8}}),e("login.usePassword"))))),C&&r.a.createElement(A.a,{className:ve.paper},r.a.createElement(_.a,{className:ve.avatar},r.a.createElement(X.a,null)),r.a.createElement(U.a,{component:"h1",variant:"h5"},e("login.2FA")),r.a.createElement("form",{className:ve.form,onSubmit:function(e){e.preventDefault(),E(!0),q.c.post("/user/2fa",{code:L}).then((function(e){E(!1),Oe(e.data)})).catch((function(e){E(!1),ie("top","right",e.message,"warning")}))}},r.a.createElement(W.a,{margin:"normal",required:!0,fullWidth:!0},r.a.createElement(z.a,{label:e("login.input2FACode"),variant:"outlined",inputProps:{id:"code",type:"number",name:"code"},onChange:function(e){return F(e.target.value)},autoComplete:!0,value:L,autoFocus:!0})),r.a.createElement(B.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",disabled:b,className:ve.submit},e("login.continue"))," ")," ",r.a.createElement(G.a,null)))},xe=a(7124),Ce=a(278),Se=a(52),Ne=a(18),Te=a(7111),Pe=a(31),Le=a.n(Pe),Fe=a(137),De=a(80),Ie=a(8),Re=a(58),Me=a(130),Ae=a.n(Me),_e=a(90),Ue=a(7110),We=a(428),ze=a.n(We),Be=a(39),Ge=Object(x.a)((function(e){return{highlight:{backgroundColor:e.palette.warning.light}}}));function He(e){var t=e.name,a=Ge(),n=Object(u.e)((function(e){return e.explorer.search}));return n?r.a.createElement(ze.a,{highlightClassName:a.highlight,searchWords:Object(Be.r)(n.keywords,"keywords/").split(" "),autoEscape:!0,textToHighlight:t}):t}var Ve=function(e){Object(se.a)(a,e);var t=Object(ue.a)(a);function a(){var e;Object(ie.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={},e}return Object(ce.a)(a,[{key:"shouldComponentUpdate",value:function(e,t,a){var n=this,r=-1!==this.props.selected.findIndex((function(e){return e===n.props.file})),o=-1!==e.selected.findIndex((function(e){return e===n.props.file}));return e.selected===this.props.selected||r!==o}},{key:"render",value:function(){var e,t,a,n=this,o=this.props.classes,i=-1!==this.props.selected.findIndex((function(e){return e===n.props.file}));return r.a.createElement(Fe.a,{focusRipple:!0,className:Le()((e={},Object(I.a)(e,o.selected,i),Object(I.a)(e,o.notSelected,!i),e),o.button)},r.a.createElement("div",{onClick:this.props.onIconClick,className:Le()(o.icon,(t={},Object(I.a)(t,o.iconSelected,i),Object(I.a)(t,o.iconNotSelected,!i),t))},!i&&r.a.createElement(r.a.Fragment,null,this.props.isFolder&&r.a.createElement(Ue.a,null),!this.props.isFolder&&r.a.createElement(Re.a,{fileName:this.props.file.name})),i&&r.a.createElement(_e.a,{in:i},r.a.createElement(Ae.a,{className:o.checkIcon}))),r.a.createElement(De.a,{title:this.props.file.name,"aria-label":this.props.file.name},r.a.createElement(U.a,{className:Le()(o.folderName,(a={},Object(I.a)(a,o.folderNameSelected,i),Object(I.a)(a,o.folderNameNotSelected,!i),a)),variant:"body2"},r.a.createElement(He,{name:this.props.file.name}))))}}]),a}(n.Component),qe=Object(u.c)((function(e){return{selected:e.explorer.selected}}),(function(){return{}}))(Object(Ie.a)((function(e){return{container:{padding:"7px"},selected:{"&:hover":{border:"1px solid #d0d0d0"},backgroundColor:Object(y.d)(e.palette.primary.main,"dark"===e.palette.type?.3:.18)},notSelected:{"&:hover":{backgroundColor:e.palette.background.default,border:"1px solid #d0d0d0"},backgroundColor:e.palette.background.paper},button:{height:"50px",border:"1px solid "+e.palette.divider,width:"100%",borderRadius:e.shape.borderRadius,boxSizing:"border-box",transition:"background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms",display:"flex",justifyContent:"left",alignItems:"initial"},icon:{margin:"10px 10px 10px 16px",height:"30px",minWidth:"30px",backgroundColor:e.palette.background.paper,borderRadius:"90%",paddingTop:"3px",color:e.palette.text.secondary},folderNameSelected:{color:"dark"===e.palette.type?"#fff":e.palette.primary.dark,fontWeight:"500"},folderNameNotSelected:{color:e.palette.text.secondary},folderName:{marginTop:"15px",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",marginRight:"20px"},checkIcon:{color:e.palette.primary.main}}}))(Ve)),Ke=a(429),Ye=function(e){Object(se.a)(a,e);var t=Object(ue.a)(a);function a(){var e;Object(ie.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={loading:!1,showPicIcon:!1},e}return Object(ce.a)(a,[{key:"shouldComponentUpdate",value:function(e,t,a){var n=this,r=-1!==this.props.selected.findIndex((function(e){return e===n.props.file})),o=-1!==e.selected.findIndex((function(e){return e===n.props.file}));return e.selected===this.props.selected||r!==o}},{key:"render",value:function(){var e,t,a,n,o=this,i=this.props.classes,c=-1!==this.props.selected.findIndex((function(e){return e===o.props.file})),l=Ne.a.isSharePage(this.props.location.pathname);Ne.a.isMobile();return r.a.createElement("div",{className:i.container},r.a.createElement(Fe.a,{focusRipple:!0,className:Le()((e={},Object(I.a)(e,i.selected,c),Object(I.a)(e,i.notSelected,!c),e),i.button)},this.props.file.thumb&&!this.state.showPicIcon&&r.a.createElement("div",{className:i.preview},r.a.createElement(Ke.LazyLoadImage,{className:Le()((t={},Object(I.a)(t,i.hide,this.state.loading),Object(I.a)(t,i.picPreview,!this.state.loading),t),i.noDrag),src:q.b+(l&&this.props.shareInfo?"/share/thumb/"+this.props.shareInfo.key+"/"+this.props.file.id+"?path="+encodeURIComponent(this.props.file.path):"/file/thumb/"+this.props.file.id),afterLoad:function(){return o.setState({loading:!1})},beforeLoad:function(){return o.setState({loading:!0})},onError:function(){return o.setState({showPicIcon:!0})}}),r.a.createElement(ee.d,{height:150,width:170,className:Le()(Object(I.a)({},i.hide,!this.state.loading),i.loadingAnimation)},r.a.createElement("rect",{x:"0",y:"0",width:"100%",height:"150"}))),(!this.props.file.thumb||this.state.showPicIcon)&&r.a.createElement("div",{className:i.previewIcon},r.a.createElement(Re.a,{className:i.iconBig,fileName:this.props.file.name})),(!this.props.file.thumb||this.state.showPicIcon)&&r.a.createElement(G.a,null),r.a.createElement("div",{className:i.fileInfo},!this.props.share&&r.a.createElement("div",{onClick:this.props.onIconClick,className:Le()(i.icon,(a={},Object(I.a)(a,i.iconSelected,c),Object(I.a)(a,i.iconNotSelected,!c),a))},!c&&r.a.createElement(Re.a,{fileName:this.props.file.name}),c&&r.a.createElement(_e.a,{in:c},r.a.createElement(Ae.a,{className:i.checkIcon}))),r.a.createElement(De.a,{title:this.props.file.name,"aria-label":this.props.file.name},r.a.createElement(U.a,{variant:"body2",className:Le()(i.folderName,(n={},Object(I.a)(n,i.folderNameSelected,c),Object(I.a)(n,i.folderNameNotSelected,!c),Object(I.a)(n,i.shareFix,this.props.share),n))},r.a.createElement(He,{name:this.props.file.name}))))))}}]),a}(n.Component);Ye.defaultProps={share:!1};var Je=Object(u.c)((function(e){return{path:e.navigator.path,selected:e.explorer.selected,shareInfo:e.viewUpdate.shareInfo}}),(function(){return{}}))(Object(Ie.a)((function(e){return{container:{},selected:{"&:hover":{border:"1px solid #d0d0d0"},backgroundColor:Object(y.d)(e.palette.primary.main,"dark"===e.palette.type?.3:.18)},notSelected:{"&:hover":{backgroundColor:e.palette.background.default,border:"1px solid #d0d0d0"},backgroundColor:e.palette.background.paper},button:{border:"1px solid "+e.palette.divider,width:"100%",borderRadius:e.shape.borderRadius,boxSizing:"border-box",transition:"background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms",alignItems:"initial",display:"initial"},folderNameSelected:{color:"dark"===e.palette.type?"#fff":e.palette.primary.dark,fontWeight:"500"},folderNameNotSelected:{color:e.palette.text.secondary},folderName:{marginTop:"15px",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",marginRight:"20px"},preview:{overflow:"hidden",height:"150px",width:"100%",borderRadius:"12px 12px 0 0",backgroundColor:e.palette.background.default},previewIcon:{overflow:"hidden",height:"149px",width:"100%",borderRadius:"12px 12px 0 0",backgroundColor:e.palette.background.paper,paddingTop:"50px"},iconBig:{fontSize:50},picPreview:{objectFit:"cover",width:"100%",height:"100%"},fileInfo:{height:"50px",display:"flex"},icon:{margin:"10px 10px 10px 16px",height:"30px",minWidth:"30px",backgroundColor:e.palette.background.paper,borderRadius:"90%",paddingTop:"3px",color:e.palette.text.secondary},hide:{display:"none"},loadingAnimation:{borderRadius:"12px 12px 0 0",height:"100%",width:"100%"},shareFix:{marginLeft:"20px"},checkIcon:{color:e.palette.primary.main},noDrag:{userDrag:"none"}}}))(Object(s.k)(Ye))),Ze=a(79),Qe=a.n(Ze),Xe=Object(x.a)((function(e){return{container:{padding:"7px"},selected:{"&:hover":{border:"1px solid #d0d0d0"},backgroundColor:Object(y.d)(e.palette.primary.main,"dark"===e.palette.type?.3:.18)},notSelected:{"&:hover":{backgroundColor:e.palette.background.default,border:"1px solid #d0d0d0"},backgroundColor:e.palette.background.paper},button:{height:"50px",border:"1px solid "+e.palette.divider,width:"100%",borderRadius:e.shape.borderRadius,boxSizing:"border-box",transition:"background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms",display:"flex",justifyContent:"left",alignItems:"initial"},icon:{margin:"10px 10px 10px 16px",height:"30px",minWidth:"30px",backgroundColor:e.palette.background.paper,borderRadius:"90%",paddingTop:"3px",color:e.palette.text.secondary},folderNameSelected:{color:"dark"===e.palette.type?"#fff":e.palette.primary.dark,fontWeight:"500"},folderNameNotSelected:{color:e.palette.text.secondary},folderName:{marginTop:"15px",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",marginRight:"20px"},active:{boxShadow:"0 0 0 2px "+e.palette.primary.light},checkIcon:{color:e.palette.primary.main}}}));function $e(e){var t,a,n,o=e.folder,i=e.isActive,c=e.onIconClick,l=Object(u.e)((function(e){return e.explorer.selected})),s=Xe(),p=(Ne.a.isMobile(),-1!==l.findIndex((function(e){return e===o})));return r.a.createElement(Fe.a,{focusRipple:!0,className:Le()((t={},Object(I.a)(t,s.selected,p),Object(I.a)(t,s.notSelected,!p),Object(I.a)(t,s.active,i),t),s.button)},r.a.createElement("div",{onClick:c,className:Le()(s.icon,(a={},Object(I.a)(a,s.iconSelected,p),Object(I.a)(a,s.iconNotSelected,!p),a))},!p&&r.a.createElement(Qe.a,null),p&&r.a.createElement(Ae.a,{className:s.checkIcon})),r.a.createElement(De.a,{title:o.name,"aria-label":o.name},r.a.createElement(U.a,{variant:"body2",className:Le()(s.folderName,(n={},Object(I.a)(n,s.folderNameSelected,p),Object(I.a)(n,s.folderNameNotSelected,!p),n))},o.name)))}var et=Object(x.a)((function(){return{dragging:{width:"200px"},cardDragged:{position:"absolute","transform-origin":"bottom left"}}})),tt=function(e,t,a){return"dir"===e.type?r.a.createElement("div",{className:a.dragging},r.a.createElement(qe,{file:e,isFolder:!0})):"file"===e.type&&"icon"===t?r.a.createElement("div",{className:a.dragging},r.a.createElement(Je,{file:e})):"file"===e.type&&"smallIcon"===t||"list"===t?r.a.createElement("div",{className:a.dragging},r.a.createElement(qe,{file:e})):void 0},at=function(e){var t=Object(u.e)((function(e){return e.explorer.selected})),a=Object(u.e)((function(e){return e.viewUpdate.explorerViewMethod})),n=et();return r.a.createElement(r.a.Fragment,null,0===t.length&&tt(e.object,a,n),t.length>0&&r.a.createElement(r.a.Fragment,null,t.slice(0,3).map((function(e,o){return r.a.createElement("div",{key:e.id,className:n.cardDragged,style:{zIndex:t.length-o,transform:"rotateZ(".concat(2.5*-o,"deg)")}},tt(e,a,n))}))))},nt={position:"fixed",pointerEvents:"none",zIndex:100,left:0,top:0,width:"100%",height:"100%"};function rt(e,t,a,n){if(!e||!t)return{display:"none"};var r=t.x,o=t.y;"list"===n&&(r+=a.x-e.x,o+=a.y-e.y);var i="translate(".concat(r,"px, ").concat(o,"px)");return{opacity:.5,transform:i,WebkitTransform:i}}var ot=function(e){var t=Object(Te.a)((function(e){return{item:e.getItem(),itemType:e.getItemType(),initialOffset:e.getInitialSourceClientOffset(),currentOffset:e.getSourceClientOffset(),pointerOffset:e.getInitialClientOffset(),isDragging:e.isDragging()}})),a=t.itemType,o=t.isDragging,i=t.item,c=t.initialOffset,l=t.currentOffset,s=t.pointerOffset,p=Object(u.e)((function(e){return e.viewUpdate.explorerViewMethod})),d=Object(n.useMemo)((function(){switch(a){case"object":return r.a.createElement(at,{object:i.object});default:return null}}),[a,i]);return o?r.a.createElement("div",{style:nt},r.a.createElement("div",{style:rt(c,l,s,p)},d)):null},it=a(41),ct=a(7117),lt=a(7118),st=a(7115),ut=a(7116),pt=a(7119),dt=a(7098),mt=a(470),ft=a(7160),ht=a(166),gt=a(64),bt=a(74),Et=a(253),vt=a(7112),Ot=a(7113),jt=a(7114),wt=a(236),kt=a.n(wt),yt=a(121),xt=a.n(yt),Ct=a(134),St=a.n(Ct),Nt=a(141),Tt=a.n(Nt),Pt=a(105),Lt=a.n(Pt),Ft=a(432),Dt=a.n(Ft),It=a(282),Rt=a.n(It),Mt=a(161),At=a.n(Mt),_t=a(431),Ut=a.n(_t),Wt=a(129),zt=a.n(Wt),Bt=a(120),Gt=a.n(Bt),Ht=a(30),Vt=a(49),qt=a(119),Kt=a.n(qt),Yt=a(40),Jt=a(199),Zt=Object(Ie.a)({root:{minWidth:38}})(gt.a),Qt=function(e){Object(se.a)(a,e);var t=Object(ue.a)(a);function a(){var e;Object(ie.a)(this,a);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).X=0,e.Y=0,e.state={},e.componentDidMount=function(){window.document.addEventListener("mousemove",e.setPoint)},e.setPoint=function(t){e.Y=t.clientY,e.X=t.clientX},e.openArchiveDownload=function(){e.props.startBatchDownload(e.props.share)},e.openDirectoryDownload=function(){e.props.startDirectoryDownload(e.props.share)},e.openDownload=function(){e.props.startDownload(e.props.share,e.props.selected[0])},e.enterFolder=function(){e.props.navigateTo(Object(Be.k)([e.props.path,e.props.selected[0].name]))},e.renderMenuItems=function(t){var a=[],n=0;return["top","center","bottom"].forEach((function(o){var i=0;t[o].forEach((function(e){e.condition&&(a.push(r.a.createElement(bt.a,{dense:!0,key:n,onClick:e.onClick},r.a.createElement(gt.a,null,e.icon),r.a.createElement(U.a,{variant:"inherit"},e.text))),n++,i++)})),i>0&&"bottom"!=o&&(a.push(r.a.createElement(G.a,{key:n,className:e.props.classes.divider})),n++)})),a},e}return Object(ce.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.t,o=h.a.GetUser(),i=Ne.a.isHomePage(this.props.location.pathname);Kt.a,St.a,Ht.o,o.group.allowRemoteDownload,xt.a,Tt.a,Ht.j;return r.a.createElement("div",null,r.a.createElement(Et.a,{keepMounted:!0,open:this.props.menuOpen,onClose:function(){return e.props.changeContextMenu(e.props.menuType,!1)},anchorReference:"anchorPosition",anchorPosition:{top:this.Y,left:this.X},anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"}},"empty"===this.props.menuType&&r.a.createElement("div",null,r.a.createElement(bt.a,{dense:!0,onClick:function(){e.props.refreshFileList(),e.props.changeContextMenu(e.props.menuType,!1)}},r.a.createElement(Zt,null,r.a.createElement(Kt.a,null)),r.a.createElement(U.a,{variant:"inherit"},n("fileManager.refresh"))),r.a.createElement(G.a,{className:a.divider}),r.a.createElement(bt.a,{dense:!0,onClick:function(){return e.props.openFileSelector()}},r.a.createElement(Zt,null,r.a.createElement(St.a,null)),r.a.createElement(U.a,{variant:"inherit"},n("fileManager.uploadFiles"))),r.a.createElement(bt.a,{dense:!0,onClick:function(){return e.props.openFolderSelector()}},r.a.createElement(Zt,null,r.a.createElement(Ht.o,null)),r.a.createElement(U.a,{variant:"inherit"},n("fileManager.uploadFolder"))),o.group.allowRemoteDownload&&r.a.createElement(bt.a,{dense:!0,onClick:function(){return e.props.openRemoteDownloadDialog()}},r.a.createElement(Zt,null,r.a.createElement(xt.a,null)),r.a.createElement(U.a,{variant:"inherit"},n("fileManager.newRemoteDownloads"))),r.a.createElement(G.a,{className:a.divider}),r.a.createElement(bt.a,{dense:!0,onClick:function(){return e.props.openCreateFolderDialog()}},r.a.createElement(Zt,null,r.a.createElement(Tt.a,null)),r.a.createElement(U.a,{variant:"inherit"},n("fileManager.newFolder"))),r.a.createElement(bt.a,{dense:!0,onClick:function(){return e.props.openCreateFileDialog()}},r.a.createElement(Zt,null,r.a.createElement(Ht.j,null)),r.a.createElement(U.a,{variant:"inherit"},n("fileManager.newFile")))),"empty"!==this.props.menuType&&r.a.createElement("div",null,!this.props.isMultiple&&this.props.withFolder&&r.a.createElement("div",null,r.a.createElement(bt.a,{dense:!0,onClick:this.enterFolder},r.a.createElement(Zt,null,r.a.createElement(Rt.a,null)),r.a.createElement(U.a,{variant:"inherit"},n("fileManager.enter"))),i&&r.a.createElement(G.a,{className:a.divider})),!this.props.isMultiple&&this.props.withFile&&(!this.props.share||this.props.share.preview)&&Object(Vt.i)(this.props.selected[0].name)&&r.a.createElement("div",null,r.a.createElement(bt.a,{dense:!0,onClick:function(){return e.props.openPreview()}},r.a.createElement(Zt,null,r.a.createElement(zt.a,null)),r.a.createElement(U.a,{variant:"inherit"},n("fileManager.open")))),this.props.search&&!this.props.isMultiple&&r.a.createElement("div",null,r.a.createElement(bt.a,{dense:!0,onClick:function(){return e.props.openParentFolder()}},r.a.createElement(Zt,null,r.a.createElement(Rt.a,null)),r.a.createElement(U.a,{variant:"inherit"},n("fileManager.openParentFolder")))),!this.props.isMultiple&&this.props.withFile&&r.a.createElement("div",null,r.a.createElement(bt.a,{dense:!0,onClick:function(){return e.openDownload(e.props.share)}},r.a.createElement(Zt,null,r.a.createElement(xt.a,null)),r.a.createElement(U.a,{variant:"inherit"},n("fileManager.download"))),i&&r.a.createElement(G.a,{className:a.divider})),(this.props.isMultiple||this.props.withFolder)&&window.showDirectoryPicker&&window.isSecureContext&&r.a.createElement(bt.a,{dense:!0,onClick:function(){return e.openDirectoryDownload()}},r.a.createElement(Zt,null,r.a.createElement(Ht.m,null)),r.a.createElement(U.a,{variant:"inherit"},n("fileManager.download"))),(this.props.isMultiple||this.props.withFolder)&&r.a.createElement(bt.a,{dense:!0,onClick:function(){return e.openArchiveDownload()}},r.a.createElement(Zt,null,r.a.createElement(xt.a,null)),r.a.createElement(U.a,{variant:"inherit"},n("fileManager.batchDownload"))),i&&o.group.sourceBatch>0&&this.props.withSourceEnabled&&r.a.createElement(bt.a,{dense:!0,onClick:function(){return e.props.batchGetSource()}},r.a.createElement(Zt,null,r.a.createElement(Ut.a,null)),r.a.createElement(U.a,{variant:"inherit"},this.props.isMultiple||this.props.withFolder&&!this.props.withFile?n("fileManager.getSourceLinkInBatch"):n("fileManager.getSourceLink"))),!this.props.isMultiple&&i&&o.group.allowRemoteDownload&&this.props.withFile&&Object(Vt.j)(this.props.selected[0].name)&&r.a.createElement(bt.a,{dense:!0,onClick:function(){return e.props.openTorrentDownloadDialog()}},r.a.createElement(Zt,null,r.a.createElement(Ht.E,null)),r.a.createElement(U.a,{variant:"inherit"},n("fileManager.createRemoteDownloadForTorrent"))),!this.props.isMultiple&&i&&o.group.compress&&this.props.withFile&&Object(Vt.h)(this.props.selected[0].name)&&r.a.createElement(bt.a,{dense:!0,onClick:function(){return e.props.openDecompressDialog()}},r.a.createElement(Zt,null,r.a.createElement(vt.a,null)),r.a.createElement(U.a,{variant:"inherit"},n("fileManager.decompress"))),i&&o.group.compress&&r.a.createElement(bt.a,{dense:!0,onClick:function(){return e.props.openCompressDialog()}},r.a.createElement(Zt,null,r.a.createElement(Ot.a,null)),r.a.createElement(U.a,{variant:"inherit"},n("fileManager.compress"))),!this.props.isMultiple&&i&&r.a.createElement(bt.a,{dense:!0,onClick:function(){return e.props.openShareDialog()}},r.a.createElement(Zt,null,r.a.createElement(Gt.a,null)),r.a.createElement(U.a,{variant:"inherit"},n("fileManager.createShareLink"))),!this.props.isMultiple&&i&&r.a.createElement(bt.a,{dense:!0,onClick:function(){return e.props.toggleObjectInfoSidebar(!0)}},r.a.createElement(Zt,null,r.a.createElement(jt.a,null)),r.a.createElement(U.a,{variant:"inherit"},n("fileManager.viewDetails"))),!this.props.isMultiple&&i&&r.a.createElement(G.a,{className:a.divider}),!this.props.isMultiple&&i&&r.a.createElement("div",null,r.a.createElement(bt.a,{dense:!0,onClick:function(){return e.props.openRenameDialog()}},r.a.createElement(Zt,null,r.a.createElement(kt.a,null)),r.a.createElement(U.a,{variant:"inherit"},n("fileManager.rename"))),!this.props.search&&r.a.createElement(bt.a,{dense:!0,onClick:function(){return e.props.openCopyDialog()}},r.a.createElement(Zt,null,r.a.createElement(Dt.a,null)),r.a.createElement(U.a,{variant:"inherit"},n("fileManager.copy")))),i&&r.a.createElement("div",null,!this.props.search&&r.a.createElement(bt.a,{dense:!0,onClick:function(){return e.props.openMoveDialog()}},r.a.createElement(Zt,null,r.a.createElement(At.a,null)),r.a.createElement(U.a,{variant:"inherit"},n("fileManager.move"))),r.a.createElement(G.a,{className:a.divider}),r.a.createElement(bt.a,{dense:!0,className:a.propover,onClick:function(){return e.props.openRemoveDialog()}},r.a.createElement(Zt,null,r.a.createElement(Lt.a,null)),r.a.createElement(U.a,{variant:"inherit"},n("fileManager.delete")))))))}}]),a}(n.Component),Xt=Object(u.c)((function(e){return{menuType:e.viewUpdate.contextType,menuOpen:e.viewUpdate.contextOpen,isMultiple:e.explorer.selectProps.isMultiple,withFolder:e.explorer.selectProps.withFolder,withFile:e.explorer.selectProps.withFile,withSourceEnabled:e.explorer.selectProps.withSourceEnabled,path:e.navigator.path,selected:e.explorer.selected,search:e.explorer.search}}),(function(e){return{changeContextMenu:function(t,a){e(Object(ne.d)(t,a))},setNavigatorLoadingStatus:function(t){e(Object(ne.J)(t))},setSelectedTarget:function(t){e(Object(Yt.setSelectedTarget)(t))},navigateTo:function(t){e(Object(ne.j)(t))},openCreateFolderDialog:function(){e(Object(ne.o)())},openCreateFileDialog:function(){e(Object(ne.n)())},openRenameDialog:function(){e(Object(ne.y)())},openMoveDialog:function(){e(Object(ne.t)())},openRemoveDialog:function(){e(Object(ne.x)())},openShareDialog:function(){e(Object(ne.A)())},showImgPreivew:function(t){e(Object(ne.Q)(t))},openMusicDialog:function(){e(Object(ne.u)())},toggleSnackbar:function(t,a,n,r){e(Object(ne.S)(t,a,n,r))},openRemoteDownloadDialog:function(){e(Object(ne.w)())},openTorrentDownloadDialog:function(){e(Object(Yt.openTorrentDownload)())},openCopyDialog:function(){e(Object(ne.m)())},openLoadingDialog:function(t){e(Object(ne.s)(t))},openDecompressDialog:function(){e(Object(ne.p)())},openCompressDialog:function(){e(Object(ne.l)())},refreshFileList:function(){e(Object(ne.C)())},openPreview:function(t){e(Object(Yt.openPreview)(t))},toggleObjectInfoSidebar:function(t){e(Object(Yt.toggleObjectInfoSidebar)(t))},startBatchDownload:function(t){e(Object(Yt.startBatchDownload)(t))},openFileSelector:function(){e(Object(Se.d)())},openFolderSelector:function(){e(Object(Se.e)())},startDownload:function(t,a){e(Object(Yt.startDownload)(t,a))},batchGetSource:function(){e(Object(Yt.batchGetSource)())},startDirectoryDownload:function(t){e(Object(Yt.startDirectoryDownload)(t))},openParentFolder:function(){e(Object(Yt.openParentFolder)())}}}))(Object(Ie.a)((function(){return{propover:{},divider:{marginTop:4,marginBottom:4}}}))(Object(s.k)(Object(Jt.a)()(Qt)))),$t=a(433),ea=a(437),ta=a.n(ea),aa=a(56),na=function(e){Object(se.a)(a,e);var t=Object(ue.a)(a);function a(){var e;Object(ie.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={},e}return Object(ce.a)(a,[{key:"shouldComponentUpdate",value:function(e,t,a){var n=this,r=-1!==this.props.selected.findIndex((function(e){return e===n.props.file})),o=-1!==e.selected.findIndex((function(e){return e===n.props.file}));return e.selected===this.props.selected||r!==o}},{key:"render",value:function(){var e,t,a,n,o,i=this,c=this.props.classes,l=Ne.a.isSharePage(this.props.location.pathname);o="dir"===this.props.file.type?r.a.createElement(Qe.a,{className:c.icon}):"up"===this.props.file.type?r.a.createElement(ta.a,{className:c.icon}):r.a.createElement(Re.a,{className:c.tableIcon,fileName:this.props.file.name});var s=-1!==this.props.selected.findIndex((function(e){return e===i.props.file}));Ne.a.isMobile();return r.a.createElement(st.a,{ref:this.props.pref,onContextMenu:this.props.contextMenu,onClick:this.props.handleClick,onDoubleClick:this.props.handleDoubleClick.bind(this),className:Le()((e={},Object(I.a)(e,c.selected,s&&!l),Object(I.a)(e,c.selectedShared,s&&l),Object(I.a)(e,c.notSelected,!s),Object(I.a)(e,c.active,this.props.isActive),e))},r.a.createElement(ut.a,{ref:this.props.dref,component:"th",scope:"row",className:c.tableRow},r.a.createElement(U.a,{variant:"body2",className:Le()(c.folderName,(t={},Object(I.a)(t,c.folderNameSelected,s),Object(I.a)(t,c.folderNameNotSelected,!s),t))},r.a.createElement("div",{onClick:"up"!==this.props.file.type?this.props.onIconClick:null},!s&&o,s&&r.a.createElement(_e.a,{in:s},r.a.createElement(Ae.a,{className:Le()(c.checkIcon,c.icon)}))),r.a.createElement(He,{name:this.props.file.name}))),r.a.createElement(ut.a,{className:Le()(c.hideAuto,c.tableRow)},r.a.createElement(U.a,{variant:"body2",className:Le()(c.folderName,(a={},Object(I.a)(a,c.folderNameSelected,s),Object(I.a)(a,c.folderNameNotSelected,!s),a))}," ","dir"!==this.props.file.type&&"up"!==this.props.file.type&&Object(N.r)(this.props.file.size))),r.a.createElement(ut.a,{className:Le()(c.hideAuto,c.tableRow)},r.a.createElement(U.a,{variant:"body2",className:Le()(c.folderName,(n={},Object(I.a)(n,c.folderNameSelected,s),Object(I.a)(n,c.folderNameNotSelected,!s),n))}," ",Object(aa.a)(this.props.file.date))))}}]),a}(n.Component),ra=Object(u.c)((function(e){return{selected:e.explorer.selected}}),(function(){return{}}))(Object(Ie.a)((function(e){return{selected:{"&:hover":{},backgroundColor:Object(y.d)(e.palette.primary.main,.18)},selectedShared:{"&:hover":{},backgroundColor:Object(y.d)(e.palette.primary.main,.18)},notSelected:{"&:hover":{backgroundColor:e.palette.action.hover}},icon:{verticalAlign:"middle",marginRight:"20px",color:e.palette.text.secondary},tableIcon:{marginRight:"20px",verticalAlign:"middle"},folderNameSelected:{color:"dark"===e.palette.type?"#fff":e.palette.primary.dark,fontWeight:"500",userSelect:"none"},folderNameNotSelected:{color:e.palette.text.secondary,userSelect:"none"},folderName:{marginRight:"20px",display:"flex",alignItems:"center"},hideAuto:Object(I.a)({},e.breakpoints.down("sm"),{display:"none"}),tableRow:{padding:"10px 16px"},checkIcon:{color:e.palette.primary.main},active:{backgroundColor:Object(y.d)(e.palette.primary.main,.1)}}}))(Object(s.k)(na))),oa=a(7157),ia=a(375),ca=a(7156);function la(e){var t=e.isListView,a=e.folder,n=e.onIconClick,o=e.contextMenu,i=e.handleClick,c=e.handleDoubleClick,l=e.className,s=e.pref,u=Object(ca.a)({accept:"object",drop:function(){return{folder:a}},collect:function(e){return{isOver:e.isOver(),canDrop:e.canDrop()}}}),p=Object(D.a)(u,2),d=p[0],m=d.canDrop,f=d.isOver,h=p[1],g=m&&f;return t?r.a.createElement(ra,{pref:s,dref:h,className:l,onIconClick:n,contextMenu:o,handleClick:i,handleDoubleClick:c,file:a,isActive:g}):r.a.createElement("div",{ref:h},r.a.createElement($e,{folder:a,onIconClick:n,isActive:g}))}var sa=a(438),ua=function(){var e=Object(n.useRef)(!1),t=document.querySelector("#explorer-container"),a=function a(){t.scrollTop+=10;var n=t.offsetHeight+t.scrollTop>=t.scrollHeight;e.current&&!n&&window.requestAnimationFrame(a)},r=function a(){t.scrollTop-=10,e.current&&t.scrollTop>0&&window.requestAnimationFrame(a)},o=Object(sa.throttle)((function(t){var n=t.clientY<100,o=window.innerHeight-t.clientY<100;e.current||!n&&!o?n||o||(e.current=!1):(e.current=!0,n&&window.requestAnimationFrame(r),o&&window.requestAnimationFrame(a))}),300);return{addEventListenerForWindow:function(){window.addEventListener("dragover",o,!1)},removeEventListenerForWindow:function(){window.removeEventListener("dragover",o,!1),e.current=!1}}},pa=Object(x.a)((function(){return{container:{padding:"7px"},fixFlex:{minWidth:0},dragging:{opacity:.4}}}));function da(e){var t,a=Object(u.e)((function(e){return e.navigator.path})),o=Object(u.e)((function(e){return e.viewUpdate.shareInfo})),i=Object(u.e)((function(e){return e.explorer.selected})),c=Object(u.e)((function(e){return e.viewUpdate.explorerViewMethod})),l=Object(u.e)((function(e){return e.navigator.path})),p=Object(s.h)(),d=Object(u.d)(),m=Object(n.useCallback)((function(e,t){return d(Object(ne.d)(e,t))}),[d]),f=Object(n.useCallback)((function(e){return d(Object(ne.K)(e))}),[d]),h=Object(n.useCallback)((function(e){return d(Object(ne.j)(e))}),[d]),g=(Object(n.useCallback)((function(e,t,a,n){return d(Object(ne.S)(e,t,a,n))}),[d]),Object(n.useCallback)((function(e,t){return d(Object(ne.h)(e,t))}),[d])),b=(Object(n.useCallback)((function(e){return d(Object(ne.s)(e))}),[d]),Object(n.useCallback)((function(e){return d(Object(ne.v)(e))}),[d])),E=Object(n.useCallback)((function(e,t){return d(E(e,t))}),[d]),v=pa(),O=function(t){"up"!==e.file.type&&(t.preventDefault(),-1===i.findIndex((function(t){return t===e.file}))&&f([e.file]),m("file",!0))},j=function(t){d(Object(ne.G)(e.file,t,e.index))},w=function(){h("/"===a?a+e.file.name:a+"/"+e.file.name)},k=function(t){"up"!==e.file.type?(j(t),"dir"!==e.file.type||t.ctrlKey||t.metaKey||t.shiftKey||w()):h(Object(N.n)(l))},y=function(){"up"!==e.file.type&&("dir"!==e.file.type?b(o):w())},x=function(e){return e.stopPropagation(),e.shiftKey||(e.ctrlKey=!0),j(e),!1},C=ua(),S=C.addEventListenerForWindow,T=C.removeEventListenerForWindow,P=Object(oa.a)({item:{object:e.file,type:"object",selected:Object(it.a)(i),viewMethod:c},begin:function(){S()},end:function(e,t){T();var a=t.getDropResult();e&&a&&a.folder&&(e.object.id===a.folder.id&&e.object.type===a.folder.type||g(e.object,a.folder))},canDrag:function(){return!Ne.a.isMobile()&&Ne.a.isHomePage(p.pathname)},collect:function(e){return{isDragging:e.isDragging()}}}),L=Object(D.a)(P,3),F=L[0].isDragging,R=L[1],M=L[2];return Object(n.useEffect)((function(){M(Object(ia.a)(),{captureDraggingState:!0})}),[]),"list"===c?r.a.createElement(r.a.Fragment,null,"dir"===e.file.type&&r.a.createElement(la,{isListView:!0,pref:R,className:Le()(v.container,Object(I.a)({},v.dragging,F)),onIconClick:x,contextMenu:O,handleClick:k,handleDoubleClick:y.bind(this),folder:e.file}),"dir"!==e.file.type&&r.a.createElement(ra,{pref:R,className:Le()(v.container,Object(I.a)({},v.dragging,F)),onIconClick:x,contextMenu:O,handleClick:k,handleDoubleClick:y.bind(this),file:e.file})):r.a.createElement("div",{ref:R,className:Le()((t={},Object(I.a)(t,v.container,"list"!==c),Object(I.a)(t,v.dragging,F),t))},r.a.createElement("div",{className:v.fixFlex,onContextMenu:O,onClick:k,onDoubleClick:y.bind(this)},"dir"===e.file.type&&"list"!==c&&r.a.createElement(la,{isListView:!1,onIconClick:x,folder:e.file}),"file"===e.file.type&&"icon"===c&&r.a.createElement(Je,{onIconClick:x,ref:R,file:e.file}),"file"===e.file.type&&"smallIcon"===c&&r.a.createElement(qe,{onIconClick:x,file:e.file})))}var ma=a(72);var fa=Object(x.a)((function(e){var t;return{paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary,margin:"10px"},root:Object(I.a)({padding:"10px"},e.breakpoints.up("sm"),{height:"calc(100vh - 113px)"}),rootTable:Object(I.a)({padding:"0px",backgroundColor:e.palette.background.paper.white},e.breakpoints.up("sm"),{height:"calc(100vh - 113px)"}),typeHeader:{margin:"10px 25px",color:"#6b6b6b",fontWeight:"500"},loading:{justifyContent:"center",display:"flex",marginTop:"40px"},errorBox:{padding:e.spacing(4)},errorMsg:{marginTop:"10px"},hideAuto:Object(I.a)({},e.breakpoints.down("sm"),{display:"none"}),flexFix:{minWidth:0},upButton:{marginLeft:"20px",marginTop:"10px",marginBottom:"10px"},clickAway:{height:"100%",width:"100%"},rootShare:{height:"100%",minHeight:500},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1},gridContainer:(t={},Object(I.a)(t,e.breakpoints.down("sm"),{gridTemplateColumns:"repeat(auto-fill,minmax(180px,1fr))!important"}),Object(I.a)(t,e.breakpoints.up("md"),{gridTemplateColumns:"repeat(auto-fill,minmax(220px,1fr))!important"}),Object(I.a)(t,"display","grid!important"),t),gridItem:{flex:"1 1 220px!important"}}})),ha={DELETE_FILE:"del",SELECT_ALL_SHOWED:"".concat(Object(N.l)()?"command":"ctrl","+a"),SELECT_ALL:"".concat(Object(N.l)()?"command":"ctrl","+shift+a"),DESELECT_ALL:"esc"};function ga(e){var t,a=e.share,o=Object(re.a)("application",{keyPrefix:"fileManager"}).t,i=Object(s.h)(),c=Object(u.d)(),l=Object(u.e)((function(e){return e.explorer.selected})),p=Object(u.e)((function(e){return e.explorer.search})),d=Object(u.e)((function(e){return e.viewUpdate.navigatorLoading})),m=Object(u.e)((function(e){return e.navigator.path})),f=Object(u.e)((function(e){return e.viewUpdate.sortMethod})),h=Object(u.e)((function(e){return e.viewUpdate.navigatorErrorMsg})),g=Object(u.e)((function(e){return e.viewUpdate.navigatorError})),b=Object(u.e)((function(e){return e.viewUpdate.explorerViewMethod})),E=Object(n.useCallback)((function(){return c(Object(ne.x)())}),[c]),v=Object(n.useCallback)((function(e){return c(Object(ne.K)(e))}),[c]),O=Object(n.useCallback)((function(e,t){return c(Object(ne.d)(e,t))}),[c]),j=Object(n.useCallback)((function(e){return c(ne.g.actions.changeSortMethod(e))}),[c]),w=Object(n.useCallback)((function(){return c(ne.g.actions.selectAll())}),[c]),k=function(){var e=Object(u.e)((function(e){return e.explorer.fileList})),t=Object(u.e)((function(e){return e.explorer.dirList})),a=Object(u.e)((function(e){return e.viewUpdate.pagination})),r=Object(n.useMemo)((function(){var n,r,o,i=(n=[].concat(Object(it.a)(t),Object(it.a)(e)),r=a.size,o=a.page,-1===r?n:n.slice((o-1)*r,o*r)),c=[],l=[];i.forEach((function(e){return"dir"===e.type?c.push(e):l.push(e)}));var s=a.size*(a.page-1);return{dirList:c,fileList:l,startIndex:s}}),[t,e,a]);return{dirList:r.dirList,fileList:r.fileList,startIndex:r.startIndex}}(),y=k.dirList,x=k.fileList,C=k.startIndex,S={DELETE_FILE:function(){l.length>0&&!a&&E()},SELECT_ALL_SHOWED:function(e){e.preventDefault(),l.length>=y.length+x.length?v([]):v([].concat(Object(it.a)(y),Object(it.a)(x)))},SELECT_ALL:function(e){e.preventDefault(),w()},DESELECT_ALL:function(e){e.preventDefault(),v([])}};Object(n.useEffect)((function(){return Object(ht.configure)({ignoreTags:["input","select","textarea"]})}),[]);var N=fa(),T=Ne.a.isHomePage(i.pathname),P=!d&&(0!==y.length||0!==x.length),L=Object(n.useMemo)((function(){return r.a.createElement(ct.a,{className:N.table},r.a.createElement(lt.a,null,r.a.createElement(st.a,null,r.a.createElement(ut.a,null,r.a.createElement(ft.a,{active:"namePos"===f||"nameRev"===f,direction:"namePos"===f?"asc":"des",onClick:function(){j("namePos"===f?"nameRev":"namePos")}},o("name"),"namePos"===f||"nameRev"===f?r.a.createElement("span",{className:N.visuallyHidden},"nameRev"===f?"sorted descending":"sorted ascending"):null)),r.a.createElement(ut.a,{className:N.hideAuto},r.a.createElement(ft.a,{active:"sizePos"===f||"sizeRes"===f,direction:"sizePos"===f?"asc":"des",onClick:function(){j("sizePos"===f?"sizeRes":"sizePos")}},o("size"),"sizePos"===f||"sizeRes"===f?r.a.createElement("span",{className:N.visuallyHidden},"sizeRes"===f?"sorted descending":"sorted ascending"):null)),r.a.createElement(ut.a,{className:N.hideAuto},r.a.createElement(ft.a,{active:"modifyTimePos"===f||"modifyTimeRev"===f,direction:"modifyTimePos"===f?"asc":"des",onClick:function(){j("modifyTimePos"===f?"modifyTimeRev":"modifyTimePos")}},o("lastModified"),"modifyTimePos"===f||"modifyTimeRev"===f?r.a.createElement("span",{className:N.visuallyHidden},"sizeRes"===f?"sorted descending":"sorted ascending"):null)))),r.a.createElement(pt.a,null,Ne.a.isMobile()&&"/"!==m&&r.a.createElement(da,{file:{type:"up",name:o("backToParentFolder")}}),y.map((function(e,t){return r.a.createElement(da,{key:e.id,file:e,index:C+t})})),x.map((function(e,t){return r.a.createElement(da,{key:e.id,file:e,index:C+y.length+t})}))))}),[y,x,m,f,j,N]),F=Object(n.useMemo)((function(){return r.a.createElement("div",{className:N.flexFix},0!==y.length&&r.a.createElement(r.a.Fragment,null,r.a.createElement(U.a,{"data-clickAway":"true",variant:"body2",className:N.typeHeader},o("folders")),r.a.createElement(dt.a,{"data-clickAway":"true",container:!0,spacing:0,alignItems:"flex-start",className:N.gridContainer},y.map((function(e,t){return r.a.createElement(dt.a,{key:e.id,item:!0,className:N.gridItem},r.a.createElement(da,{key:e.id,file:e,index:C+t}))})))),0!==x.length&&r.a.createElement(r.a.Fragment,null,r.a.createElement(U.a,{"data-clickAway":"true",variant:"body2",className:N.typeHeader},o("files")),r.a.createElement(dt.a,{"data-clickAway":"true",container:!0,spacing:0,alignItems:"flex-start",className:N.gridContainer},x.map((function(e,t){return r.a.createElement(dt.a,{className:N.gridItem,key:e.id,item:!0},r.a.createElement(da,{key:e.id,index:C+y.length+t,file:e}))})))))}),[y,x,N]),D="list"===b?L:F;return r.a.createElement("div",{onContextMenu:function(e){e.preventDefault(),p||Ne.a.isSharePage(i.pathname)||d||O("empty",!0)},onClick:function(e){e.target.dataset.clickaway&&v([])},className:Le()((t={},Object(I.a)(t,N.root,"list"!==b),Object(I.a)(t,N.rootTable,"list"===b),Object(I.a)(t,N.rootShare,a),t),N.button)},r.a.createElement(ht.GlobalHotKeys,{handlers:S,allowChanges:!0,keyMap:ha}),r.a.createElement(Xt,{share:a}),r.a.createElement($t.default,null),g&&r.a.createElement(A.a,{elevation:1,className:N.errorBox},r.a.createElement(U.a,{variant:"h5",component:"h3"},o("listError")),r.a.createElement(U.a,{color:"textSecondary",className:N.errorMsg},h.message)),d&&!g&&r.a.createElement("div",{className:N.loading},r.a.createElement(mt.a,null)),!p&&T&&0===y.length&&0===x.length&&!d&&!g&&r.a.createElement(ma.a,{primary:o("dropFileHere"),secondary:o("orClickUploadButton")}),(p&&0===y.length&&0===x.length&&!d&&!g||0===y.length&&0===x.length&&!d&&!g&&!T)&&r.a.createElement(ma.a,{primary:o("nothingFound")}),P&&D)}var ba=a(248),Ea=a(59),va=a.n(Ea),Oa=a(376),ja=a.n(Oa),wa=a(443),ka=a.n(wa),ya=Object(x.a)((function(e){return{expandMore:{color:"#8d8d8d"},active:{boxShadow:"0 0 0 2px "+e.palette.primary.light},button:{textTransform:"none"}}}));function xa(e){var t=r.a.useRef(null),a=Object(ca.a)({accept:"object",drop:function(){if(!e.more)return{folder:{id:-1,path:e.path,name:"/"===e.folder?"":e.folder}};t.current.click()},collect:function(e){return{isOver:e.isOver(),canDrop:e.canDrop()}}}),o=Object(D.a)(a,2),i=o[0],c=i.canDrop,l=i.isOver,s=o[1],u=c&&l;Object(n.useEffect)((function(){e.more&&u&&t.current.click()}),[u]);var p=ya();return r.a.createElement("span",{onClick:e.onClick,ref:t},r.a.createElement(B.a,{ref:s,className:Le()(Object(I.a)({},p.active,u),p.button),component:"span",title:e.title},e.more&&r.a.createElement(ka.a,null),!e.more&&r.a.createElement(r.a.Fragment,null,e.folder,e.last&&r.a.createElement(ja.a,{className:p.expandMore}))))}var Ca=a(62),Sa=Object(x.a)((function(e){return{active:{border:"2px solid "+e.palette.primary.light}}}));function Na(e){var t=Object(ca.a)({accept:"object",drop:function(){console.log({folder:{id:-1,path:e.path,name:"/"===e.folder?"":e.folder}})},collect:function(e){return{isOver:e.isOver(),canDrop:e.canDrop()}}}),a=Object(D.a)(t,2),o=a[0],i=o.canDrop,c=o.isOver,l=a[1],s=i&&c;Object(n.useEffect)((function(){e.setActiveStatus(e.id,s)}),[s]);var u=Sa();return r.a.createElement(bt.a,{ref:l,className:Le()(Object(I.a)({},u.active,s)),onClick:function(t){return e.navigateTo(t,e.id)}},r.a.createElement(gt.a,null,r.a.createElement(Qe.a,null)),r.a.createElement(Ca.a,{primary:e.folder}))}function Ta(e){for(var t,a=e.folders.length,n=[],o=0;o<e.folders.length;o++)n[o]=!1;var i=function(r,o){if(n[r]=o,o)clearTimeout(t);else{var i=!0;n.forEach((function(e){e&&(i=!1)})),i&&(a<=0?t=setTimeout((function(){e.onClose()}),100):a--)}console.log(n)};return r.a.createElement(r.a.Fragment,null,e.folders.map((function(t,a){return r.a.createElement(Na,{key:a,path:"/"+e.folders.slice(0,a).join("/"),navigateTo:e.navigateTo,id:a,setActiveStatus:i,folder:t})})))}var Pa=a(235),La=a(159),Fa=function(e){Object(se.a)(a,e);var t=Object(ue.a)(a);function a(e){var n;return Object(ie.a)(this,a),(n=t.call(this,e)).search=void 0,n.currentID=0,n.state={hidden:!1,hiddenFolders:[],folders:[],anchorEl:null,hiddenMode:!1,anchorHidden:null},n.componentDidMount=function(){var e=new URL(Object(N.h)(window.location.href)).searchParams.get("path");n.renderPath(null===e?"/":e),n.props.isShare||n.props.handleDesktopToggle(!0),window.onpopstate=function(){var e=new URL(Object(N.h)(window.location.href)).searchParams.get("path");null!==e&&n.props.navigateToPath(e)}},n.renderPath=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;n.props.setNavigatorError(!1,null),n.setState({folders:null!==e?e.substr(1).split("/"):n.props.path.substr(1).split("/")});var t=null!==e?e:n.props.path;Object(La.a)(t,n.props.share,n.search?n.search.keywords:"",n.search?n.search.searchPath:"").then((function(e){n.currentID=e.data.parent,n.props.updateFileList(e.data.objects),n.props.setNavigatorLoadingStatus(!1),n.search||Object(N.q)("path",encodeURIComponent(t)),e.data.policy&&n.props.setCurrentPolicy({id:e.data.policy.id,name:e.data.policy.name,type:e.data.policy.type,maxSize:e.data.policy.max_size,allowedSuffix:e.data.policy.file_type})})).catch((function(e){n.props.setNavigatorError(!0,e)})),n.checkOverFlow(!0)},n.redresh=function(e){n.props.setNavigatorLoadingStatus(!0),n.props.setNavigatorError(!1,"error"),n.renderPath(e)},n.UNSAFE_componentWillReceiveProps=function(e){n.props.search!==e.search&&(n.search=e.search),n.props.path!==e.path&&n.renderPath(e.path),n.props.refresh!==e.refresh&&n.redresh(e.path)},n.componentDidUpdate=function(e,t){var a;n.state.folders!==t.folders&&n.checkOverFlow(!0),n.props.drawerDesktopOpen!==e.drawerDesktopOpen&&(a=500,new Promise((function(e){return setTimeout(e,a)}))).then((function(){return n.checkOverFlow()}))},n.checkOverFlow=function(e){if((!n.overflowInitLock||e)&&null!==n.element.current){var t=n.element.current.offsetHeight<n.element.current.scrollHeight||n.element.current.offsetWidth<n.element.current.scrollWidth;t&&(n.overflowInitLock=!0,n.setState({hiddenMode:!0})),!t&&n.state.hiddenMode&&n.setState({hiddenMode:!1})}},n.navigateTo=function(e,t){t===n.state.folders.length-1?n.setState({anchorEl:e.currentTarget}):-1===t&&1===n.state.folders.length&&""===n.state.folders[0]?(n.props.refreshFileList(),n.handleClose()):-1===t?(n.props.navigateToPath("/"),n.handleClose()):(n.props.navigateToPath("/"+n.state.folders.slice(0,t+1).join("/")),n.handleClose())},n.handleClose=function(){n.setState({anchorEl:null,anchorHidden:null,anchorSort:null})},n.showHiddenPath=function(e){n.setState({anchorHidden:e.currentTarget})},n.performAction=function(e){if(n.handleClose(),"refresh"!==e){var t=n.props.path.split("/"),a=[{id:n.currentID,type:"dir",name:t.pop(),path:1===t.length?"/":t.join("/")}];switch(e){case"share":n.props.setSelectedTarget(a),n.props.openShareDialog();break;case"newfolder":n.props.openCreateFolderDialog();break;case"compress":n.props.setSelectedTarget(a),n.props.openCompressDialog();break;case"newFile":n.props.openCreateFileDialog()}}else n.redresh()},n.element=r.a.createRef(),n}return Object(ce.a)(a,[{key:"componentWillUnmount",value:function(){this.props.updateFileList([])}},{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.t,o=Ne.a.isHomePage(this.props.location.pathname),i=h.a.GetUser(),c=r.a.createElement(Et.a,{id:"presentFolderMenu",anchorEl:this.state.anchorEl,open:Boolean(this.state.anchorEl),onClose:this.handleClose,disableAutoFocusItem:!0},r.a.createElement(bt.a,{onClick:function(){return e.performAction("refresh")}},r.a.createElement(gt.a,null,r.a.createElement(Kt.a,null)),n("fileManager.refresh")),!this.props.search&&o&&r.a.createElement("div",null,r.a.createElement(G.a,null),r.a.createElement(bt.a,{onClick:function(){return e.performAction("share")}},r.a.createElement(gt.a,null,r.a.createElement(Gt.a,null)),n("fileManager.share")),i.group.compress&&r.a.createElement(bt.a,{onClick:function(){return e.performAction("compress")}},r.a.createElement(gt.a,null,r.a.createElement(Ot.a,null)),n("fileManager.compress")),r.a.createElement(G.a,null),r.a.createElement(bt.a,{onClick:function(){return e.performAction("newfolder")}},r.a.createElement(gt.a,null,r.a.createElement(Tt.a,null)),n("fileManager.newFolder")),r.a.createElement(bt.a,{onClick:function(){return e.performAction("newFile")}},r.a.createElement(gt.a,null,r.a.createElement(Ht.j,null)),n("fileManager.newFile"))));return r.a.createElement("div",{className:Le()(Object(I.a)({},a.roundBorder,this.props.isShare),a.container)},r.a.createElement("div",{className:a.navigatorContainer},r.a.createElement("div",{className:a.nav,ref:this.element},r.a.createElement("span",null,r.a.createElement(xa,{folder:"/",path:"/",onClick:function(t){return e.navigateTo(t,-1)}}),r.a.createElement(va.a,{className:a.rightIcon})),this.state.hiddenMode&&r.a.createElement("span",null,r.a.createElement(xa,{more:!0,title:n("fileManager.showFullPath"),onClick:this.showHiddenPath}),r.a.createElement(Et.a,{id:"hiddenPathMenu",anchorEl:this.state.anchorHidden,open:Boolean(this.state.anchorHidden),onClose:this.handleClose,disableAutoFocusItem:!0},r.a.createElement(Ta,{onClose:this.handleClose,folders:this.state.folders.slice(0,-1),navigateTo:this.navigateTo})),r.a.createElement(va.a,{className:a.rightIcon}),r.a.createElement(xa,{folder:this.state.folders.slice(-1),path:"/"+this.state.folders.slice(0,-1).join("/"),last:!0,onClick:function(t){return e.navigateTo(t,e.state.folders.length-1)}}),c),!this.state.hiddenMode&&this.state.folders.map((function(t,n,o){return r.a.createElement("span",{key:n},""!==t&&r.a.createElement("span",null,r.a.createElement(xa,{folder:t,path:"/"+o.slice(0,n).join("/"),last:n===o.length-1,onClick:function(t){return e.navigateTo(t,n)}}),n===o.length-1&&c,n!==o.length-1&&r.a.createElement(va.a,{className:a.rightIcon})))}))),r.a.createElement("div",{className:a.optionContainer},r.a.createElement(Pa.a,{isSmall:!0}))),r.a.createElement(G.a,null))}}]),a}(n.Component),Da=Object(u.c)((function(e){return{path:e.navigator.path,refresh:e.navigator.refresh,drawerDesktopOpen:e.viewUpdate.open,viewMethod:e.viewUpdate.explorerViewMethod,search:e.explorer.search,sortMethod:e.viewUpdate.sortMethod}}),(function(e){return{navigateToPath:function(t){e(Object(ne.j)(t))},navigateUp:function(){e(Object(ne.k)())},setNavigatorError:function(t,a){e(Object(ne.I)(t,a))},updateFileList:function(t){e(ne.g.actions.updateFileList(t))},setNavigatorLoadingStatus:function(t){e(Object(ne.J)(t))},refreshFileList:function(){e(Object(ne.C)())},setSelectedTarget:function(t){e(Object(ne.K)(t))},openCreateFolderDialog:function(){e(Object(ne.o)())},openCreateFileDialog:function(){e(Object(ne.n)())},openShareDialog:function(){e(Object(ne.A)())},handleDesktopToggle:function(t){e(Object(ne.i)(t))},openCompressDialog:function(){e(Object(ne.l)())},setCurrentPolicy:function(t){e(Object(Yt.setCurrentPolicy)(t))}}}))(Object(Ie.a)((function(e){var t;return{container:(t={},Object(I.a)(t,e.breakpoints.down("xs"),{display:"none"}),Object(I.a)(t,"backgroundColor",e.palette.background.paper),t),navigatorContainer:{display:"flex",justifyContent:"space-between"},nav:{height:"48px",padding:"5px 15px",display:"flex"},optionContainer:{paddingTop:"6px",marginRight:"10px"},rightIcon:{marginTop:"6px",verticalAlign:"top",color:"#868686"},expandMore:{color:"#8d8d8d"},roundBorder:{borderRadius:"4px 4px 0 0"}}}))(Object(s.k)(Object(Jt.a)()(Fa)))),Ia=a(89),Ra=a(7037),Ma=a(7041),Aa=a(53),_a=a(103),Ua=Object(x.a)((function(e){return{loader:{width:"100%"}}})),Wa=function(e){return r.a.createElement(ee.a,{backgroundColor:e.dark?"#333":"#f5f6f7",foregroundColor:e.dark?"#636363":"#eee",className:e.className})};var za=function(){var e=Object(we.a)(),t=Ua();return r.a.createElement("div",null,r.a.createElement(Wa,{dark:"dark"===e.palette.type,className:t.loader}))},Ba=a(486),Ga=a(478),Ha=a(7035),Va=a(7036),qa=a(292),Ka=Object(x.a)((function(e){return{drawer:{width:350,flexShrink:0},drawerPaper:{width:350,boxShadow:"0px 8px 10px -5px rgb(0 0 0 / 20%), 0px 16px 24px 2px rgb(0 0 0 / 14%), 0px 6px 30px 5px rgb(0 0 0 / 12%)"},drawerContainer:{overflow:"auto"},header:{display:"flex",padding:e.spacing(3),placeContent:"space-between"},fileIcon:{width:33,height:33},fileIconSVG:{fontSize:20},folderIcon:{color:e.palette.text.secondary,width:33,height:33},fileName:{marginLeft:e.spacing(2),marginRight:e.spacing(2),wordBreak:"break-all",flexGrow:2},closeIcon:{placeSelf:"flex-start",marginTop:2},propsContainer:{padding:e.spacing(3)},propsLabel:{color:e.palette.text.secondary,padding:e.spacing(1)},propsTime:{color:e.palette.text.disabled,padding:e.spacing(1)},propsValue:{padding:e.spacing(1),wordBreak:"break-all"},appBar:{position:"relative"},title:{marginLeft:e.spacing(2),flex:1}}})),Ya=r.a.forwardRef((function(e,t){return r.a.createElement(Ha.a,Object.assign({direction:"up",ref:t},e))}));function Ja(){var e=Object(re.a)().t,t=Object(u.d)(),a=Object(u.e)((function(e){return e.explorer.sideBarOpen})),o=Object(u.e)((function(e){return e.explorer.selected})),i=Object(n.useCallback)((function(e){return t(Object(Yt.setSideBar)(e))}),[t]),c=Object(n.useCallback)((function(e,a,n,r){return t(Object(ne.S)(e,a,n,r))}),[t]),l=Object(n.useCallback)((function(e){return t(Object(ne.j)(e))}),[t]),s=Object(u.e)((function(e){return e.explorer.search})),p=Object(n.useState)(null),d=Object(D.a)(p,2),m=d[0],f=d[1],h=Object(n.useState)(null),g=Object(D.a)(h,2),b=g[0],E=g[1];Object(n.useEffect)((function(){var e;E(null),a&&(1!==o.length?i(!1):(f(o[0]),e=o[0],q.c.get("/object/property/"+e.id+"?trace_root="+(s?"true":"false")+"&is_folder="+("dir"===e.type).toString()).then((function(e){E(e.data)})).catch((function(e){c("top","right",e.message,"error")}))))}),[o,a]);var v=Ka(),O=[{label:e("fileManager.size"),value:function(t,a){return Object(N.r)(t.size)+e("fileManager.bytes",{bytes:t.size.toLocaleString()})},show:function(e){return!0}},{label:e("fileManager.storagePolicy"),value:function(e,t){return e.policy},show:function(e){return"file"===e.type}},{label:e("fileManager.childFolders"),value:function(t,a){return e("fileManager.childCount",{num:t.child_folder_num.toLocaleString()})},show:function(e){return"dir"===e.type}},{label:e("fileManager.childFiles"),value:function(t,a){return e("fileManager.childCount",{num:t.child_file_num.toLocaleString()})},show:function(e){return"dir"===e.type}},{label:e("fileManager.parentFolder"),value:function(t,a){var n=""===t.path?a.path:t.path,o=Object(N.g)(n);return r.a.createElement(De.a,{title:n},r.a.createElement(H.a,{href:"javascript:void",onClick:function(){return l(n)}},""===o?e("fileManager.rootFolder"):o))},show:function(e){return!0}},{label:e("fileManager.modifiedAt"),value:function(e,t){return Object(aa.a)(e.updated_at)},show:function(e){return!0}},{label:e("fileManager.createdAt"),value:function(e){return Object(aa.a)(e.created_at)},show:function(e){return!0}}],j=r.a.createElement(dt.a,{container:!0,className:v.propsContainer},!b&&r.a.createElement(za,null),b&&r.a.createElement(r.a.Fragment,null,O.map((function(e){if(e.show(m))return r.a.createElement(r.a.Fragment,null,r.a.createElement(dt.a,{item:!0,xs:5,className:v.propsLabel},e.label),r.a.createElement(dt.a,{item:!0,xs:7,className:v.propsValue},e.value(b,m)))})),"dir"===m.type&&r.a.createElement(dt.a,{item:!0,xs:12,className:v.propsTime},r.a.createElement(qa.a,{i18nKey:"fileManager.statisticAt",components:[r.a.createElement("span",{key:0}),r.a.createElement(_a.a,{key:1,datetime:b.query_date,locale:e("timeAgoLocaleCode",{ns:"common"})}),r.a.createElement("span",{key:2})]}))));return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ba.a,{smUp:!0},r.a.createElement(Ga.a,{fullScreen:!0,open:a,TransitionComponent:Ya},m&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Va.a,{className:v.appBar},r.a.createElement(Ra.a,null,r.a.createElement(Aa.a,{edge:"start",color:"inherit",onClick:function(){return i(!1)},"aria-label":"close"},r.a.createElement(Ma.a,null)),r.a.createElement(U.a,{variant:"h6",className:v.title},m.name))),j))),r.a.createElement(Ba.a,{xsDown:!0},r.a.createElement(Ia.a,{className:v.drawer,variant:"persistent",classes:{paper:v.drawerPaper},open:a,anchor:"right"},r.a.createElement(Ra.a,null),r.a.createElement("div",{className:v.drawerContainer},m&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:v.header},"dir"===m.type&&r.a.createElement(Ue.a,{className:v.folderIcon}),"dir"!==m.type&&r.a.createElement(Re.a,{isUpload:!0,className:v.fileIcon,iconClassName:v.fileIconSVG,fileName:m.name}),r.a.createElement("div",{className:v.fileName},r.a.createElement(U.a,{variant:"h6",gutterBottom:!0},m.name)),r.a.createElement(Aa.a,{onClick:function(){return i(!1)},className:v.closeIcon,"aria-label":"close",size:"small"},r.a.createElement(Ma.a,null)))),r.a.createElement(G.a,null),j))))}var Za=a(7161),Qa=a(7155);function Xa(e){var t=Object(n.useRef)(null),a=Object(ca.a)({accept:"object",collect:function(e){return{isOver:e.isOver(),canDrop:e.canDrop()}}}),o=Object(D.a)(a,2),i=o[0],c=i.canDrop,l=i.isOver,s=o[1],u=c&&l;return Object(n.useEffect)((function(){u&&e.onClick&&"start-ellipsis"!==e.type&&"end-ellipsis"!==e.type&&(console.log("ss"),e.onClick())}),[u,t]),!e.isMobile||"start-ellipsis"!==e.type&&"end-ellipsis"!==e.type&&"page"!==e.type?r.a.createElement("div",{ref:t},r.a.createElement(Qa.a,Object.assign({ref:s},e))):e.selected?r.a.createElement("div",null,e.page," / ",e.count):r.a.createElement(r.a.Fragment,null)}var $a=a(128),en=Object(x.a)((function(e){return{root:{position:"fixed",bottom:23,background:e.palette.background.paper,borderRadius:24,boxShadow:" 0px 3px 5px -1px rgb(0 0 0 / 20%), 0px 6px 10px 0px rgb(0 0 0 / 14%), 0px 1px 18px 0px rgb(0 0 0 / 12%)",padding:"8px 4px 8px 4px",marginLeft:20},placeholder:{marginTop:80}}}));function tn(){var e=en(),t=Object(u.d)(),a=Object(u.e)((function(e){return e.explorer.fileList})),o=Object(u.e)((function(e){return e.explorer.dirList})),i=Object(u.e)((function(e){return e.viewUpdate.pagination})),c=Object(u.e)((function(e){return e.viewUpdate.navigatorLoading})),l=Object(s.h)(),p=Object(n.useCallback)((function(e){return t(Object(Se.h)(e))}),[t]),d=Object(n.useMemo)((function(){return Math.ceil((a.length+o.length)/i.size)}),[a,o,i.size]),f=Ne.a.isMobile(),h=Ne.a.isSharePage(l.pathname);return d>1&&!c?r.a.createElement(r.a.Fragment,null,!f&&!h&&r.a.createElement("div",{className:e.placeholder}),r.a.createElement($a.a,{enable:!0,element:f||h?null:document.querySelector("#explorer-container")},r.a.createElement("div",{className:e.root},r.a.createElement(Za.a,{renderItem:function(e){return r.a.createElement(Xa,Object.assign({count:d,isMobile:f},e))},color:"secondary",count:d,page:i.page,onChange:function(e,t){p(Object(m.a)(Object(m.a)({},i),{},{page:t}))}})))):r.a.createElement("div",null)}var an=a(69),nn=a.n(an),rn=function(e){Object(se.a)(a,e);var t=Object(ue.a)(a);function a(e){var n;return Object(ie.a)(this,a),(n=t.call(this,e)).image=r.a.createRef(),n}return Object(ce.a)(a,[{key:"componentWillUnmount",value:function(){this.props.setSelectedTarget([]),this.props.closeAllModals(),this.props.navigateTo("/")}},{key:"componentDidMount",value:function(){Ne.a.isHomePage(this.props.location.pathname)&&this.props.changeSubTitle(null)}},{key:"render",value:function(){var e,t=this.props.classes;return r.a.createElement("div",{className:Le()((e={},Object(I.a)(e,t.rootShare,this.props.share),Object(I.a)(e,t.root,!this.props.share),e))},r.a.createElement(xe.a,{backend:Ce.a},r.a.createElement(ba.default,{share:this.props.share}),r.a.createElement(Da,{isShare:this.props.isShare,share:this.props.share}),r.a.createElement("div",{className:t.explorer,id:"explorer-container"},r.a.createElement(ga,{share:this.props.share}),r.a.createElement(tn,null)),r.a.createElement(ot,null)),r.a.createElement(Ja,null))}}]),a}(n.Component),on=Object(u.c)((function(){return{}}),(function(e){return{changeSubTitle:function(t){e(Object(Se.b)(t))},setSelectedTarget:function(t){e(Object(ne.K)(t))},toggleSnackbar:function(t,a,n,r){e(Object(ne.S)(t,a,n,r))},closeAllModals:function(){e(Object(ne.f)())},navigateTo:function(t){e(Object(ne.j)(t))}}}))(nn()((function(e){return{root:Object(I.a)({display:"flex",flexDirection:"column",height:"calc(100vh - 64px)"},e.breakpoints.down("xs"),{height:"100%"}),rootShare:{display:"flex",flexDirection:"column",height:"100%",minHeight:500},explorer:{display:"flex",flexDirection:"column",overflowY:"auto"}}}))(Object(s.k)(rn))),cn=a(102),ln=a(7125),sn=a(7126),un=a(7127),pn=a(115),dn=a(7100),mn=a(109),fn=a.n(mn),hn=Object(x.a)((function(e){return{icon:{minWidth:38}}}));function gn(e){var t=e.options,a=e.anchorEl,n=e.handleClose,o=e.callback,i=e.selected,c=e.showIcon,l=void 0===c||c,s=hn();return r.a.createElement(Et.a,{id:"simple-menu",anchorEl:a,keepMounted:!0,open:Boolean(a),onClose:n},t.map((function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(bt.a,{style:{whiteSpace:"normal"},dense:!0,onClick:function(){return o(e)}},l&&r.a.createElement(gt.a,{className:s.icon},e.name!==i?r.a.createElement(dn.a,null):r.a.createElement(fn.a,null)),e.name))})))}var bn=a(160),En=r.a.lazy((function(){return a.e(10).then(a.bind(null,8084))})),vn=[{name:"PotPlayer",url:function(e,t){return"potplayer://".concat(e)}},{name:"VLC",url:function(e,t){return"vlc://".concat(e)}},{name:"IINA",url:function(e,t){return"iina://weblink?url=".concat(e)}},{name:"nPlayer",url:function(e,t){return"nplayer-".concat(e)}},{name:"MXPlayer (Free)",url:function(e,t){return"intent:".concat(e,"#Intent;package=com.mxtech.videoplayer.ad;S.title=").concat(t,";end")}},{name:"MXPlayer (Pro)",url:function(e,t){return"intent:".concat(e,"#Intent;package=com.mxtech.videoplayer.pro;S.title=").concat(t,";end")}}],On=Object(x.a)((function(e){return{layout:Object(I.a)({width:"auto",marginTop:30,marginBottom:20,marginLeft:e.spacing(3),marginRight:e.spacing(3)},e.breakpoints.up(1100+2*e.spacing(3)),{width:1100,marginLeft:"auto",marginRight:"auto"}),player:{height:"100vh",maxHeight:"calc(100vh - 180px)"},actions:{marginTop:e.spacing(2)},actionButton:{marginRight:e.spacing(1),marginTop:e.spacing(1)},"@global":{"video,.art-video-player,.art-bottom":{borderRadius:e.shape.borderRadius}}}}));function jn(){var e=Object(re.a)().t,t=Object(s.j)(),a=Object(s.h)(),o=new URLSearchParams(Object(s.h)().search),i=Object(s.i)().id,c=Object(u.d)(),l=Object(n.useCallback)((function(e,t,a,n){return c(Object(ne.S)(e,t,a,n))}),[c]),p=Object(cn.a)(o,t,a),d=p.title,m=p.path,f=Object(we.a)(),h=Object(n.useState)(null),g=Object(D.a)(h,2),b=g[0],E=g[1],v=Object(s.g)(),O=Object(n.useState)([]),j=Object(D.a)(O,2),w=j[0],k=j[1],y=Object(n.useState)([]),x=Object(D.a)(y,2),C=x[0],S=x[1],T=Object(n.useState)([]),P=Object(D.a)(T,2),L=P[0],F=P[1],I=Object(n.useState)(null),R=Object(D.a)(I,2),M=R[0],_=R[1],U=Object(n.useState)(""),W=Object(D.a)(U,2),z=W[0],G=W[1],H=Object(n.useState)(null),V=Object(D.a)(H,2),K=V[0],Y=V[1],J=Object(n.useState)(null),Z=Object(D.a)(J,2),Q=Z[0],X=Z[1],$=Ne.a.isSharePage(a.pathname),ee=Object(u.e)((function(e){return e.viewUpdate.sortMethod})),te=Yt.sortMethodFuncs[ee];Object(n.useEffect)((function(){return b&&b.on("ready",(function(){b.autoHeight=!0})),function(){null!==b&&!Object(N.m)()&&document.pictureInPictureEnabled&&b.playing&&(b.pip=!0,b.query(".art-video").addEventListener("leavepictureinpicture",(function(){b.pause()}),!1))}}),[b]);var ae=On();Object(n.useEffect)((function(){if(null!==b){var e=Object(q.e)($,i,o.get("id"),o.get("share_path"));e!==b.url&&(b.subtitle&&(b.subtitle.show=!1),b.switchUrl(e),m&&""!==m&&Object(La.a)(Object(N.a)(m),$?{key:i}:null,"","").then((function(e){k(e.data.objects.sort(te).filter((function(e){return"file"===e.type}))),F(e.data.objects.filter((function(e){return"file"===e.type&&-1!==Vt.n.indexOf(e.name.split(".").pop().toLowerCase())})))})))}}),[b,i,a,m]);var oe=function(t){if(null!==b){var a=t.name.split(".").pop().toLowerCase();b.subtitle.switch(Object(q.e)($,i,t.id,Object(Be.k)([Object(N.a)(o.get("share_path")),t.name])),{type:a}),b.subtitle.show=!0,G(t.name),l("top","center",e("fileManager.subtitleSwitchTo",{subtitle:t.name}),"info")}};Object(n.useEffect)((function(){if(w.length>0){var e=Object(N.e)(d)+".",t=w.filter((function(e){var t=e.name.split(".").pop().toLowerCase();return-1!==Vt.m.indexOf(t)})).sort((function(t,a){return t.name.startsWith(e)&&!a.name.startsWith(e)?-1:0}));t.length>0&&t[0].name.startsWith(e)&&oe(t[0]),S(t)}}),[w]);return r.a.createElement("div",{className:ae.layout},r.a.createElement(A.a,{className:ae.root,elevation:1},r.a.createElement(n.Suspense,{fallback:r.a.createElement(pn.a,null)},r.a.createElement(En,{option:{title:d,theme:f.palette.secondary.main,flip:!0,setting:!0,playbackRate:!0,aspectRatio:!0,hotkey:!0,pip:!0,fullscreen:!0,fullscreenWeb:!0,autoHeight:!0,whitelist:["*"],moreVideoAttr:{"webkit-playsinline":!0,playsInline:!0},lang:e("artPlayerLocaleCode",{ns:"common"})},className:ae.player,getInstance:function(e){return E(e)}}))),r.a.createElement("div",{className:ae.actions},r.a.createElement(B.a,{onClick:function(t){0!==C.length?_(t.currentTarget):l("top","right",e("fileManager.noSubtitleAvailable"),"warning")},className:ae.actionButton,startIcon:r.a.createElement(ln.a,null),variant:"outlined"},e("fileManager.subtitle")),L.length>=2&&r.a.createElement(B.a,{onClick:function(e){return Y(e.currentTarget)},className:ae.actionButton,startIcon:r.a.createElement(sn.a,null),variant:"outlined"},e("fileManager.playlist")),r.a.createElement(B.a,{onClick:function(e){return X(e.currentTarget)},className:ae.actionButton,startIcon:r.a.createElement(un.a,null),variant:"outlined"},e("fileManager.openInExternalPlayer"))),r.a.createElement(gn,{selected:z,options:C,callback:function(e){_(null),oe(e)},anchorEl:M,handleClose:function(){return _(null)}}),r.a.createElement(gn,{selected:d,options:L,callback:function(e){G(null),$&&(e.key=i),Object(N.m)()?window.location.href=Object(Yt.getViewerURL)("video",e,$):v.push(Object(Yt.getViewerURL)("video",e,$))},anchorEl:K,handleClose:function(){return Y(null)}}),r.a.createElement(gn,{showIcon:!1,options:vn,callback:function(e){var t={name:d};t.id=o.get("id"),t.path=Object(N.a)(m),$&&(t.key=i),X(null),Object(bn.a)(t).then((function(t){window.location.assign(e.url(t.data,d))})).catch((function(e){l("top","right",e.message,"error")}))},anchorEl:Q,handleClose:function(){return X(null)}}))}var wn=a(7128),kn=a(7129),yn=a(255),xn=Object(x.a)((function(e){return{cardContainer:{padding:e.spacing(1)},card:{maxWidth:400,margin:"0 auto"},actions:{display:"flex"},layout:Object(I.a)({width:"auto",marginTop:"50px",marginLeft:e.spacing(3),marginRight:e.spacing(3)},e.breakpoints.up(1100+2*e.spacing(3)),{width:1100,marginLeft:"auto",marginRight:"auto"}),shareTitle:{maxWidth:"200px"},avatarFile:{backgroundColor:e.palette.primary.light},avatarFolder:{backgroundColor:e.palette.secondary.light},gird:{marginTop:"30px"},loadMore:{textAlign:"right",marginTop:"20px",marginBottom:"40px"},badge:{marginLeft:e.spacing(1),height:17},orderSelect:{textAlign:"right",marginTop:5},cardAction:{marginTop:0}}}));function Cn(){var e=Object(re.a)("application",{keyPrefix:"share"}).t,t=Object(re.a)().t,a=xn(),o=Object(u.d)(),i=new URLSearchParams(Object(s.h)().search),c=Object(s.h)(),l=Object(s.g)(),p=Object(n.useCallback)((function(e,t,a,n){return o(Object(ne.S)(e,t,a,n))}),[o]),d=Object(n.useState)(1),m=Object(D.a)(d,2),f=m[0],h=m[1],g=Object(n.useState)(0),b=Object(D.a)(g,2),E=b[0],v=b[1],O=Object(n.useState)([]),j=Object(D.a)(O,2),w=j[0],k=j[1],y=Object(n.useState)("created_at DESC"),x=Object(D.a)(y,2),C=x[0],S=x[1],N=Object(n.useCallback)((function(t,a,n){var r=n.split(" ");q.c.get("/share/search?page="+a+"&order_by="+r[0]+"&order="+r[1]+"&keywords="+encodeURIComponent(t)).then((function(e){v(e.data.total),k(e.data.items)})).catch((function(){p("top","right",e("listLoadingError"),"error")}))}),[]);Object(n.useEffect)((function(){var t=i.get("keywords");t?N(t,f,C):p("top","right",e("enterKeywords"),"warning")}),[c]);return r.a.createElement("div",{className:a.layout},r.a.createElement(dt.a,{container:!0},r.a.createElement(dt.a,{sm:6,xs:6},r.a.createElement(U.a,{color:"textSecondary",variant:"h4"},e("searchResult"))),r.a.createElement(dt.a,{sm:6,xs:6,className:a.orderSelect},r.a.createElement(W.a,null,r.a.createElement(yn.a,{color:"secondary",onChange:function(e){S(e.target.value);var t=i.get("keywords");N(t,f,e.target.value)},value:C},r.a.createElement(bt.a,{value:"created_at DESC"},e("createdAtDesc")),r.a.createElement(bt.a,{value:"created_at ASC"},e("createdAtAsc")),r.a.createElement(bt.a,{value:"downloads DESC"},e("downloadsDesc")),r.a.createElement(bt.a,{value:"downloads ASC"},e("downloadsAsc")),r.a.createElement(bt.a,{value:"views DESC"},e("viewsDesc")),r.a.createElement(bt.a,{value:"views ASC"},e("viewsAsc")))))),r.a.createElement(dt.a,{container:!0,spacing:24,className:a.gird},0===w.length&&r.a.createElement(ma.a,{primary:e("noRecords")}),w.map((function(n){return r.a.createElement(dt.a,{item:!0,xs:12,sm:4,key:n.id,className:a.cardContainer},r.a.createElement(wn.a,{className:a.card},r.a.createElement(kn.a,{classes:{action:a.cardAction},avatar:r.a.createElement("div",null,!n.is_dir&&r.a.createElement(Re.a,{fileName:n.source?n.source.name:"",isUpload:!0})," ",n.is_dir&&r.a.createElement(_.a,{className:a.avatarFolder},r.a.createElement(Qe.a,null))),action:r.a.createElement(De.a,{placement:"top",title:t("fileManager.open")},r.a.createElement(Aa.a,{onClick:function(){return l.push("/s/"+n.key)}},r.a.createElement(zt.a,null))),title:r.a.createElement(De.a,{placement:"top",title:n.source?n.source.name:e("sourceNotFound")},r.a.createElement(U.a,{noWrap:!0,className:a.shareTitle},n.source?n.source.name:e("sourceNotFound"))),subheader:r.a.createElement("span",null,r.a.createElement(qa.a,{i18nKey:"share.sharedAt",components:[r.a.createElement(_a.a,{key:0,datetime:n.create_date,locale:t("timeAgoLocaleCode",{ns:"common"})})]}))})))}))),r.a.createElement("div",{className:a.loadMore},r.a.createElement(Za.a,{count:Math.ceil(E/18),onChange:function(e,t){h(t);var a=i.get("keywords");N(a,t,C)},color:"secondary"}))," ")}var Sn=a(144),Nn=a.n(Sn),Tn=a(444),Pn=a.n(Tn),Ln=a(445),Fn=a.n(Ln),Dn=a(7130),In=a(479),Rn=a(480),Mn=a(482),An=a(7159),_n=a(7052),Un=a(163),Wn=a.n(Un),zn=function(e){Object(se.a)(a,e);var t=Object(ue.a)(a);function a(){var e;Object(ie.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={page:1,total:0,shareList:[],showPwd:null,orderBy:"created_at DESC"},e.componentDidMount=function(){e.loadList(1,e.state.orderBy)},e.showPwd=function(t){e.setState({showPwd:t})},e.handleClose=function(){e.setState({showPwd:null})},e.removeShare=function(t){q.c.delete("/share/"+t).then((function(){var a=e.state.shareList;a=a.filter((function(e){return e.key!==t})),e.setState({shareList:a,total:e.state.total-1}),e.props.toggleSnackbar("top","right",e.props.t("share.shareCanceled"),"success"),0===a.length&&e.loadList(1,e.state.orderBy)})).catch((function(t){e.props.toggleSnackbar("top","right",t.message,"error")}))},e.changePermission=function(t){var a=Math.random().toString(36).substr(2).slice(2,8),n=e.state.shareList,r=n.findIndex((function(e){return e.key===t}));q.c.patch("/share/"+t,{prop:"password",value:""===n[r].password?a:""}).then((function(t){n[r].password=t.data,e.setState({shareList:n})})).catch((function(t){e.props.toggleSnackbar("top","right",t.message,"error")}))},e.changePreviewOption=function(t){var a=e.state.shareList,n=a.findIndex((function(e){return e.key===t}));q.c.patch("/share/"+t,{prop:"preview_enabled",value:a[n].preview?"false":"true"}).then((function(t){a[n].preview=t.data,e.setState({shareList:a})})).catch((function(t){e.props.toggleSnackbar("top","right",t.message,"error")}))},e.loadList=function(t,a){var n=a.split(" ");q.c.get("/share?page="+t+"&order_by="+n[0]+"&order="+n[1]).then((function(t){e.setState({total:t.data.total,shareList:t.data.items})})).catch((function(){e.props.toggleSnackbar("top","right",e.props.t("share.listLoadingError"),"error")}))},e.handlePageChange=function(t,a){e.setState({page:a}),e.loadList(a,e.state.orderBy)},e.handleOrderChange=function(t){e.setState({orderBy:t.target.value}),e.loadList(e.state.page,t.target.value)},e.isExpired=function(e){return e.expire<-1||0===e.remain_downloads},e}return Object(ce.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.t;return r.a.createElement("div",{className:a.layout},r.a.createElement(dt.a,{container:!0},r.a.createElement(dt.a,{sm:6,xs:6},r.a.createElement(U.a,{color:"textSecondary",variant:"h4"},n("share.sharedFiles"))),r.a.createElement(dt.a,{sm:6,xs:6,className:a.orderSelect},r.a.createElement(W.a,null,r.a.createElement(yn.a,{color:"secondary",onChange:this.handleOrderChange,value:this.state.orderBy},r.a.createElement(bt.a,{value:"created_at DESC"},n("share.createdAtDesc")),r.a.createElement(bt.a,{value:"created_at ASC"},n("share.createdAtAsc")),r.a.createElement(bt.a,{value:"downloads DESC"},n("share.downloadsDesc")),r.a.createElement(bt.a,{value:"downloads ASC"},n("share.downloadsAsc")),r.a.createElement(bt.a,{value:"views DESC"},n("share.viewsDesc")),r.a.createElement(bt.a,{value:"views ASC"},n("share.viewsAsc")))))),r.a.createElement(dt.a,{container:!0,spacing:2,className:a.gird},0===this.state.shareList.length&&r.a.createElement(ma.a,{primary:n("share.noRecords")}),this.state.shareList.map((function(t){return r.a.createElement(dt.a,{item:!0,xs:12,sm:6,md:4,key:t.id,className:a.cardContainer},r.a.createElement(wn.a,{className:a.card},r.a.createElement(kn.a,{avatar:r.a.createElement("div",null,!t.is_dir&&r.a.createElement(Re.a,{fileName:t.source?t.source.name:"",isUpload:!0})," ",t.is_dir&&r.a.createElement(_.a,{className:a.avatarFolder},r.a.createElement(Qe.a,null))),title:r.a.createElement(De.a,{placement:"top",title:t.source?t.source.name:n("share.sourceNotFound")},r.a.createElement(U.a,{noWrap:!0,className:a.shareTitle},t.source?t.source.name:n("share.sourceNotFound"))),subheader:r.a.createElement("span",null,Object(aa.a)(t.create_date),e.isExpired(t)&&r.a.createElement(An.a,{size:"small",className:a.badge,label:n("share.expired")}))}),r.a.createElement(G.a,null),r.a.createElement(Dn.a,{disableActionSpacing:!0,style:{display:"block",textAlign:"right"}},r.a.createElement(De.a,{placement:"top",title:n("fileManager.open")},r.a.createElement(Aa.a,{onClick:function(){return e.props.history.push("/s/"+t.key+(""===t.password?"":"?password="+t.password))}},r.a.createElement(zt.a,{fontSize:"small"})))," ",""!==t.password&&r.a.createElement(r.a.Fragment,null,r.a.createElement(De.a,{placement:"top",title:n("share.changeToPublic"),onClick:function(){return e.changePermission(t.key)}},r.a.createElement(Aa.a,null,r.a.createElement(Nn.a,{fontSize:"small"}))),r.a.createElement(De.a,{placement:"top",title:n("share.viewPassword"),onClick:function(){return e.showPwd(t.password)}},r.a.createElement(Aa.a,null,r.a.createElement(Z.a,{fontSize:"small"})))),""===t.password&&r.a.createElement(De.a,{placement:"top",title:n("share.changeToPrivate"),onClick:function(){return e.changePermission(t.key)}},r.a.createElement(Aa.a,null,r.a.createElement(Pn.a,{fontSize:"small"}))),r.a.createElement(De.a,{placement:"top",title:t.preview?n("share.disablePreview"):n("share.enablePreview"),onClick:function(){return e.changePreviewOption(t.key)}},r.a.createElement(Aa.a,null,r.a.createElement(Wn.a,{on:t.preview,onIcon:r.a.createElement(Fn.a,{fontSize:"small"}),offIcon:r.a.createElement(_n.a,{fontSize:"small"})}))),r.a.createElement(De.a,{placement:"top",title:n("share.cancelShare"),onClick:function(){return e.removeShare(t.key)}},r.a.createElement(Aa.a,null,r.a.createElement(Lt.a,{fontSize:"small"}))))))}))),r.a.createElement("div",{className:a.loadMore},r.a.createElement(Za.a,{count:Math.ceil(this.state.total/18),onChange:this.handlePageChange,color:"secondary"}))," ",r.a.createElement(Ga.a,{open:null!==this.state.showPwd,onClose:this.handleClose},r.a.createElement(In.a,null," ",n("share.sharePassword")," ")," ",r.a.createElement(Rn.a,null,r.a.createElement(z.a,{id:"standard-name",value:this.state.showPwd,margin:"normal",autoFocus:!0}))," ",r.a.createElement(Mn.a,null,r.a.createElement(B.a,{onClick:this.handleClose,color:"default"},n("close",{ns:"common"}))," ")," ")," ")}}]),a}(n.Component),Bn=Object(u.c)((function(){return{}}),(function(e){return{toggleSnackbar:function(t,a,n,r){e(Object(ne.S)(t,a,n,r))}}}))(Object(Ie.a)((function(e){return{cardContainer:{padding:e.spacing(1)},card:{maxWidth:400,margin:"0 auto"},actions:{display:"flex"},layout:Object(I.a)({width:"auto",marginTop:"50px",marginLeft:e.spacing(3),marginRight:e.spacing(3)},e.breakpoints.up(1100+2*e.spacing(3)),{width:1100,marginLeft:"auto",marginRight:"auto"}),shareTitle:{maxWidth:"200px"},avatarFile:{backgroundColor:e.palette.primary.light},avatarFolder:{backgroundColor:e.palette.secondary.light},gird:{marginTop:"30px"},loadMore:{textAlign:"right",marginTop:"20px",marginBottom:"40px"},badge:{marginLeft:e.spacing(1),height:17},orderSelect:{textAlign:"right",marginTop:5}}}))(Object(s.k)(Object(Jt.a)()(zn)))),Gn=a(7132),Hn=a(7039),Vn=a(7092),qn=a(474),Kn=a(477),Yn=a(476),Jn=a(7131),Zn=a(7133),Qn=a(244),Xn=a.n(Qn),$n=a(7123),er=a(7050),tr=a(291),ar=a(132),nr=Object(x.a)((function(e){return{contentFix:{padding:"10px 24px 0px 24px"},wrapper:{margin:e.spacing(1),position:"relative"},buttonProgress:{color:e.palette.secondary.light,position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12},content:{padding:0},scroll:{maxHeight:"calc(100vh - 200px)"}}}));function rr(e){var t=Object(re.a)().t,a=Object(n.useState)(e.files),o=Object(D.a)(a,2),i=o[0],c=o[1];Object(n.useEffect)((function(){c(e.files)}),[e.files]);var l=function(e){return function(t){var a=Object(it.a)(i);a.map((function(n,r){n.index===e&&(a[r]=Object(m.a)(Object(m.a)({},a[r]),{},{selected:t.target.checked?"true":"false"}))})),c(a)}},s=nr();return r.a.createElement(Ga.a,{open:e.open,onClose:e.onClose,"aria-labelledby":"form-dialog-title",fullWidth:!0},r.a.createElement(In.a,{id:"form-dialog-title"},t("download.selectDownloadingFile")),r.a.createElement(Rn.a,{dividers:"paper",className:s.content},r.a.createElement(ar.b,{style:{height:54*i.length},className:s.scroll,data:i,itemContent:function(e,t){return r.a.createElement(bt.a,{key:e},r.a.createElement($n.a,{row:!0},r.a.createElement(er.a,{control:r.a.createElement(tr.a,{onChange:l(t.index),checked:"true"===t.selected,value:"checkedA"}),label:t.path})))}})),r.a.createElement(Mn.a,null,r.a.createElement(B.a,{onClick:e.onClose},t("cancel",{ns:"common"})),r.a.createElement("div",{className:s.wrapper},r.a.createElement(B.a,{color:"primary",onClick:function(){var t=[];i.map((function(e){"true"===e.selected&&t.push(parseInt(e.index))})),e.onSubmit(t)},disabled:e.modalsLoading},t("ok",{ns:"common"}),e.modalsLoading&&r.a.createElement(mt.a,{size:24,className:s.buttonProgress})))))}var or=nn()({root:{maxWidth:"100%",boxShadow:"none","&:not(:last-child)":{borderBottom:0},"&:before":{display:"none"},"&$expanded":{}},expanded:{}})(qn.a),ir=nn()({root:{minHeight:0,padding:0,"&$expanded":{minHeight:56}},content:{maxWidth:"100%",margin:0,display:"flex","&$expanded":{margin:"0"}},expanded:{}})(Yn.a),cr=nn()((function(e){return{root:{display:"block",padding:e.spacing(0)}}}))(Kn.a),lr=Object(x.a)((function(e){return{card:{marginTop:"20px",justifyContent:"space-between"},iconContainer:Object(I.a)({width:"90px",height:"96px",padding:" 35px 29px 29px 29px",paddingLeft:"35px"},e.breakpoints.down("sm"),{display:"none"}),content:Object(I.a)({width:"100%",minWidth:0},e.breakpoints.up("sm"),{borderInlineStart:"1px "+e.palette.divider+" solid"}),contentSide:Object(I.a)({minWidth:0,paddingTop:"24px",paddingRight:"28px"},e.breakpoints.down("sm"),{display:"none"}),iconBig:{fontSize:"30px"},iconMultiple:{fontSize:"30px",color:"#607D8B"},progress:{marginTop:8,marginBottom:4},expand:{transition:".15s transform ease-in-out"},expanded:{transform:"rotate(180deg)"},subFile:{width:"100%",minWidth:300,wordBreak:"break-all"},subFileName:{display:"flex"},subFileIcon:{marginRight:"20px"},subFileSize:{minWidth:120},subFilePercent:{minWidth:105},scroll:{overflow:"auto",maxHeight:"300px"},action:{padding:e.spacing(2),textAlign:"right"},actionButton:{marginLeft:e.spacing(1)},info:{padding:e.spacing(2)},infoTitle:{fontWeight:700,textAlign:"left"},infoValue:{color:e.palette.text.secondary,textAlign:"left",paddingLeft:e.spacing(1)},bitmap:{width:"100%",height:"50px",backgroundColor:e.palette.background.default}}}));function sr(e){var t=Object(re.a)("application",{keyPrefix:"download"}).t,a=Object(re.a)().t,o=r.a.createRef(),i=lr(),c=Object(we.a)(),l=Object(s.g)(),p=r.a.useState(""),d=Object(D.a)(p,2),f=d[0],h=d[1],g=r.a.useState(e.task),b=Object(D.a)(g,2),E=b[0],v=b[1],O=r.a.useState(!1),j=Object(D.a)(O,2),w=j[0],k=j[1],x=r.a.useState(!1),C=Object(D.a)(x,2),S=C[0],T=C[1],P=r.a.useState([]),L=Object(D.a)(P,2),F=L[0],R=L[1],M=Object(u.d)(),A=Object(n.useCallback)((function(e,t,a,n){return M(Object(ne.S)(e,t,a,n))}),[M]);Object(n.useEffect)((function(){v(e.task)}),[e.task]),Object(n.useEffect)((function(){if(""!==E.info.bitfield){var e="";E.info.bitfield.match(/.{1,2}/g).forEach((function(t){e+=Object(N.k)(t)}));var t=o.current,a=t.getContext("2d");a.clearRect(0,0,t.width,t.height),a.strokeStyle=c.palette.primary.main;for(var n=0;n<t.width;n++){var r=e[Math.round((n+1)/t.width*E.info.numPieces)];"1"===(r=r||e.slice(-1))&&(a.beginPath(),a.moveTo(n,0),a.lineTo(n,t.height),a.stroke())}}}),[E.info.bitfield,E.info.numPieces,c]);var _,W=function(e,t){return 0===t?0:e/t*100},z=Object(n.useCallback)((function(){return E.info.files.filter((function(e){return"true"===e.selected}))}),[E.info.files]),H=Object(n.useCallback)((function(){return""!==E.info.bittorrent.info.name?E.info.bittorrent.info.name:"."===E.name?t("unknownTaskName"):E.name}),[E]),V=Object(n.useCallback)((function(){return"multi"===E.info.bittorrent.mode?r.a.createElement(Vn.a,{badgeContent:z().length,color:"secondary"},r.a.createElement(Xn.a,{className:i.iconMultiple})):r.a.createElement(Re.a,{className:i.iconBig,fileName:H(E)})}),[E,i]),K=Object(n.useMemo)((function(){var e=function(e){return{background:"linear-gradient(to right, "+("dark"===c.palette.type?Object(y.a)(c.palette.primary.main,.4):Object(y.i)(c.palette.primary.main,.85))+" 0%,"+("dark"===c.palette.type?Object(y.a)(c.palette.primary.main,.4):Object(y.i)(c.palette.primary.main,.85))+" "+W(e.completedLength,e.length).toFixed(0)+"%,"+c.palette.background.paper+" "+W(e.completedLength,e.length).toFixed(0)+"%,"+c.palette.background.paper+" 100%)"}},a=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(ut.a,{component:"th",scope:"row",className:i.subFile},r.a.createElement(U.a,{className:i.subFileName},r.a.createElement(Re.a,{className:i.subFileIcon,fileName:e.path}),e.path)),r.a.createElement(ut.a,{component:"th",scope:"row",className:i.subFileSize},r.a.createElement(U.a,{noWrap:!0}," ",Object(N.r)(e.length))),r.a.createElement(ut.a,{component:"th",scope:"row",className:i.subFilePercent},r.a.createElement(U.a,{noWrap:!0},W(e.completedLength,e.length).toFixed(2),"%")),r.a.createElement(ut.a,null,r.a.createElement(De.a,{title:t("deleteThisFile")},r.a.createElement(Aa.a,{onClick:function(){return function(e){k(!0);var a=z(),n=[],r=[];a.map((function(t){t.index!==e&&t.selected?(n.push(parseInt(t.index)),r.push(Object(m.a)(Object(m.a)({},t),{},{selected:"true"}))):r.push(Object(m.a)(Object(m.a)({},t),{},{selected:"false"}))})),q.c.put("/aria2/select/"+E.info.gid,{indexes:n}).then((function(){v(Object(m.a)(Object(m.a)({},E),{},{info:Object(m.a)(Object(m.a)({},E.info),{},{files:r})})),A("top","right",t("taskFileDeleted"),"success")})).catch((function(e){A("top","right",e.message,"error")})).then((function(){k(!1)}))}(e.index)},disabled:w,size:"small"},r.a.createElement(Jn.a,null)))))};return z().length>5?r.a.createElement(ar.a,{style:{height:43*z().length},className:i.scroll,components:{Table:function(e){return r.a.createElement(ct.a,Object.assign({},e,{size:"small"}))},TableRow:function(t){var a=t["data-index"],n=z()[a];return r.a.createElement(st.a,Object.assign({},t,{key:a,style:e(n)}))}},data:z(),itemContent:function(e,t){return a(t)}}):r.a.createElement("div",{className:i.scroll},r.a.createElement(ct.a,{size:"small"},r.a.createElement(pt.a,null,z().map((function(t){return r.a.createElement(st.a,{key:t.index,style:e(t)},a(t))})))))}),[i,c,z]);return r.a.createElement(wn.a,{className:i.card},r.a.createElement(rr,{open:S,onClose:function(){return T(!1)},modalsLoading:w,files:F,onSubmit:function(e){k(!0),q.c.put("/aria2/select/"+E.info.gid,{indexes:e}).then((function(){A("top","right",t("operationSubmitted"),"success"),T(!1)})).catch((function(e){A("top","right",e.message,"error")})).then((function(){k(!1)}))}}),r.a.createElement(or,{square:!0,expanded:f===E.info.gid,onChange:(_=E.info.gid,function(e,t){h(!!t&&_)})},r.a.createElement(ir,{"aria-controls":"panel1d-content",id:"panel1d-header"},r.a.createElement("div",{className:i.iconContainer},V()),r.a.createElement(Gn.a,{className:i.content},r.a.createElement(U.a,{color:"primary",noWrap:!0},r.a.createElement(De.a,{title:H()},r.a.createElement("span",null,H()))),r.a.createElement(Hn.a,{color:"secondary",variant:"determinate",className:i.progress,value:W(E.downloaded,E.total)}),r.a.createElement(U.a,{variant:"body2",color:"textSecondary",noWrap:!0},E.total>0&&r.a.createElement("span",null,W(E.downloaded,E.total).toFixed(2),"% -"," ",0===E.downloaded?"0Bytes":Object(N.r)(E.downloaded),"/",0===E.total?"0Bytes":Object(N.r)(E.total)," ","-"," ","0"===E.speed?"0B/s":Object(N.r)(E.speed)+"/s"),0===E.total&&r.a.createElement("span",null," - "))),r.a.createElement(Gn.a,{className:i.contentSide},r.a.createElement(Aa.a,null,r.a.createElement(Zn.a,{className:Le()(Object(I.a)({},i.expanded,f===E.info.gid),i.expand)})))),r.a.createElement(cr,null,r.a.createElement(G.a,null),"multi"===E.info.bittorrent.mode&&K,r.a.createElement("div",{className:i.action},r.a.createElement(B.a,{className:i.actionButton,variant:"outlined",color:"secondary",onClick:function(){return l.push("/home?path="+encodeURIComponent(E.dst))}},t("openDstFolder")),"multi"===E.info.bittorrent.mode&&r.a.createElement(B.a,{className:i.actionButton,variant:"outlined",color:"secondary",disabled:w,onClick:function(){T(!0),R(Object(it.a)(e.task.info.files))}},t("selectDownloadingFile")),r.a.createElement(B.a,{className:i.actionButton,onClick:function(){k(!0),q.c.delete("/aria2/task/"+E.info.gid).then((function(){A("top","right",t("taskCanceled"),"success")})).catch((function(e){A("top","right",e.message,"error")})).then((function(){k(!1)}))},variant:"contained",color:"secondary",disabled:w},t("cancelTask"))),r.a.createElement(G.a,null),r.a.createElement("div",{className:i.info},""!==E.info.bitfield&&r.a.createElement("canvas",{width:"700",height:"100",ref:o,className:i.bitmap}),r.a.createElement(dt.a,{container:!0},r.a.createElement(dt.a,{container:!0,xs:12,sm:4},r.a.createElement(dt.a,{item:!0,xs:5,className:i.infoTitle},t("updatedAt")),r.a.createElement(dt.a,{item:!0,xs:7,className:i.infoValue},r.a.createElement(_a.a,{datetime:E.update,locale:a("timeAgoLocaleCode",{ns:"common"})}))),r.a.createElement(dt.a,{container:!0,xs:12,sm:4},r.a.createElement(dt.a,{item:!0,xs:5,className:i.infoTitle},t("uploaded")),r.a.createElement(dt.a,{item:!0,xs:7,className:i.infoValue},Object(N.r)(E.info.uploadLength))),r.a.createElement(dt.a,{container:!0,xs:12,sm:4},r.a.createElement(dt.a,{item:!0,xs:5,className:i.infoTitle},t("uploadSpeed")),r.a.createElement(dt.a,{item:!0,xs:7,className:i.infoValue},Object(N.r)(E.info.uploadSpeed)," / s")),""!==E.info.bittorrent.mode&&r.a.createElement(r.a.Fragment,null,r.a.createElement(dt.a,{container:!0,xs:12,sm:8},r.a.createElement(dt.a,{item:!0,sm:2,xs:4,className:i.infoTitle},t("InfoHash")),r.a.createElement(dt.a,{item:!0,sm:10,xs:8,style:{wordBreak:"break-all"},className:i.infoValue},E.info.infoHash)),r.a.createElement(dt.a,{container:!0,xs:12,sm:4},r.a.createElement(dt.a,{item:!0,xs:5,className:i.infoTitle},t("seederCount")),r.a.createElement(dt.a,{item:!0,xs:7,className:i.infoValue},E.info.numSeeders)),r.a.createElement(dt.a,{container:!0,xs:12,sm:4},r.a.createElement(dt.a,{item:!0,xs:5,className:i.infoTitle},t("seeding")),r.a.createElement(dt.a,{item:!0,xs:7,className:i.infoValue},"true"===E.info.seeder?t("isSeeding"):t("notSeeding")))),r.a.createElement(dt.a,{container:!0,xs:12,sm:4},r.a.createElement(dt.a,{item:!0,xs:5,className:i.infoTitle},t("chunkSize")),r.a.createElement(dt.a,{item:!0,xs:7,className:i.infoValue},Object(N.r)(E.info.pieceLength))),r.a.createElement(dt.a,{container:!0,xs:12,sm:4},r.a.createElement(dt.a,{item:!0,xs:5,className:i.infoTitle},t("chunkNumbers")),r.a.createElement(dt.a,{item:!0,xs:7,className:i.infoValue},E.info.numPieces)),e.task.node&&r.a.createElement(dt.a,{container:!0,xs:12,sm:4},r.a.createElement(dt.a,{item:!0,xs:5,className:i.infoTitle},t("downloadNode")),r.a.createElement(dt.a,{item:!0,xs:7,className:i.infoValue},e.task.node)))))))}var ur=nn()({root:{maxWidth:"100%",boxShadow:"none","&:not(:last-child)":{borderBottom:0},"&:before":{display:"none"},"&$expanded":{}},expanded:{}})(qn.a),pr=nn()({root:{minHeight:0,padding:0,"&$expanded":{minHeight:56}},content:{maxWidth:"100%",margin:0,display:"flex","&$expanded":{margin:"0"}},expanded:{}})(Yn.a),dr=nn()((function(e){return{root:{display:"block",padding:e.spacing(0)}}}))(Kn.a),mr=Object(x.a)((function(e){var t;return{card:{marginTop:"20px",justifyContent:"space-between"},iconContainer:Object(I.a)({width:"90px",height:"96px",padding:" 35px 29px 29px 29px",paddingLeft:"35px"},e.breakpoints.down("sm"),{display:"none"}),content:(t={width:"100%",minWidth:0},Object(I.a)(t,e.breakpoints.up("sm"),{borderInlineStart:"1px "+e.palette.divider+" solid"}),Object(I.a)(t,"textAlign","left"),t),contentSide:Object(I.a)({minWidth:0,paddingTop:"24px",paddingRight:"28px"},e.breakpoints.down("sm"),{display:"none"}),iconBig:{fontSize:"30px"},iconMultiple:{fontSize:"30px",color:"#607D8B"},progress:{marginTop:8,marginBottom:4},expand:{transition:".15s transform ease-in-out"},expanded:{transform:"rotate(180deg)"},subFile:{width:"100%",minWidth:300,wordBreak:"break-all"},subFileName:{display:"flex"},subFileIcon:{marginRight:"20px"},subFileSize:{minWidth:115},subFilePercent:{minWidth:100},scroll:{overflow:"auto",maxHeight:"300px"},action:{padding:e.spacing(2),textAlign:"right"},actionButton:{marginLeft:e.spacing(1)},info:{padding:e.spacing(2)},infoTitle:{fontWeight:700,textAlign:"left"},infoValue:{color:e.palette.text.secondary,textAlign:"left",paddingLeft:e.spacing(1)}}}));function fr(e){var t=Object(re.a)("application",{keyPrefix:"download"}).t,a=mr(),o=Object(we.a)(),i=Object(s.g)(),c=r.a.useState(!1),l=Object(D.a)(c,2),p=l[0],d=l[1],m=r.a.useState(!1),f=Object(D.a)(m,2),h=f[0],g=f[1],b=Object(u.d)(),E=Object(n.useCallback)((function(e,t,a,n){return b(Object(ne.S)(e,t,a,n))}),[b]),v=Object(n.useCallback)((function(){return"."===e.task.name?t("unknownTaskName"):e.task.name}),[e.task.name]),O=Object(n.useCallback)((function(){return e.task.files.filter((function(e){return"true"===e.selected}))}),[e.task.files]),j=Object(n.useCallback)((function(){return e.task.files.length>1?r.a.createElement(Vn.a,{badgeContent:O().length,color:"secondary"},r.a.createElement(Xn.a,{className:a.iconMultiple})):r.a.createElement(Re.a,{className:a.iconBig,fileName:v(e.task)})}),[e.task,a]),w=function(e){try{var a=JSON.parse(e);return a.msg+"\uff1a"+a.error}catch(n){return t("transferFailed")}},k=Object(n.useMemo)((function(){var e=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(ut.a,{component:"th",scope:"row",className:a.subFile},r.a.createElement(U.a,{className:a.subFileName},r.a.createElement(Re.a,{className:a.subFileIcon,fileName:e.path}),e.path)),r.a.createElement(ut.a,{component:"th",scope:"row",className:a.subFileSize},r.a.createElement(U.a,{noWrap:!0}," ",Object(N.r)(e.length))),r.a.createElement(ut.a,{component:"th",scope:"row",className:a.subFilePercent},r.a.createElement(U.a,{noWrap:!0},(t=e.completedLength,n=e.length,0===n?0:t/n*100).toFixed(2),"%")));var t,n};return O().length>5?r.a.createElement(ar.a,{style:{height:57*O().length},className:a.scroll,components:{Table:function(e){return r.a.createElement(ct.a,e)}},data:O(),itemContent:function(t,a){return e(a)}}):r.a.createElement("div",{className:a.scroll},r.a.createElement(ct.a,null,r.a.createElement(pt.a,null,O().map((function(t){return r.a.createElement(st.a,{key:t.index},e(t))})))))}),[a,O]);return r.a.createElement(wn.a,{className:a.card},r.a.createElement(ur,{square:!0,expanded:p,onChange:function(e,t){d(!!t)}},r.a.createElement(pr,{"aria-controls":"panel1d-content",id:"panel1d-header"},r.a.createElement("div",{className:a.iconContainer},j()),r.a.createElement(Gn.a,{className:a.content},r.a.createElement(U.a,{color:"primary",noWrap:!0},r.a.createElement(De.a,{title:v()},r.a.createElement("span",null,v()))),3===e.task.status&&r.a.createElement(De.a,{title:e.task.error},r.a.createElement(U.a,{variant:"body2",color:"error",noWrap:!0},t("downloadFailed",{msg:e.task.error}))),5===e.task.status&&r.a.createElement(U.a,{variant:"body2",color:"textSecondary",noWrap:!0},t("canceledStatus"),""!==e.task.error&&r.a.createElement("span",null,"(",e.task.error,")")),4===e.task.status&&4===e.task.task_status&&r.a.createElement(U.a,{variant:"body2",style:{color:o.palette.success.main},noWrap:!0},t("finishedStatus")),4===e.task.status&&0===e.task.task_status&&r.a.createElement(U.a,{variant:"body2",style:{color:o.palette.success.light},noWrap:!0},t("pending")),4===e.task.status&&1===e.task.task_status&&r.a.createElement(U.a,{variant:"body2",style:{color:o.palette.success.light},noWrap:!0},t("transferring")),4===e.task.status&&2===e.task.task_status&&r.a.createElement(De.a,{title:w(e.task.task_error)},r.a.createElement(U.a,{variant:"body2",color:"error",noWrap:!0},w(e.task.task_error)))),r.a.createElement(Gn.a,{className:a.contentSide},r.a.createElement(Aa.a,null,r.a.createElement(Zn.a,{className:Le()(Object(I.a)({},a.expanded,p),a.expand)})))),r.a.createElement(dr,null,r.a.createElement(G.a,null),e.task.files.length>1&&k,r.a.createElement("div",{className:a.action},r.a.createElement(B.a,{className:a.actionButton,variant:"outlined",color:"secondary",onClick:function(){return i.push("/home?path="+encodeURIComponent(e.task.dst))}},t("openDstFolder")),r.a.createElement(B.a,{className:a.actionButton,onClick:function(){g(!0),q.c.delete("/aria2/task/"+e.task.gid).then((function(){E("top","right",t("taskDeleted"),"success")})).catch((function(e){E("top","right",e.message,"error")})).then((function(){window.location.reload()}))},variant:"contained",color:"secondary",disabled:h},t("deleteRecord"))),r.a.createElement(G.a,null),r.a.createElement("div",{className:a.info},r.a.createElement(dt.a,{container:!0},r.a.createElement(dt.a,{container:!0,xs:12,sm:6},r.a.createElement(dt.a,{item:!0,xs:5,className:a.infoTitle},t("createdAt")),r.a.createElement(dt.a,{item:!0,xs:7,className:a.infoValue},Object(aa.a)(e.task.create))),r.a.createElement(dt.a,{container:!0,xs:12,sm:6},r.a.createElement(dt.a,{item:!0,xs:5,className:a.infoTitle},t("updatedAt")),r.a.createElement(dt.a,{item:!0,xs:7,className:a.infoValue},Object(aa.a)(e.task.update))),e.task.node&&r.a.createElement(dt.a,{container:!0,xs:12,sm:6},r.a.createElement(dt.a,{item:!0,xs:5,className:a.infoTitle},t("downloadNode")),r.a.createElement(dt.a,{item:!0,xs:7,className:a.infoValue},e.task.node)))))))}var hr=a(286),gr=a(7134),br=Object(x.a)((function(){return{fab:{margin:0,top:"auto",right:20,bottom:20,left:"auto",zIndex:5,position:"fixed"}}}));function Er(){var e=br(),t=Object(u.d)(),a=Object(n.useCallback)((function(){return t(Object(ne.w)())}),[t]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(ba.default,null),r.a.createElement($a.a,{enable:!0},r.a.createElement(hr.a,{className:e.fab,color:"secondary",onClick:function(){return a()}},r.a.createElement(gr.a,null))))}var vr=function(e){Object(se.a)(a,e);var t=Object(ue.a)(a);function a(){var e;Object(ie.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).page=0,e.interval=0,e.previousDownloading=-1,e.state={downloading:[],loading:!1,finishedList:[],continue:!0},e.componentDidMount=function(){e.loadDownloading()},e.loadDownloading=function(){e.setState({loading:!0}),q.c.get("/aria2/downloading").then((function(t){e.setState({downloading:t.data,loading:!1}),clearTimeout(e.interval),t.data.length>0&&(e.interval=setTimeout(e.loadDownloading,1e3*t.data.reduce((function(e,t){return e.interval<t.interval?e:t})).interval)),t.data.length!==e.previousDownloading&&(e.page=0,e.setState({finishedList:[],continue:!0}),e.loadMore()),e.previousDownloading=t.data.length})).catch((function(t){e.props.toggleSnackbar("top","right",t.message,"error")}))},e.loadMore=function(){e.setState({loading:!0}),q.c.get("/aria2/finished?page="+ ++e.page).then((function(t){e.setState({finishedList:[].concat(Object(it.a)(e.state.finishedList),Object(it.a)(t.data)),loading:!1,continue:t.data.length>=10})})).catch((function(){e.props.toggleSnackbar("top","right",e.props.t("download.failedToLoad"),"error"),e.setState({loading:!1})}))},e}return Object(ce.a)(a,[{key:"componentWillUnmount",value:function(){clearTimeout(this.interval)}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.t,n=h.a.GetUser();return r.a.createElement("div",{className:t.layout},n.group.allowRemoteDownload&&r.a.createElement(Er,null),r.a.createElement(U.a,{color:"textSecondary",variant:"h4",className:t.title},a("download.active"),r.a.createElement(Aa.a,{disabled:this.state.loading,onClick:this.loadDownloading},r.a.createElement(Kt.a,null))),0===this.state.downloading.length&&r.a.createElement(ma.a,{primary:a("download.activeEmpty")}),this.state.downloading.map((function(e,t){return r.a.createElement(sr,{key:t,task:e})})),r.a.createElement(U.a,{color:"textSecondary",variant:"h4",className:t.title},a("download.finished")),r.a.createElement("div",{className:t.loadMore},0===this.state.finishedList.length&&r.a.createElement(ma.a,{primary:a("download.finishedEmpty")}),this.state.finishedList.map((function(e,t){return e.files?r.a.createElement(fr,{key:t,task:e}):null})),r.a.createElement(B.a,{size:"large",className:t.margin,disabled:!this.state.continue,onClick:this.loadMore},a("download.loadMore"))))}}]),a}(n.Component),Or=Object(u.c)((function(){return{}}),(function(e){return{toggleSnackbar:function(t,a,n,r){e(Object(ne.S)(t,a,n,r))}}}))(Object(Ie.a)((function(e){return{actions:{display:"flex"},title:{marginTop:"20px"},layout:Object(I.a)({width:"auto",marginTop:"30px",marginLeft:e.spacing(3),marginRight:e.spacing(3)},e.breakpoints.up(1100+2*e.spacing(3)),{width:700,marginLeft:"auto",marginRight:"auto"}),shareTitle:{maxWidth:"200px"},avatarFile:{backgroundColor:e.palette.primary.light},avatarFolder:{backgroundColor:e.palette.secondary.light},gird:{marginTop:"30px"},hide:{display:"none"},loadingAnimation:{borderRadius:"6px 6px 0 0"},shareFix:{marginLeft:"20px"},loadMore:{textAlign:"center",marginTop:"20px",marginBottom:"20px"},margin:{marginTop:e.spacing(2)}}}))(Object(Jt.a)()(vr))),jr=Object(x.a)((function(e){var t;return{loader:(t={width:"80%"},Object(I.a)(t,e.breakpoints.up("md"),{width:" 50%"}),Object(I.a)(t,"marginTop",30),t)}})),wr=function(e){return r.a.createElement(ee.c,{backgroundColor:e.dark?"#333":"#f5f6f7",foregroundColor:e.dark?"#636363":"#eee",className:e.className})};var kr=function(){var e=Object(we.a)(),t=jr();return r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement(wr,{dark:"dark"===e.palette.type,className:t.loader}))},yr=function(e){Object(se.a)(a,e);var t=Object(ue.a)(a);function a(e){var n;Object(ie.a)(this,a),(n=t.call(this,e)).handleChange=function(e){return function(t){n.setState(Object(I.a)({},e,t.target.value))}},n.submit=function(e){e.preventDefault(),""!==n.state.pwd&&n.props.setPassowrd(n.state.pwd)};var r=new URLSearchParams(n.props.location.search);return n.state={pwd:r.get("password")},n}return Object(ce.a)(a,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.t;return r.a.createElement("div",{className:t.layout},r.a.createElement(wn.a,{className:t.card},r.a.createElement(kn.a,{avatar:r.a.createElement(_.a,{"aria-label":"Recipe",src:"/api/v3/user/avatar/"+this.props.share.creator.key+"/l"}),title:a("share.privateShareTitle",{nick:this.props.share.creator.nick}),subheader:Object(aa.a)(this.props.share.create_date)}),r.a.createElement(G.a,null),r.a.createElement(Gn.a,null,r.a.createElement("form",{onSubmit:this.submit},r.a.createElement(z.a,{id:"pwd",label:a("share.enterPassword"),value:this.state.pwd,onChange:this.handleChange("pwd"),margin:"normal",type:"password",autoFocus:!0,fullWidth:!0,color:"secondary"}))),r.a.createElement(Dn.a,{className:t.actions,disableActionSpacing:!0},r.a.createElement(B.a,{onClick:this.submit,color:"secondary",className:t.continue,variant:"contained",disabled:""===this.state.pwd||this.props.loading},a("share.continue")))))}}]),a}(n.Component),xr=Object(u.c)((function(){return{}}),(function(e){return{toggleSnackbar:function(t,a,n,r){e(Object(ne.S)(t,a,n,r))}}}))(Object(Ie.a)((function(e){return{card:{maxWidth:400,margin:"0 auto"},actions:{display:"flex"},layout:Object(I.a)({width:"auto",marginTop:"110px",marginLeft:e.spacing(3),marginRight:e.spacing(3)},e.breakpoints.up(1100+2*e.spacing(3)),{width:1100,marginLeft:"auto",marginRight:"auto"}),continue:{marginLeft:"auto",marginRight:"10px",marginRottom:"10px"}}}))(Object(s.k)(Object(Jt.a)()(yr)))),Cr=Object(x.a)((function(e){return{boxHeader:{textAlign:"center",padding:24},avatar:{backgroundColor:e.palette.secondary.main,margin:"0 auto",width:50,height:50,cursor:"pointer"},shareDes:{marginTop:12},shareInfo:{color:e.palette.text.disabled,fontSize:14}}}));function Sr(e){var t=Object(re.a)("application",{keyPrefix:"share"}).t,a=Cr(),n=Object(s.g)(),o=function(){n.push("/profile/"+e.share.creator.key),e.onClose&&e.onClose()};return r.a.createElement("div",{className:a.boxHeader},r.a.createElement(_.a,{className:a.avatar,alt:e.share.creator.nick,src:"/api/v3/user/avatar/"+e.share.creator.key+"/l",onClick:function(){return o()}}),r.a.createElement(U.a,{variant:"h6",className:a.shareDes},e.isFolder&&r.a.createElement(qa.a,{i18nKey:"share.createdBy",values:{nick:e.share.creator.nick},components:[r.a.createElement(H.a,{key:0,onClick:function(){return o()},href:"javascript:void(0)",color:"inherit"})]}),!e.isFolder&&r.a.createElement(qa.a,{i18nKey:"share.sharedBy",values:{num:1,nick:e.share.creator.nick},components:[r.a.createElement(H.a,{key:0,onClick:function(){return o()},href:"javascript:void(0)",color:"inherit"})]})),r.a.createElement(U.a,{className:a.shareInfo},t("statistics",{views:e.share.views,downloads:e.share.downloads,time:e.share.expire>0?e.share.expire>=86400?t("expireInXDays",{num:Math.round(e.share.expire/86400)}):t("expireInXHours",{num:Math.round(e.share.expire/3600)}):Object(aa.a)(e.share.create_date)})))}Object(N.s)();var Nr=r.a.lazy((function(){return Promise.resolve().then(a.bind(null,248))})),Tr=r.a.lazy((function(){return Promise.resolve().then(a.bind(null,433))})),Pr=function(e){Object(se.a)(a,e);var t=Object(ue.a)(a);function a(){var e;Object(ie.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={anchorEl:null,open:!1,purchaseCallback:null,loading:!1},e.downloaded=!1,e.preview=function(){if(Ne.a.isSharePage(e.props.location.pathname)){var t=h.a.GetUser();if(!h.a.Check()&&t&&!t.group.shareDownload)return void e.props.toggleSnackbar("top","right",e.props.t("share.pleaseLogin"),"warning")}switch(Object(Vt.i)(e.props.share.source.name)){case"img":return void e.props.showImgPreivew({key:e.props.share.key,name:e.props.share.source.name});case"msDoc":return void e.props.history.push(e.props.share.key+"/doc?name="+encodeURIComponent(e.props.share.source.name));case"audio":return void e.props.openMusicDialog({key:e.props.share.key,name:e.props.share.source.name,type:"share"});case"video":return void e.props.history.push(e.props.share.key+"/video?name="+encodeURIComponent(e.props.share.source.name));case"edit":return void e.props.history.push(e.props.share.key+"/text?name="+encodeURIComponent(e.props.share.source.name));case"pdf":return void e.props.history.push(e.props.share.key+"/pdf?name="+encodeURIComponent(e.props.share.source.name));case"code":return void e.props.history.push(e.props.share.key+"/code?name="+encodeURIComponent(e.props.share.source.name));case"epub":return void e.props.history.push(e.props.share.key+"/epub?name="+encodeURIComponent(e.props.share.source.name));default:return void e.props.toggleSnackbar("top","right",e.props.t("share.cannotShare"),"warning")}},e.scoreHandle=function(e){return function(t){e(t)}},e.download=function(){e.props.startDownload(e.props.share,null)},e}return Object(ce.a)(a,[{key:"componentWillUnmount",value:function(){this.props.setSelectedTarget([])}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.t;return r.a.createElement("div",{className:t.layout},r.a.createElement(Nr,null),r.a.createElement(Tr,null),r.a.createElement("div",{className:t.box},r.a.createElement(Sr,{share:this.props.share}),r.a.createElement(G.a,null),r.a.createElement("div",{className:t.boxContent},r.a.createElement(Re.a,{className:t.icon,isUpload:!0,fileName:this.props.share.source.name}),r.a.createElement("div",{className:t.fileName},r.a.createElement(U.a,{style:{wordBreak:"break-all"}},this.props.share.source.name),r.a.createElement(U.a,{className:t.fileSize},Object(N.r)(this.props.share.source.size)))),r.a.createElement(G.a,null),r.a.createElement("div",{className:t.boxFooter},r.a.createElement("div",{className:t.actionLeft},this.props.share.preview&&r.a.createElement(B.a,{variant:"outlined",color:"secondary",onClick:this.scoreHandle(this.preview),disabled:this.state.loading},a("share.preview"))),r.a.createElement("div",{className:t.actions},r.a.createElement(B.a,{variant:"contained",color:"secondary",className:t.downloadButton,onClick:this.download,disabled:this.state.loading},a("fileManager.download"))))))}}]),a}(n.Component),Lr=Object(u.c)((function(){return{}}),(function(e){return{toggleSnackbar:function(t,a,n,r){e(Object(ne.S)(t,a,n,r))},openMusicDialog:function(t){e(Object(ne.P)(t))},setSelectedTarget:function(t){e(Object(ne.K)(t))},showImgPreivew:function(t){e(Object(ne.Q)(t))},openResave:function(t){e(Object(ne.z)(t))},startDownload:function(t,a){e(Object(Yt.startDownload)(t,a))}}}))(Object(Ie.a)((function(e){var t,a;return{layout:(t={width:"auto",marginTop:"90px",marginLeft:e.spacing(3),marginRight:e.spacing(3)},Object(I.a)(t,e.breakpoints.up(1100+2*e.spacing(3)),{width:1100,marginTop:"90px",marginLeft:"auto",marginRight:"auto"}),Object(I.a)(t,e.breakpoints.down("sm"),{marginTop:0,marginLeft:0,marginRight:0}),Object(I.a)(t,"justifyContent","center"),Object(I.a)(t,"display","flex"),t),player:{borderRadius:"4px"},fileCotainer:{width:"200px",margin:"0 auto"},buttonCotainer:{width:"400px",margin:"0 auto",textAlign:"center",marginTop:"20px"},paper:{padding:e.spacing(2)},icon:{borderRadius:"10%",marginTop:2},box:(a={width:"100%",maxWidth:440,backgroundColor:e.palette.background.paper,borderRadius:e.shape.borderRadius,boxShadow:"0 8px 16px rgba(29,39,55,.25)"},Object(I.a)(a,e.breakpoints.down("sm"),{height:"calc(var(--vh, 100vh) - 56px)",borderRadius:0,maxWidth:1e3}),Object(I.a)(a,"display","flex"),Object(I.a)(a,"flexDirection","column"),a),boxContent:{padding:24,display:"flex",flex:"1"},fileName:{marginLeft:20},fileSize:{color:e.palette.text.disabled,fontSize:14},boxFooter:{display:"flex",padding:"20px 16px",justifyContent:"space-between"},downloadButton:{marginLeft:8}}}))(Object(s.k)(Object(Jt.a)()(Pr)))),Fr=a(7034),Dr=a(7046),Ir=r.a.lazy((function(){return a.e(13).then(a.bind(null,8085))})),Rr=function(e){Object(se.a)(a,e);var t=Object(ue.a)(a);function a(){var e;Object(ie.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={},e.handleClickAway=function(t){var a=t&&t.clientY&&t.clientY<=64;Ne.a.isMobile()||a||e.props.setSelectedTarget([])},e}return Object(ce.a)(a,[{key:"UNSAFE_componentWillMount",value:function(){this.props.setShareInfo(this.props.share)}},{key:"componentWillUnmount",value:function(){this.props.setShareInfo(null),this.props.setSelectedTarget([])}},{key:"render",value:function(){var e=this,t=this.props.classes,a=!1,n=null!==this.props.anchorEl?"simple-popover":void 0;return r.a.createElement("div",{className:t.layout},r.a.createElement(Dr.a,{onClickAway:this.handleClickAway},r.a.createElement(A.a,{className:t.managerContainer},r.a.createElement(on,{isShare:!0,share:this.props.share}))),this.props.fileList.map((function(t){if(("readme.md"===t.name.toLowerCase()||"readme.txt"===t.name.toLowerCase())&&!a)return a=!0,r.a.createElement(Ir,{share:e.props.share,file:t})})),r.a.createElement(Fr.a,{id:n,open:null!==this.props.anchorEl,anchorEl:this.props.anchorEl,onClose:function(){return e.props.setShareUserPopover(null)},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},r.a.createElement(U.a,null,r.a.createElement(Sr,{isFolder:!0,onClose:function(){return e.props.setShareUserPopover(null)},share:this.props.share}))))}}]),a}(n.Component),Mr=Object(u.c)((function(e){return{anchorEl:e.viewUpdate.shareUserPopoverAnchorEl,fileList:e.explorer.fileList}}),(function(e){return{toggleSnackbar:function(t,a,n,r){e(Object(ne.S)(t,a,n,r))},openMusicDialog:function(){e(Object(ne.u)())},setSelectedTarget:function(t){e(Object(ne.K)(t))},showImgPreivew:function(t){e(Object(ne.Q)(t))},openResave:function(t){e(Object(ne.z)(t))},setShareUserPopover:function(t){e(Object(ne.M)(t))},setShareInfo:function(t){e(Object(Se.i)(t))}}}))(Object(Ie.a)((function(e){var t;return{layout:(t={width:"auto",marginTop:30,marginBottom:30,marginLeft:e.spacing(3),marginRight:e.spacing(3)},Object(I.a)(t,e.breakpoints.up(1100+2*e.spacing(3)),{width:1100,marginLeft:"auto",marginRight:"auto"}),Object(I.a)(t,e.breakpoints.down("sm"),{marginTop:e.spacing(2),marginLeft:e.spacing(1),marginRight:e.spacing(1)}),t),managerContainer:{overflowY:"auto"}}}))(Object(s.k)(Rr)));function Ar(){var e=Object(re.a)("application",{keyPrefix:"share"}).t,t=Object(u.d)(),a=Object(s.i)().id,o=Object(n.useState)(void 0),i=Object(D.a)(o,2),c=i[0],l=i[1],p=Object(n.useState)(!1),d=Object(D.a)(p,2),m=d[0],f=d[1],h=Object(n.useState)(""),g=Object(D.a)(h,2),b=g[0],E=g[1],v=Object(n.useCallback)((function(e){return t(Object(Se.b)(e))}),[t]),O=Object(n.useCallback)((function(e,a,n,r){return t(Object(ne.S)(e,a,n,r))}),[t]);return Object(n.useEffect)((function(){c?c.locked?(v(e("privateShareTitle",{nick:c.creator.nick})),""!==b&&O("top","right",e("incorrectPassword"),"warning")):v(c.source.name):v()}),[c,v,O]),Object(n.useEffect)((function(){return function(){v()}}),[]),Object(n.useEffect)((function(){f(!0);var e="";""!==b&&(e="?password="+b),q.c.get("/share/info/"+a+e).then((function(e){l(e.data),f(!1)})).catch((function(e){f(!1),404===e.code?l(null):O("top","right",e.message,"error")}))}),[a,b,O]),r.a.createElement(n.Suspense,{fallback:r.a.createElement(kr,null)},void 0===c&&r.a.createElement(kr,null),null===c&&r.a.createElement(F,{msg:e("shareNotExist")}),c&&c.locked&&r.a.createElement(xr,{loading:m,setPassowrd:E,share:c}),c&&!c.locked&&!c.is_dir&&r.a.createElement(Lr,{share:c}),c&&!c.locked&&c.is_dir&&r.a.createElement(Mr,{share:c}))}var _r=a(167),Ur=a(242),Wr=Object(x.a)((function(){return{layout:{width:"auto"},"@global":{iframe:{border:"none",width:"100%",height:"calc(100vh - 64px)",marginBottom:-10}}}}));function zr(){var e=Object(n.useState)(null),t=Object(D.a)(e,2),a=t[0],o=t[1],i=Object(n.useState)(null),c=Object(D.a)(i,2),l=c[0],p=c[1],d=Object(s.j)(),m=Object(s.h)(),f=new URLSearchParams(Object(s.h)().search),h=Object(s.i)().id,g=Object(we.a)(),b=Object(cn.a)(f,d,m).title,E=Object(u.e)((function(e){return e.viewUpdate.modals.share})),v=Object(u.e)((function(e){return e.viewUpdate.modalsLoading})),O=Object(u.d)(),j=Object(n.useCallback)((function(e,t,a,n){return O(Object(ne.S)(e,t,a,n))}),[O]),w=Object(n.useCallback)((function(){return O(Object(ne.f)())}),[O]),k=Object(n.useCallback)((function(){return O(Object(ne.A)())}),[O]),y=Object(n.useCallback)((function(e){return O(Object(ne.H)(e))}),[O]);Object(n.useEffect)((function(){var e="/file/doc/"+f.get("id");Ne.a.isSharePage(m.pathname)&&(e="/share/doc/"+h,""!==f.get("share_path")&&(e+="?path="+encodeURIComponent(f.get("share_path")))),q.c.get(e).then((function(e){e.data.access_token&&(e.data.url=e.data.url.replaceAll("lng",_r.a.resolvedLanguage.toLowerCase()),e.data.url=e.data.url.replaceAll("darkmode","dark"===g.palette.type?"2":"1")),o(e.data)})).catch((function(e){j("top","right",e.message,"error")}))}),[d.params[0],m]);var x=Wr(),C=function(e){var t;console.log("Received PostMessage from "+e.origin,e.data);try{t=JSON.parse(e.data)}catch(e){return}"UI_Sharing"===t.MessageId&&(p([{name:b,id:f.get("id"),type:"file"}]),k())};return Object(n.useEffect)((function(){var e=document.getElementById("frameholder"),t=document.createElement("iframe");if(a&&a.access_token&&e)return t.name="office_frame",t.id="office_frame",t.title="Office Frame",t.setAttribute("allowfullscreen","true"),t.setAttribute("sandbox","allow-scripts allow-same-origin allow-forms allow-popups allow-top-navigation allow-popups-to-escape-sandbox"),e.appendChild(t),document.getElementById("office_form").submit(),window.addEventListener("message",C,!1),function(){window.removeEventListener("message",C,!1)}}),[a]),r.a.createElement("div",{className:x.layout},r.a.createElement(Ur.a,{open:E,onClose:function(){return w()},modalsLoading:v,setModalsLoading:y,selected:l}),a&&!a.access_token&&r.a.createElement("iframe",{title:"ms",src:a.url}),a&&a.access_token&&r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{id:"office_form",name:"office_form",target:"office_frame",action:a.url,method:"post"},r.a.createElement("input",{name:"access_token",value:a.access_token,type:"hidden"}),r.a.createElement("input",{name:"access_token_ttl",value:a.access_token_ttl,type:"hidden"})),r.a.createElement("span",{id:"frameholder"})))}var Br=a(283),Gr=a(7153),Hr=a(7137),Vr=a(7138),qr=a(7154),Kr=a(7139),Yr=a(7135),Jr=a(7122),Zr=a(91),Qr=Object(x.a)((function(e){return{formGroup:{display:"flex",marginTop:e.spacing(1)},formIcon:{marginTop:21,marginRight:19,color:e.palette.text.secondary},input:{width:250},dialogContent:{paddingTop:24,paddingRight:24,paddingBottom:8,paddingLeft:24},button:{marginTop:8}}}));function Xr(e){var t=Object(re.a)().t,a=Object(n.useState)({name:"",path:"/"}),o=Object(D.a)(a,2),i=o[0],c=o[1],l=r.a.useState(!1),s=Object(D.a)(l,2),u=s[0],p=s[1],d=Object(n.useState)(""),f=Object(D.a)(d,2),h=f[0],g=f[1],b=Object(n.useState)(""),E=Object(D.a)(b,2),v=(E[0],E[1]),O=Qr(),j=function(e){return function(t){c(Object(m.a)(Object(m.a)({},i),{},Object(I.a)({},e,t.target.value)))}};return r.a.createElement(Ga.a,{open:e.open,onClose:e.onClose,"aria-labelledby":"form-dialog-title"},r.a.createElement(Ga.a,{open:u,onClose:function(){return p(!1)},"aria-labelledby":"form-dialog-title"},r.a.createElement(In.a,{id:"form-dialog-title"},t("navbar.addTagDialog.selectFolder")),r.a.createElement(Zr.a,{presentPath:"/",selected:[],onSelect:function(e){var t="/"===e.path?e.path+e.name:e.path+"/"+e.name;g(t),v(e.name)}}),r.a.createElement(Mn.a,null,r.a.createElement(B.a,{onClick:function(){return p(!1)}},t("cancel",{ns:"common"})),r.a.createElement(B.a,{onClick:function(){c(Object(m.a)(Object(m.a)({},i),{},{path:"//"===h?"/":h})),p(!1)},color:"primary",disabled:""===h},t("ok",{ns:"common"})))),r.a.createElement("div",{className:O.dialogContent},r.a.createElement("div",{className:O.formContainer},r.a.createElement("div",{className:O.formGroup},r.a.createElement("div",{className:O.formIcon},r.a.createElement(Yr.a,null)),r.a.createElement(z.a,{className:O.input,value:i.name,onChange:j("name"),label:t("setting.annotation")})),r.a.createElement("div",{className:O.formGroup},r.a.createElement("div",{className:O.formIcon},r.a.createElement(Jr.a,null)),r.a.createElement("div",null,r.a.createElement(z.a,{value:i.path,onChange:j("path"),className:O.input,label:t("setting.rootFolder")}),r.a.createElement("br",null),r.a.createElement(B.a,{className:O.button,color:"primary",onClick:function(){return p(!0)}},t("navbar.addTagDialog.selectFolder")))))),r.a.createElement(Mn.a,null,r.a.createElement(B.a,{onClick:e.onClose},t("cancel",{ns:"common"})),r.a.createElement(B.a,{disabled:""===i.path||""===i.name,color:"primary",onClick:function(){return e.callback(i)}},t("ok",{ns:"common"}))))}var $r=a(7136),eo=a(246),to=Object(x.a)((function(e){return{blur:{filter:"blur(8px)"},container:{position:"relative",width:128},progress:{position:"absolute",top:"50%",left:"50%",marginLeft:-12,marginTop:-12,zIndex:1},qrcode:{transition:"all .3s ease-in"}}}));function ao(){var e=Object(n.useState)(Object(N.o)(32)),t=Object(D.a)(e,2),a=t[0],o=t[1],i=Object(n.useState)(!0),c=Object(D.a)(i,2),l=c[0],s=c[1],p=(Object(re.a)("application",{keyPrefix:"setting"}).t,Object(we.a)(),to()),d=Object(u.d)(),m=Object(n.useCallback)((function(e,t,a,n){return d(Object(ne.S)(e,t,a,n))}),[d]),f=function(){s(!0),q.c.get("/user/session").then((function(e){o(e.data),s(!1)})).catch((function(e){s(!1),m("top","right",e.message,"error")}))};return Object(n.useEffect)((function(){f();var e=window.setInterval(f,45e3);return function(){window.clearInterval(e)}}),[]),r.a.createElement($r.a,{className:p.container},l&&r.a.createElement(mt.a,{size:24,className:p.progress}),r.a.createElement(eo.a,{className:Le()(p.qrcode,Object(I.a)({},p.blur,l)),value:a}))}var no=function(){var e=Object(we.a)();return r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",x:0,y:0,enableBackground:"new 0 0 444 908",viewBox:"0 0 444 908"},r.a.createElement("path",{fill:e.palette.background.paper,stroke:e.palette.divider,strokeMiterlimit:"10",d:"M378.8.5H65.6C29.6.5.5 29.6.5 65.6V843c0 35.9 29.1 65.1 65.1 65.1h313.2c35.9 0 65.1-29.1 65.1-65.1V65.6c0-36-29.2-65.1-65.1-65.1zm46.5 838.8c0 28-21.8 50.7-48.8 50.7H67.9c-26.9 0-48.8-22.7-48.8-50.7V74.1c0-28 21.8-50.7 48.8-50.7h35.3c4 0 7.2 3.4 7.2 7.5 0 14.9 11.6 27 26 27h171.5c14.4.1 26-12 26-27 0-4.1 3.2-7.5 7.2-7.5h35.4c26.9 0 48.8 22.7 48.8 50.7v765.2z"}),r.a.createElement("path",{fill:"none",stroke:e.palette.divider,strokeMiterlimit:"10",strokeWidth:"4",d:"M243.3 37.3h-46.4c-2 0-3.6-1.6-3.6-3.6h0c0-2 1.6-3.6 3.6-3.6h46.4c2 0 3.6 1.6 3.6 3.6h0c0 2-1.6 3.6-3.6 3.6z"}),r.a.createElement("circle",{cx:"270",cy:"33.7",r:"5.5",fill:"none",stroke:e.palette.divider,strokeMiterlimit:"10",strokeWidth:"4"}))},ro=Object(x.a)((function(e){return{phoneContainer:{maxWidth:450,position:"relative",marginX:"auto",perspective:1500,transformStyle:"preserve-3d",perspectiveOrigin:0},phoneFrame:{position:"relative",borderRadius:"2.75rem",boxShadow:1,width:"75% !important",marginX:"auto",transform:"rotateY(-35deg) rotateX(15deg) translateZ(0)"},phoneImage:{objectFit:"cover",borderRadius:"2.5rem",filter:"dark"===e.palette.type?"brightness(0.7)":"none"},highlight:{background:"linear-gradient(180deg, transparent 82%, ".concat(Object(y.d)(e.palette.secondary.main,.3)," 0%)")},bold:{fontWeight:700},frameContainer:{verticalAlign:"middle"},grid:{padding:e.spacing(2),paddingTop:0,paddingBottom:e.spacing(4)},"@global":{ol:{paddingInlineStart:24},"li::marker":{fontSize:"1.25rem"},li:{marginBottom:e.spacing(2)}}}}));function oo(){var e=Object(re.a)("application",{keyPrefix:"setting"}).t,t=Object(we.a)(),a=Object(u.e)((function(e){return e.siteConfig.title})),n=ro();return r.a.createElement(dt.a,{container:!0,className:n.grid},r.a.createElement(dt.a,{item:!0,container:!0,alignItems:"center",xs:12,md:7},r.a.createElement($r.a,null,r.a.createElement($r.a,{marginBottom:2},r.a.createElement(U.a,{variant:"h4",className:n.bold,color:"text.primary"},r.a.createElement(qa.a,{i18nKey:"setting.connectByiOS",values:{title:a},components:[r.a.createElement(U.a,{key:0,color:"primary",component:"span",variant:"inherit",className:n.highlight})]}))),r.a.createElement($r.a,{color:"text.secondary"},r.a.createElement("ol",null,r.a.createElement("li",null,r.a.createElement(U.a,{variant:"h6",component:"p"},e("downloadOurApp")),r.a.createElement($r.a,{marginTop:1},r.a.createElement($r.a,{component:"a",href:"https://apps.apple.com/us/app/cloudreve/id1619480823",target:"_blank"},r.a.createElement($r.a,{component:"img",src:"/static/img/appstore.svg"})))),r.a.createElement("li",null,r.a.createElement(U.a,{variant:"h6",component:"p"},e("fillInEndpoint")),r.a.createElement($r.a,{marginTop:1},r.a.createElement(ao,null))),r.a.createElement("li",null,r.a.createElement(U.a,{variant:"h6",component:"p"},e("loginApp"))))))),r.a.createElement(dt.a,{item:!0,xs:12,md:5},r.a.createElement($r.a,{className:n.phoneContainer},r.a.createElement($r.a,{className:n.phoneFrame},r.a.createElement($r.a,null,r.a.createElement($r.a,{position:"relative",zIndex:2,maxWidth:1,height:"auto",className:n.frameContainer},r.a.createElement(no,null)),r.a.createElement($r.a,{position:"absolute",top:"2.4%",left:"4%",width:"92.4%",height:"96%"},r.a.createElement($r.a,{component:"img",src:"https://cloudreve.org/imgs/ios/"+("light"===t.palette.type?"main.png":"main_dark.jpg"),alt:"Image Description",effect:"blur",width:1,height:1,className:n.phoneImage})))))))}var io=Object(x.a)((function(e){var t;return{layout:(t={width:"auto",marginTop:"50px",marginLeft:e.spacing(3),marginRight:e.spacing(3)},Object(I.a)(t,e.breakpoints.up(1100+2*e.spacing(3)),{width:1100,marginLeft:"auto",marginRight:"auto"}),Object(I.a)(t,"marginBottom","50px"),t),content:{marginTop:e.spacing(4)},cardContent:{padding:e.spacing(2)},tableContainer:{overflowX:"auto"},create:{marginTop:e.spacing(2)},copy:{marginLeft:10}}}));function co(){var e=Object(re.a)().t,t=Object(n.useState)(0),a=Object(D.a)(t,2),o=a[0],i=a[1],c=Object(n.useState)(!1),l=Object(D.a)(c,2),s=l[0],p=l[1],d=Object(n.useState)([]),m=Object(D.a)(d,2),f=m[0],g=m[1],b=Object(u.e)((function(e){return e.siteConfig.app_promotion})),E=Object(u.d)(),v=Object(n.useCallback)((function(e,t,a,n){return E(Object(ne.S)(e,t,a,n))}),[E]);Object(n.useEffect)((function(){q.c.get("/webdav/accounts").then((function(e){g(e.data.accounts)})).catch((function(e){v("top","right",e.message,"error")}))}),[]);var O=io(),j=h.a.GetUser();return r.a.createElement("div",{className:O.layout},r.a.createElement(Xr,{callback:function(e){p(!1),q.c.post("/webdav/accounts",{path:e.path,name:e.name}).then((function(t){g([{ID:t.data.id,Password:t.data.password,CreatedAt:t.data.created_at,Name:e.name,Root:e.path,Readonly:e.Readonly}].concat(Object(it.a)(f)))})).catch((function(e){v("top","right",e.message,"error")}))},open:s,onClose:function(){return p(!1)}}),r.a.createElement(U.a,{color:"textSecondary",variant:"h4"},e("navbar.connect")),r.a.createElement(A.a,{elevation:3,className:O.content},r.a.createElement(Gr.a,{value:o,indicatorColor:"primary",textColor:"primary",onChange:function(e,t){return i(t)},"aria-label":"disabled tabs example"},r.a.createElement(Hr.a,{label:e("setting.webdavAccounts")}),b&&r.a.createElement(Hr.a,{label:e("setting.iOSApp")})),r.a.createElement("div",{className:O.cardContent},0===o&&r.a.createElement("div",null,r.a.createElement(qr.a,{severity:"info"},e("setting.webdavHint",{url:window.location.origin+"/dav",name:j.user_name})),r.a.createElement(Vr.a,{className:O.tableContainer},r.a.createElement(ct.a,{className:O.table,"aria-label":"simple table"},r.a.createElement(lt.a,null,r.a.createElement(st.a,null,r.a.createElement(ut.a,null,e("setting.annotation")),r.a.createElement(ut.a,null,e("login.password")),r.a.createElement(ut.a,{align:"right"},e("setting.rootFolder")),r.a.createElement(ut.a,{align:"right"},e("setting.createdAt")),r.a.createElement(ut.a,{align:"center"},e("setting.action")))),r.a.createElement(pt.a,null,f.map((function(t,a){return r.a.createElement(st.a,{key:a},r.a.createElement(ut.a,{component:"th",scope:"row"},t.Name),r.a.createElement(ut.a,null,t.Password,r.a.createElement(H.a,{className:O.copy,onClick:function(){return a=t.Password,void(navigator.clipboard?(navigator.clipboard.writeText(a),v("top","center",e("setting.copied"),"success")):v("top","center",e("setting.pleaseManuallyCopy"),"warning"));var a},href:"javascript:void"},e("copyToClipboard",{ns:"common"}))),r.a.createElement(ut.a,{align:"right"},t.Root),r.a.createElement(ut.a,{align:"right"},r.a.createElement(_a.a,{datetime:t.CreatedAt,locale:e("timeAgoLocaleCode",{ns:"common"})})),r.a.createElement(ut.a,{align:"center"},r.a.createElement(De.a,{placement:"top",title:t.Readonly?e("setting.readonlyOff"):e("setting.readonlyOn"),onClick:function(){return function(e){var t=f[e];q.c.patch("/webdav/accounts",{id:t.ID,readonly:!t.Readonly}).then((function(e){t.Readonly=e.data.readonly;var a=Object(it.a)(f);g(a)})).catch((function(e){v("top","right",e.message,"error")}))}(a)}},r.a.createElement(Aa.a,null,r.a.createElement(Wn.a,{on:t.Readonly,onIcon:r.a.createElement(Ht.H,{fontSize:"small"}),offIcon:r.a.createElement(Ht.G,{fontSize:"small"})}))),r.a.createElement(De.a,{placement:"top",title:e("setting.delete"),onClick:function(){return function(e){var t=f[e];q.c.delete("/webdav/accounts/"+t.ID).then((function(){var t=Object(it.a)(f);t=t.filter((function(t,a){return a!==e})),g(t)})).catch((function(e){v("top","right",e.message,"error")}))}(a)}},r.a.createElement(Aa.a,{fontSize:"small"},r.a.createElement(Kr.a,null)))))})))),0===f.length&&r.a.createElement(ma.a,{primary:e("setting.listEmpty")})),r.a.createElement(B.a,{onClick:function(){return p(!0)},className:O.create,variant:"contained",color:"secondary"},e("setting.createNewAccount"))),1===o&&r.a.createElement(oo,null))))}var lo=Object(x.a)((function(e){var t;return{layout:(t={width:"auto",marginTop:"50px",marginLeft:e.spacing(3),marginRight:e.spacing(3)},Object(I.a)(t,e.breakpoints.up(1100+2*e.spacing(3)),{width:1100,marginLeft:"auto",marginRight:"auto"}),Object(I.a)(t,"marginBottom","50px"),t),content:{marginTop:e.spacing(4),overflowX:"auto"},cardContent:{padding:e.spacing(2)},tableContainer:{overflowX:"auto"},create:{marginTop:e.spacing(2)},noWrap:{wordBreak:"keepAll"},footer:{padding:e.spacing(2)}}}));function so(){var e=Object(re.a)().t,t=Object(n.useState)([]),a=Object(D.a)(t,2),o=a[0],i=a[1],c=Object(n.useState)(0),l=Object(D.a)(c,2),s=l[0],p=l[1],d=Object(n.useState)(1),m=Object(D.a)(d,2),f=m[0],h=m[1],g=Object(u.d)(),b=Object(n.useCallback)((function(e,t,a,n){return g(Object(ne.S)(e,t,a,n))}),[g]);Object(n.useEffect)((function(){!function(e){q.c.get("/user/setting/tasks?page="+e).then((function(e){i(e.data.tasks),p(e.data.total)})).catch((function(e){b("top","right",e.message,"error")}))}(f)}),[f]);var E=lo();return r.a.createElement("div",{className:E.layout},r.a.createElement(U.a,{color:"textSecondary",variant:"h4"},e("navbar.taskQueue")),r.a.createElement(A.a,{elevation:3,className:E.content},r.a.createElement(ct.a,{className:E.table,"aria-label":"simple table"},r.a.createElement(lt.a,null,r.a.createElement(st.a,null,r.a.createElement(ut.a,{nowrap:"nowrap"},e("setting.createdAt")),r.a.createElement(ut.a,{nowrap:"nowrap",align:"right"},e("setting.taskType")),r.a.createElement(ut.a,{nowrap:"nowrap",align:"right"},e("setting.taskStatus")),r.a.createElement(ut.a,{nowrap:"nowrap",align:"right"},e("setting.lastProgress")),r.a.createElement(ut.a,{nowrap:"nowrap"},e("setting.errorDetails")))),r.a.createElement(pt.a,null,o.map((function(t,a){return r.a.createElement(st.a,{key:a},r.a.createElement(ut.a,{nowrap:"nowrap",component:"th",scope:"row"},Object(aa.a)(t.create_date)),r.a.createElement(ut.a,{nowrap:"nowrap",align:"right"},Object(Vt.f)(t.type)),r.a.createElement(ut.a,{nowrap:"nowrap",align:"right"},Object(Vt.e)(t.status)),r.a.createElement(ut.a,{nowrap:"nowrap",align:"right"},Object(Vt.d)(t.type,t.progress)),r.a.createElement(ut.a,{className:E.noWrap},function(t){if(""===t)return"-";try{var a=JSON.parse(t);return"".concat(a.msg,": ").concat(a.error)}catch(n){return e("uploader.unknownStatus")}}(t.error)))})))),0===o.length&&r.a.createElement(ma.a,{primary:e("setting.listEmpty")}),r.a.createElement("div",{className:E.footer},r.a.createElement(Za.a,{count:Math.ceil(s/10),onChange:function(e,t){return h(t)},color:"secondary"}))))}var uo=function(e){Object(se.a)(a,e);var t=Object(ue.a)(a);function a(){var e;Object(ie.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={listType:0,shareList:[],page:1,user:null,total:0},e.handleChange=function(t,a){e.setState({listType:a}),1===a?e.loadList(1,"hot"):0===a&&e.loadList(1,"default")},e.componentDidMount=function(){e.loadList(1,"default")},e.loadList=function(t,a){q.c.get("/user/profile/"+e.props.match.params.id+"?page="+t+"&type="+a).then((function(t){e.setState({shareList:t.data.items,user:t.data.user,total:t.data.total})})).catch((function(t){e.props.toggleSnackbar("top","right",t.message,"error")}))},e.loadNext=function(){e.loadList(e.state.page+1,0===e.state.listType?"default":"hot")},e.loadPrev=function(){e.loadList(e.state.page-1,0===e.state.listType?"default":"hot")},e}return Object(ce.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.t;return r.a.createElement("div",{className:a.layout},null===this.state.user&&r.a.createElement("div",null),null!==this.state.user&&r.a.createElement(A.a,null,r.a.createElement("div",{className:a.userNav},r.a.createElement("div",null,r.a.createElement(_.a,{className:a.avatarContainer,src:"/api/v3/user/avatar/"+this.state.user.id+"/l"})),r.a.createElement("div",null,r.a.createElement(U.a,{className:a.nickName,noWrap:!0},this.state.user.nick))),r.a.createElement(Gr.a,{value:this.state.listType,indicatorColor:"primary",textColor:"primary",onChange:this.handleChange,centered:!0},r.a.createElement(Hr.a,{label:n("setting.allShares")}),r.a.createElement(Hr.a,{label:n("setting.trendingShares")}),r.a.createElement(Hr.a,{label:n("setting.profile")})),2===this.state.listType&&r.a.createElement("div",{className:a.infoContainer},r.a.createElement(dt.a,{container:!0,spacing:24},r.a.createElement(dt.a,{item:!0,md:4,xs:12,className:a.infoItem},r.a.createElement(U.a,{color:"textSecondary",variant:"h6"},n("setting.uid")),r.a.createElement(U.a,null,this.state.user.id)),r.a.createElement(dt.a,{item:!0,md:4,xs:12,className:a.infoItem},r.a.createElement(U.a,{color:"textSecondary",variant:"h6"},n("setting.nickname")),r.a.createElement(U.a,null,this.state.user.nick)),r.a.createElement(dt.a,{item:!0,md:4,xs:12,className:a.infoItem},r.a.createElement(U.a,{color:"textSecondary",variant:"h6"},n("setting.group")),r.a.createElement(U.a,null,this.state.user.group)),r.a.createElement(dt.a,{item:!0,md:4,xs:12,className:a.infoItem},r.a.createElement(U.a,{color:"textSecondary",variant:"h6"},n("setting.totalShares")),r.a.createElement(U.a,null,this.state.total)),r.a.createElement(dt.a,{item:!0,md:4,xs:12,className:a.infoItem},r.a.createElement(U.a,{color:"textSecondary",variant:"h6"},n("setting.regTime")),r.a.createElement(U.a,null,this.state.user.date)))),(0===this.state.listType||1===this.state.listType)&&r.a.createElement("div",null,r.a.createElement("div",{className:a.tableContainer},r.a.createElement(ct.a,{className:a.table},r.a.createElement(lt.a,null,r.a.createElement(st.a,null,r.a.createElement(ut.a,null,n("setting.fileName")),r.a.createElement(ut.a,{className:a.mobileHide},n("setting.shareDate")),r.a.createElement(ut.a,{className:[a.th,a.mobileHide]},n("setting.downloadNumber")),r.a.createElement(ut.a,{className:[a.th,a.mobileHide]},n("setting.viewNumber")))),r.a.createElement(pt.a,null,this.state.shareList.map((function(t,o){return r.a.createElement(st.a,{key:o,className:a.tableLink,onClick:function(){return e.props.history.push("/s/"+t.key)}},r.a.createElement(ut.a,null,r.a.createElement(U.a,null,t.source?t.source.name:"["+n("share.expired")+"]")),r.a.createElement(ut.a,{nowrap:"nowrap",className:a.mobileHide},Object(aa.a)(t.create_date)),r.a.createElement(ut.a,{className:a.mobileHide},t.downloads),r.a.createElement(ut.a,{className:a.mobileHide},t.views))}))))),0!==this.state.shareList.length&&0===this.state.listType&&r.a.createElement("div",{className:a.navigator},r.a.createElement(Za.a,{count:Math.ceil(this.state.total/10),onChange:function(t,a){return e.loadList(a,0===e.state.listType?"default":"hot")},color:"secondary"})))))}}]),a}(n.Component),po=Object(u.c)((function(){return{}}),(function(e){return{toggleSnackbar:function(t,a,n,r){e(Object(ne.S)(t,a,n,r))}}}))(Object(Ie.a)((function(e){return{layout:Object(I.a)({width:"auto",marginTop:"50px",marginLeft:e.spacing(3),marginRight:e.spacing(3),marginBottom:"30px"},e.breakpoints.up("sm"),{width:700,marginLeft:"auto",marginRight:"auto"}),userNav:{borderRadius:"".concat(e.shape.borderRadius,"px ").concat(e.shape.borderRadius,"px 0 0"),height:"270px",backgroundColor:e.palette.primary.main,padding:"20px 20px 2em",backgroundImage:"url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1600 900'%3E%3Cpolygon fill='"+e.palette.primary.light.replace("#","%23")+"' points='957 450 539 900 1396 900'/%3E%3Cpolygon fill='"+e.palette.primary.dark.replace("#","%23")+"' points='957 450 872.9 900 1396 900'/%3E%3Cpolygon fill='"+e.palette.secondary.main.replace("#","%23")+"' points='-60 900 398 662 816 900'/%3E%3Cpolygon fill='"+e.palette.secondary.dark.replace("#","%23")+"' points='337 900 398 662 816 900'/%3E%3Cpolygon fill='"+e.palette.secondary.light.replace("#","%23")+"' points='1203 546 1552 900 876 900'/%3E%3Cpolygon fill='"+e.palette.secondary.main.replace("#","%23")+"' points='1203 546 1552 900 1162 900'/%3E%3Cpolygon fill='"+e.palette.primary.dark.replace("#","%23")+"' points='641 695 886 900 367 900'/%3E%3Cpolygon fill='"+e.palette.primary.main.replace("#","%23")+"' points='587 900 641 695 886 900'/%3E%3Cpolygon fill='"+e.palette.secondary.light.replace("#","%23")+"' points='1710 900 1401 632 1096 900'/%3E%3Cpolygon fill='"+e.palette.secondary.dark.replace("#","%23")+"' points='1710 900 1401 632 1365 900'/%3E%3Cpolygon fill='"+e.palette.secondary.main.replace("#","%23")+"' points='1210 900 971 687 725 900'/%3E%3Cpolygon fill='"+e.palette.secondary.dark.replace("#","%23")+"' points='943 900 1210 900 971 687'/%3E%3C/svg%3E\")",backgroundSize:"cover",backgroundPosition:"bottom"},avatarContainer:{height:"80px",width:"80px",borderRaidus:"50%",margin:"auto",marginTop:"50px",boxShadow:"0 2px 5px 0 rgba(0,0,0,0.16), 0 2px 10px 0 rgba(0,0,0,0.12)",border:"2px solid #fff"},nickName:{width:"200px",margin:"auto",textAlign:"center",marginTop:"1px",fontSize:"25px",color:"#ffffff",opacity:"0.81"},th:{minWidth:"106px"},mobileHide:Object(I.a)({},e.breakpoints.down("md"),{display:"none"}),tableLink:{cursor:"pointer"},navigator:{padding:e.spacing(2)},pageInfo:{marginTop:"14px",marginLeft:"23px"},infoItem:{paddingLeft:"46px!important",paddingBottom:"20px!important"},infoContainer:{marginTop:"30px"},tableContainer:{overflowX:"auto"}}}))(Object(s.k)(Object(Jt.a)()(uo)))),mo=a(456),fo=a.n(mo),ho=a(449),go=a.n(ho),bo=a(450),Eo=a.n(bo),vo=a(448),Oo=a.n(vo),jo=a(451),wo=a.n(jo),ko=a(454),yo=a.n(ko),xo=a(455),Co=a.n(xo),So=a(447),No=a.n(So),To=a(452),Po=a.n(To),Lo=a(453),Fo=a.n(Lo),Do=a(92),Io=a.n(Do),Ro=a(457),Mo=a.n(Ro),Ao=a(7148),_o=a(7162),Uo=a(198),Wo=a(148),zo=a(7141),Bo=a(200),Go=a(7053),Ho=a(252),Vo=a(7140),qo=a(147),Ko=a(7142),Yo=a(7143),Jo=a(7144),Zo=a(7145),Qo=a(7146),Xo=a(7147),$o=a(7105),ei=Object(x.a)((function(e){return{sectionTitle:{paddingBottom:"10px",paddingTop:"30px"},rightIcon:{marginTop:"4px",marginRight:"10px",color:e.palette.text.secondary},desenList:{paddingTop:0,paddingBottom:0},iconFix:{marginRight:"11px",marginLeft:"7px",minWidth:40},flexContainer:{display:"flex"}}}));function ti(e){var t=Object(re.a)().t,a=Object(n.useState)(""),o=Object(D.a)(a,2),i=o[0],c=o[1],l=Object(n.useState)(!1),s=Object(D.a)(l,2),p=s[0],d=s[1],m=Object(u.d)(),f=Object(n.useCallback)((function(e,t,a,n){return m(Object(ne.S)(e,t,a,n))}),[m]),h=function(a){q.c.patch("/user/setting/authn",{id:a}).then((function(){f("top","right",t("setting.authenticatorRemoved"),"success"),e.remove(a)})).catch((function(e){f("top","right",e.message,"error")})).then((function(){d(!1)}))},g=ei();return r.a.createElement("div",null,r.a.createElement(Ga.a,{open:p,onClose:function(){return d(!1)}},r.a.createElement(In.a,null,t("setting.removedAuthenticator")),r.a.createElement(Rn.a,null,t("setting.removedAuthenticatorConfirm")),r.a.createElement(Mn.a,null,r.a.createElement(B.a,{onClick:function(){return d(!1)},color:"default"},t("cancel",{ns:"common"})),r.a.createElement(B.a,{onClick:function(){return h(i)},color:"primary"},t("ok",{ns:"common"})))),r.a.createElement(U.a,{className:g.sectionTitle,variant:"subtitle2"},t("setting.hardwareAuthenticator")),r.a.createElement(A.a,null,r.a.createElement(Uo.a,{className:g.desenList},e.list.map((function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Wo.a,{button:!0,style:{paddingRight:60},onClick:function(){d(!0),c(e.id)}},r.a.createElement(gt.a,{className:g.iconFix},r.a.createElement(J.a,null)),r.a.createElement(Ca.a,{primary:e.fingerprint}),r.a.createElement(Bo.a,{onClick:function(){return h(e.id)},className:g.flexContainer},r.a.createElement(Jn.a,{className:g.rightIcon}))),r.a.createElement(G.a,null))})),r.a.createElement(Wo.a,{button:!0,onClick:function(){navigator.credentials?q.c.put("/user/authn",{}).then((function(e){var t=e.data;if(t.publicKey.challenge=Object(N.b)(t.publicKey.challenge),t.publicKey.user.id=Object(N.b)(t.publicKey.user.id),t.publicKey.excludeCredentials)for(var a=0;a<t.publicKey.excludeCredentials.length;a++)t.publicKey.excludeCredentials[a].id=Object(N.b)(t.publicKey.excludeCredentials[a].id);return navigator.credentials.create({publicKey:t.publicKey})})).then((function(e){var t=e.response.attestationObject,a=e.response.clientDataJSON,n=e.rawId;return q.c.put("/user/authn/finish",JSON.stringify({id:e.id,rawId:Object(N.c)(n),type:e.type,response:{attestationObject:Object(N.c)(t),clientDataJSON:Object(N.c)(a)}}))})).then((function(a){e.add(a.data),f("top","right",t("setting.authenticatorAdded"),"success")})).catch((function(e){console.log(e),f("top","right",e.message,"error")})):f("top","right",t("setting.browserNotSupported"),"warning")}},r.a.createElement(gt.a,{className:g.iconFix},r.a.createElement(gr.a,null)),r.a.createElement(Ca.a,{primary:t("setting.addNewAuthenticator")}),r.a.createElement(Bo.a,{className:g.flexContainer},r.a.createElement(va.a,{className:g.rightIcon}))))))}var ai=Object(x.a)((function(e){return{}}));function ni(e){var t=Object(re.a)().t,a=Object(n.useState)(aa.c),o=Object(D.a)(a,2),i=o[0],c=o[1],l=Object(u.d)(),s=Object(n.useCallback)((function(e,t,a,n){return l(Object(ne.S)(e,t,a,n))}),[l]),p=ai();return r.a.createElement(Ga.a,{open:e.open,onClose:e.onClose,"aria-labelledby":"form-dialog-title"},r.a.createElement(In.a,{id:"form-dialog-title"},t("setting.timeZone")),r.a.createElement(Rn.a,null,r.a.createElement(W.a,null,r.a.createElement(z.a,{label:t("setting.timeZoneCode"),value:i,onChange:function(e){return c(e.target.value)}}))),r.a.createElement(Mn.a,null,r.a.createElement(B.a,{onClick:e.onClose},t("cancel",{ns:"common"})),r.a.createElement("div",{className:p.wrapper},r.a.createElement(B.a,{color:"primary",disabled:""===i,onClick:function(){Object(aa.d)(i)?(h.a.SetPreference("timeZone",i),Object(aa.b)(),e.onClose()):s("top","right","\u65e0\u6548\u7684\u65f6\u533a\u540d\u79f0","warning")}},t("ok",{ns:"common"}),e.modalsLoading&&r.a.createElement(mt.a,{size:24,className:p.buttonProgress})))))}var ri=a(243),oi=function(e){Object(se.a)(a,e);var t=Object(ue.a)(a);function a(e){var n;return Object(ie.a)(this,a),(n=t.call(this,e)).state={avatarModal:!1,nickModal:!1,changePassword:!1,loading:"",oldPwd:"",newPwd:"",webdavPwd:"",newPwdRepeat:"",twoFactor:!1,authCode:"",changeTheme:!1,chosenTheme:null,showWebDavUrl:!1,showWebDavUserName:!1,changeWebDavPwd:!1,groupBackModal:!1,changePolicy:!1,changeTimeZone:!1,settings:{uid:0,group_expires:0,policy:{current:{name:"-",id:""},options:[]},qq:"",homepage:!0,two_factor:"",two_fa_secret:"",prefer_theme:"",themes:{},authn:[]}},n.handleClose=function(){n.setState({avatarModal:!1,nickModal:!1,changePassword:!1,loading:"",twoFactor:!1,changeTheme:!1,showWebDavUrl:!1,showWebDavUserName:!1,changeWebDavPwd:!1,groupBackModal:!1,changePolicy:!1})},n.toggleViewMethod=function(){var e="icon"===n.props.viewMethod?"list":"list"===n.props.viewMethod?"smallIcon":"icon";h.a.SetPreference("view_method",e),n.props.changeView(e)},n.loadSetting=function(){q.c.get("/user/setting").then((function(e){var t=JSON.parse(e.data.themes);e.data.themes=t,n.setState({settings:e.data})})).catch((function(e){n.props.toggleSnackbar("top","right",e.message,"error")}))},n.useGravatar=function(){n.setState({loading:"gravatar"}),q.c.put("/user/setting/avatar").then((function(){n.props.toggleSnackbar("top","right",n.props.t("setting.avatarUpdated"),"success"),n.setState({loading:""})})).catch((function(e){n.props.toggleSnackbar("top","right",e.message,"error"),n.setState({loading:""})}))},n.changeNick=function(){n.setState({loading:"nick"}),q.c.patch("/user/setting/nick",{nick:n.state.nick}).then((function(){n.props.toggleSnackbar("top","right",n.props.t("setting.nickChanged"),"success"),n.setState({loading:""}),n.handleClose()})).catch((function(e){n.props.toggleSnackbar("top","right",e.message,"error"),n.setState({loading:""})}))},n.uploadAvatar=function(){n.setState({loading:"avatar"});var e=new FormData;e.append("avatar",n.fileInput.current.files[0]),q.c.post("/user/setting/avatar",e,{headers:{"Content-Type":"multipart/form-data"}}).then((function(){n.props.toggleSnackbar("top","right",n.props.t("setting.avatarUpdated"),"success"),n.setState({loading:""})})).catch((function(e){n.props.toggleSnackbar("top","right",e.message,"error"),n.setState({loading:""})}))},n.handleToggle=function(){q.c.patch("/user/setting/homepage",{status:!n.state.settings.homepage}).then((function(){n.props.toggleSnackbar("top","right",n.props.t("setting.settingSaved"),"success"),n.setState({settings:Object(m.a)(Object(m.a)({},n.state.settings),{},{homepage:!n.state.settings.homepage})})})).catch((function(e){n.props.toggleSnackbar("top","right",e.message,"error")}))},n.changhePwd=function(){n.state.newPwd===n.state.newPwdRepeat?(n.setState({loading:"changePassword"}),q.c.patch("/user/setting/password",{old:n.state.oldPwd,new:n.state.newPwd}).then((function(){n.props.toggleSnackbar("top","right",n.props.t("login.passwordReset"),"success"),n.setState({loading:""}),n.handleClose()})).catch((function(e){n.props.toggleSnackbar("top","right",e.message,"error"),n.setState({loading:""})}))):n.props.toggleSnackbar("top","right",n.props.t("login.passwordNotMatch"),"warning")},n.changeTheme=function(){n.setState({loading:"changeTheme"}),q.c.patch("/user/setting/theme",{theme:n.state.chosenTheme}).then((function(){n.props.toggleSnackbar("top","right",n.props.t("setting.themeColorChanged"),"success"),n.props.applyThemes(n.state.chosenTheme),n.setState({loading:""})})).catch((function(e){n.props.toggleSnackbar("top","right",e.message,"error"),n.setState({loading:""})}))},n.changheWebdavPwd=function(){n.setState({loading:"changheWebdavPwd"}),Io.a.post("/Member/setWebdavPwd",{pwd:n.state.webdavPwd}).then((function(e){"1"===e.data.error?(n.props.toggleSnackbar("top","right",e.data.msg,"error"),n.setState({loading:""})):(n.props.toggleSnackbar("top","right",e.data.msg,"success"),n.setState({loading:"",changeWebDavPwd:!1}))})).catch((function(e){n.props.toggleSnackbar("top","right",e.message,"error"),n.setState({loading:""})}))},n.init2FA=function(){n.state.settings.two_factor?n.setState({twoFactor:!0}):q.c.get("/user/setting/2fa").then((function(e){n.setState({two_fa_secret:e.data,twoFactor:!0})})).catch((function(e){n.props.toggleSnackbar("top","right",e.message,"error")}))},n.twoFactor=function(){n.setState({loading:"twoFactor"}),q.c.patch("/user/setting/2fa",{code:n.state.authCode}).then((function(){n.props.toggleSnackbar("top","right",n.props.t("setting.settingSaved"),"success"),n.setState({loading:"",settings:Object(m.a)(Object(m.a)({},n.state.settings),{},{two_factor:!n.state.settings.two_factor})}),n.handleClose()})).catch((function(e){n.props.toggleSnackbar("top","right",e.message,"error"),n.setState({loading:""})}))},n.handleChange=function(e){return function(t){n.setState(Object(I.a)({},e,t.target.value))}},n.handleAlignment=function(e,t){return n.setState({chosenTheme:t})},n.toggleThemeMode=function(e){var t=null===e?"light":"light"===e?"dark":null;n.props.toggleDaylightMode(),h.a.SetPreference("theme_mode",t)},n.fileInput=r.a.createRef(),n}return Object(ce.a)(a,[{key:"componentDidMount",value:function(){this.loadSetting()}},{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.t,o=h.a.GetUser(),i=h.a.GetPreference("theme_mode");return r.a.createElement("div",null,r.a.createElement("div",{className:a.layout},r.a.createElement(U.a,{className:a.sectionTitle,variant:"subtitle2"},n("setting.profile")),r.a.createElement(A.a,null,r.a.createElement(Uo.a,{className:a.desenList},r.a.createElement(Wo.a,{button:!0,onClick:function(){return e.setState({avatarModal:!0})}},r.a.createElement(zo.a,null,r.a.createElement(_.a,{src:"/api/v3/user/avatar/"+o.id+"/l"})),r.a.createElement(Ca.a,{primary:n("setting.avatar")}),r.a.createElement(Bo.a,null,r.a.createElement(va.a,{className:a.rightIcon}))),r.a.createElement(G.a,null),r.a.createElement(Wo.a,{button:!0},r.a.createElement(gt.a,{className:a.iconFix},r.a.createElement(Ko.a,null)),r.a.createElement(Ca.a,{primary:n("setting.uid")}),r.a.createElement(Bo.a,null,r.a.createElement(U.a,{className:a.infoTextWithIcon,color:"textSecondary"},this.state.settings.uid))),r.a.createElement(G.a,null),r.a.createElement(Wo.a,{button:!0,onClick:function(){return e.setState({nickModal:!0})}},r.a.createElement(gt.a,{className:a.iconFix},r.a.createElement(No.a,null)),r.a.createElement(Ca.a,{primary:n("setting.nickname")}),r.a.createElement(Bo.a,{onClick:function(){return e.setState({nickModal:!0})},className:a.flexContainer},r.a.createElement(U.a,{className:a.infoTextWithIcon,color:"textSecondary"},o.nickname),r.a.createElement(va.a,{className:a.rightIconWithText}))),r.a.createElement(G.a,null),r.a.createElement(Wo.a,{button:!0},r.a.createElement(gt.a,{className:a.iconFix},r.a.createElement(Oo.a,null)),r.a.createElement(Ca.a,{primary:n("login.email")}),r.a.createElement(Bo.a,null,r.a.createElement(U.a,{className:a.infoText,color:"textSecondary"},o.user_name))),r.a.createElement(G.a,null),r.a.createElement(Wo.a,{button:!0},r.a.createElement(gt.a,{className:a.iconFix},r.a.createElement(go.a,null)),r.a.createElement(Ca.a,{primary:n("setting.group")}),r.a.createElement(Bo.a,null,r.a.createElement(U.a,{className:a.infoText,color:"textSecondary"},o.group.name))),r.a.createElement(G.a,null),r.a.createElement(Wo.a,{button:!0},r.a.createElement(gt.a,{className:a.iconFix},r.a.createElement(Eo.a,null)),r.a.createElement(Ca.a,{primary:n("setting.regTime")}),r.a.createElement(Bo.a,null,r.a.createElement(U.a,{className:a.infoText,color:"textSecondary"},Object(aa.a)(o.created_at)))))),r.a.createElement(U.a,{className:a.sectionTitle,variant:"subtitle2"},n("setting.privacyAndSecurity")),r.a.createElement(A.a,null,r.a.createElement(Uo.a,{className:a.desenList},r.a.createElement(Wo.a,{button:!0},r.a.createElement(gt.a,{className:a.iconFix},r.a.createElement(wo.a,null)),r.a.createElement(Ca.a,{primary:n("setting.profilePage")}),r.a.createElement(Bo.a,null,r.a.createElement(Go.a,{onChange:this.handleToggle,checked:this.state.settings.homepage}))),r.a.createElement(G.a,null),r.a.createElement(Wo.a,{button:!0,onClick:function(){return e.setState({changePassword:!0})}},r.a.createElement(gt.a,{className:a.iconFix},r.a.createElement(Nn.a,null)),r.a.createElement(Ca.a,{primary:n("setting.accountPassword")}),r.a.createElement(Bo.a,{className:a.flexContainer},r.a.createElement(va.a,{className:a.rightIcon}))),r.a.createElement(G.a,null),r.a.createElement(Wo.a,{button:!0,onClick:function(){return e.init2FA()}},r.a.createElement(gt.a,{className:a.iconFix},r.a.createElement(Po.a,null)),r.a.createElement(Ca.a,{primary:n("setting.2fa")}),r.a.createElement(Bo.a,{className:a.flexContainer},r.a.createElement(U.a,{className:a.infoTextWithIcon,color:"textSecondary"},this.state.settings.two_factor?n("setting.enabled"):n("setting.disabled")),r.a.createElement(va.a,{className:a.rightIconWithText}))))),r.a.createElement(ti,{list:this.state.settings.authn,add:function(t){e.setState({settings:Object(m.a)(Object(m.a)({},e.state.settings),{},{authn:[].concat(Object(it.a)(e.state.settings.authn),[t])})})},remove:function(t){var a=Object(it.a)(e.state.settings.authn);a=a.filter((function(e){return e.id!==t})),e.setState({settings:Object(m.a)(Object(m.a)({},e.state.settings),{},{authn:a})})}}),r.a.createElement(U.a,{className:a.sectionTitle,variant:"subtitle2"},n("setting.appearance")),r.a.createElement(A.a,null,r.a.createElement(Uo.a,{className:a.desenList},r.a.createElement(Wo.a,{button:!0,onClick:function(){return e.setState({changeTheme:!0})}},r.a.createElement(gt.a,{className:a.iconFix},r.a.createElement(Fo.a,null)),r.a.createElement(Ca.a,{primary:n("setting.themeColor")}),r.a.createElement(Bo.a,{className:a.flexContainer},r.a.createElement("div",{className:a.firstColor}),r.a.createElement("div",{className:a.secondColor}))),r.a.createElement(G.a,null),r.a.createElement(Wo.a,{button:!0,onClick:function(){return e.toggleThemeMode(i)}},r.a.createElement(gt.a,{className:a.iconFix},r.a.createElement(Yo.a,null)),r.a.createElement(Ca.a,{primary:n("setting.darkMode")}),r.a.createElement(Bo.a,{className:a.flexContainer},r.a.createElement(U.a,{className:a.infoTextWithIcon,color:"textSecondary"},i&&n("dark"===i?"setting.enabled":"setting.disabled"),null===i&&n("setting.syncWithSystem")),r.a.createElement(va.a,{className:a.rightIconWithText}))),r.a.createElement(G.a,null),r.a.createElement(Wo.a,{button:!0,onClick:function(){return e.toggleViewMethod()}},r.a.createElement(gt.a,{className:a.iconFix},r.a.createElement(Jo.a,null)),r.a.createElement(Ca.a,{primary:n("setting.fileList")}),r.a.createElement(Bo.a,{className:a.flexContainer},r.a.createElement(U.a,{className:a.infoTextWithIcon,color:"textSecondary"},"icon"===this.props.viewMethod&&n("fileManager.gridViewLarge"),"list"===this.props.viewMethod&&n("fileManager.listView"),"smallIcon"===this.props.viewMethod&&n("fileManager.gridViewSmall")),r.a.createElement(va.a,{className:a.rightIconWithText}))),r.a.createElement(G.a,null),r.a.createElement(Wo.a,{onClick:function(){return e.setState({changeTimeZone:!0})},button:!0},r.a.createElement(gt.a,{className:a.iconFix},r.a.createElement(Zo.a,null)),r.a.createElement(Ca.a,{primary:n("setting.timeZone")}),r.a.createElement(Bo.a,{className:a.flexContainer},r.a.createElement(U.a,{className:a.infoTextWithIcon,color:"textSecondary"},aa.c),r.a.createElement(va.a,{className:a.rightIconWithText}))),r.a.createElement(G.a,null),r.a.createElement(Wo.a,{onClick:function(){return e.props.selectLanguage()},button:!0},r.a.createElement(gt.a,{className:a.iconFix},r.a.createElement(Qo.a,null)),r.a.createElement(Ca.a,{primary:n("setting.language")}),r.a.createElement(Bo.a,{className:a.flexContainer},r.a.createElement(va.a,{className:a.rightIconWithText}))))),o.group.webdav&&r.a.createElement("div",null,r.a.createElement(U.a,{className:a.sectionTitle,variant:"subtitle2"},"WebDAV"),r.a.createElement(A.a,null,r.a.createElement(Uo.a,{className:a.desenList},r.a.createElement(Wo.a,{button:!0,onClick:function(){return e.setState({showWebDavUrl:!0})}},r.a.createElement(gt.a,{className:a.iconFix},r.a.createElement(yo.a,null)),r.a.createElement(Ca.a,{primary:n("setting.webdavServer")}),r.a.createElement(Bo.a,{className:a.flexContainer},r.a.createElement(va.a,{className:a.rightIcon}))),r.a.createElement(G.a,null),r.a.createElement(Wo.a,{button:!0,onClick:function(){return e.setState({showWebDavUserName:!0})}},r.a.createElement(gt.a,{className:a.iconFix},r.a.createElement(At.a,null)),r.a.createElement(Ca.a,{primary:n("setting.userName")}),r.a.createElement(Bo.a,{className:a.flexContainer},r.a.createElement(va.a,{className:a.rightIcon}))),r.a.createElement(G.a,null),r.a.createElement(Wo.a,{button:!0,onClick:function(){return e.props.history.push("/webdav?")}},r.a.createElement(gt.a,{className:a.iconFix},r.a.createElement(Co.a,null)),r.a.createElement(Ca.a,{primary:n("setting.manageAccount")}),r.a.createElement(Bo.a,{className:a.flexContainer},r.a.createElement(va.a,{className:a.rightIcon})))))),r.a.createElement(U.a,{className:a.sectionTitle,variant:"subtitle2"},n("setting.aboutCloudreve")),r.a.createElement(A.a,null,r.a.createElement(Uo.a,{className:a.desenList},r.a.createElement(Wo.a,{button:!0,onClick:function(){return window.open("https://github.com/cloudreve/cloudreve")}},r.a.createElement(gt.a,{className:a.iconFix},r.a.createElement(Xo.a,null)),r.a.createElement(Ca.a,{primary:n("setting.githubRepo")}),r.a.createElement(Bo.a,{className:a.flexContainer},r.a.createElement(va.a,{className:a.rightIconWithText}))),r.a.createElement(G.a,null),r.a.createElement(Wo.a,{button:!0,onClick:function(){return window.open("https://cloudreve.org")}},r.a.createElement(gt.a,{className:a.iconFix},r.a.createElement($o.a,null)),r.a.createElement(Ca.a,{primary:n("setting.homepage")}),r.a.createElement(Bo.a,{className:a.flexContainer},r.a.createElement(va.a,{className:a.rightIconWithText}))))),r.a.createElement("div",{className:a.paddingBottom})),r.a.createElement(ni,{onClose:function(){return e.setState({changeTimeZone:!1})},open:this.state.changeTimeZone}),r.a.createElement(Ga.a,{open:this.state.avatarModal,onClose:this.handleClose},r.a.createElement(In.a,null,n("setting.avatar")),r.a.createElement(Uo.a,null,r.a.createElement(Wo.a,{button:!0,component:"label",disabled:"avatar"===this.state.loading},r.a.createElement("input",{type:"file",accept:"image/*",style:{display:"none"},ref:this.fileInput,onChange:this.uploadAvatar}),r.a.createElement(zo.a,null,r.a.createElement(_.a,{className:a.uploadFromFile},r.a.createElement(fo.a,null))),r.a.createElement(Ca.a,{primary:n("setting.uploadImage")})),r.a.createElement(Wo.a,{button:!0,onClick:this.useGravatar,disabled:"gravatar"===this.state.loading},r.a.createElement(zo.a,null,r.a.createElement(_.a,{className:a.userGravatar},r.a.createElement(Mo.a,null))),r.a.createElement(Ca.a,{className:a.paddingText,primary:n("setting.useGravatar")}))),r.a.createElement(Mn.a,null,r.a.createElement(B.a,{onClick:this.handleClose,color:"primary"},n("cancel",{ns:"common"})))),r.a.createElement(Ga.a,{open:this.state.nickModal,onClose:this.handleClose},r.a.createElement(In.a,null,n("setting.changeNick")),r.a.createElement(Rn.a,null,r.a.createElement(z.a,{id:"standard-name",label:n("setting.nickname"),className:a.textField,value:this.state.nick,onChange:this.handleChange("nick"),margin:"normal",autoFocus:!0})),r.a.createElement(Mn.a,null,r.a.createElement(B.a,{onClick:this.handleClose,color:"default"},n("cancel",{ns:"common"})),r.a.createElement(B.a,{onClick:this.changeNick,color:"primary",disabled:"nick"===this.state.loading||""===this.state.nick},n("ok",{ns:"common"})))),r.a.createElement(Ga.a,{open:this.state.changePassword,onClose:this.handleClose},r.a.createElement(In.a,null,n("login.resetPassword")),r.a.createElement(Rn.a,null,r.a.createElement("div",null,r.a.createElement(z.a,{id:"standard-name",label:n("setting.originalPassword"),type:"password",className:a.textField,value:this.state.oldPwd,onChange:this.handleChange("oldPwd"),margin:"normal",autoFocus:!0})),r.a.createElement("div",null,r.a.createElement(z.a,{id:"standard-name",label:n("login.newPassword"),type:"password",className:a.textField,value:this.state.newPwd,onChange:this.handleChange("newPwd"),margin:"normal"})),r.a.createElement("div",null,r.a.createElement(z.a,{id:"standard-name",label:n("login.repeatNewPassword"),type:"password",className:a.textField,value:this.state.newPwdRepeat,onChange:this.handleChange("newPwdRepeat"),margin:"normal"}))),r.a.createElement(Mn.a,null,r.a.createElement(B.a,{onClick:this.handleClose,color:"default"},n("cancel",{ns:"common"})),r.a.createElement(B.a,{onClick:this.changhePwd,color:"primary",disabled:"changePassword"===this.state.loading||""===this.state.oldPwd||""===this.state.newPwdRepeat||""===this.state.newPwd},n("ok",{ns:"common"})))),r.a.createElement(Ga.a,{open:this.state.twoFactor,onClose:this.handleClose},r.a.createElement(In.a,null,this.state.settings.two_factor?n("setting.disable2FA"):n("setting.enable2FA")),r.a.createElement(Rn.a,null,r.a.createElement("div",{className:a.flexContainerResponse},!this.state.settings.two_factor&&r.a.createElement("div",{className:a.qrcode},r.a.createElement(eo.a,{value:"otpauth://totp/"+this.props.title+"?secret="+this.state.two_fa_secret})),r.a.createElement("div",{className:a.desText},!this.state.settings.two_factor&&r.a.createElement(U.a,null,n("setting.2faDescription")),this.state.settings.two_factor&&r.a.createElement(U.a,null,n("setting.inputCurrent2FACode")),r.a.createElement(z.a,{id:"standard-name",label:n("login.input2FACode"),type:"number",className:a.textField,value:this.state.authCode,onChange:this.handleChange("authCode"),margin:"normal",autoFocus:!0,fullWidth:!0})))),r.a.createElement(Mn.a,null,r.a.createElement(B.a,{onClick:this.handleClose,color:"default"},n("cancel",{ns:"common"})),r.a.createElement(B.a,{onClick:this.twoFactor,color:"primary",disabled:"twoFactor"===this.state.loading||""===this.state.authCode},this.state.settings.two_factor?n("setting.disable2FA"):n("setting.enable2FA")))),r.a.createElement(Ga.a,{open:this.state.changeTheme,onClose:this.handleClose},r.a.createElement(In.a,null,n("setting.themeColor")),r.a.createElement(Rn.a,null,r.a.createElement(_o.a,{value:this.state.chosenTheme,exclusive:!0,onChange:this.handleAlignment},Object.keys(this.state.settings.themes).map((function(e,t){return r.a.createElement(Ao.a,{value:e,key:t},r.a.createElement("div",{className:a.themeBlock,style:{backgroundColor:e}}))})))),r.a.createElement(Mn.a,null,r.a.createElement(B.a,{onClick:this.handleClose,color:"default"},n("cancel",{ns:"common"})),r.a.createElement(B.a,{onClick:this.changeTheme,color:"primary",disabled:"changeTheme"===this.state.loading||null===this.state.chosenTheme},n("ok",{ns:"common"})))),r.a.createElement(Ga.a,{open:this.state.showWebDavUrl,onClose:this.handleClose},r.a.createElement(In.a,null,n("setting.webdavServer")),r.a.createElement(Rn.a,null,r.a.createElement(z.a,{id:"standard-name",className:a.textField,value:window.location.origin+"/dav",margin:"normal",autoFocus:!0})),r.a.createElement(Mn.a,null,r.a.createElement(B.a,{onClick:this.handleClose,color:"default"},n("close",{ns:"common"})))),r.a.createElement(Ga.a,{open:this.state.showWebDavUserName,onClose:this.handleClose},r.a.createElement(In.a,null,n("setting.userName")),r.a.createElement(Rn.a,null,r.a.createElement(z.a,{id:"standard-name",className:a.textField,value:o.user_name,margin:"normal",autoFocus:!0})),r.a.createElement(Mn.a,null,r.a.createElement(B.a,{onClick:this.handleClose,color:"default"},n("close",{ns:"common"})))),r.a.createElement(ri.a,null))}}]),a}(n.Component),ii=Object(u.c)((function(e){return{title:e.siteConfig.title,authn:e.siteConfig.authn,viewMethod:e.viewUpdate.explorerViewMethod}}),(function(e){return{toggleSnackbar:function(t,a,n,r){e(Object(ne.S)(t,a,n,r))},applyThemes:function(t){e(Object(ne.a)(t))},toggleDaylightMode:function(){e(Object(ne.R)())},changeView:function(t){e(Object(ne.e)(t))},selectLanguage:function(){e(Object(Se.f)())}}}))(Object(Ie.a)((function(e){return{layout:Object(I.a)({width:"auto",marginLeft:e.spacing(3),marginRight:e.spacing(3)},e.breakpoints.up(1100+2*e.spacing(3)),{width:700,marginLeft:"auto",marginRight:"auto"}),sectionTitle:{paddingBottom:"10px",paddingTop:"30px"},rightIcon:{marginTop:"4px",marginRight:"10px",color:e.palette.text.secondary},uploadFromFile:{backgroundColor:Ho.a[100],color:Ho.a[600]},userGravatar:{backgroundColor:Vo.a[100],color:Vo.a[800]},policySelected:{backgroundColor:qo.a[100],color:qo.a[800]},infoText:Object(I.a)({marginRight:"17px"},e.breakpoints.down("xs"),{maxWidth:100,textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}),infoTextWithIcon:Object(I.a)({marginRight:"17px",marginTop:"1px"},e.breakpoints.down("xs"),{maxWidth:100,textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}),rightIconWithText:{marginTop:"0px",marginRight:"10px",color:e.palette.text.secondary},iconFix:{marginRight:"11px",marginLeft:"7px",minWidth:40},flexContainer:{display:"flex"},desenList:{paddingTop:0,paddingBottom:0},flexContainerResponse:Object(I.a)({display:"flex"},e.breakpoints.down("sm"),{display:"initial"}),desText:{marginTop:"10px"},secondColor:{height:"20px",width:"20px",backgroundColor:e.palette.secondary.main,borderRadius:"50%",marginRight:"17px"},firstColor:{height:"20px",width:"20px",backgroundColor:e.palette.primary.main,borderRadius:"50%",marginRight:"6px"},themeBlock:{height:"20px",width:"20px"},paddingBottom:{marginBottom:"30px"},paddingText:{paddingRight:e.spacing(2)},qrcode:{width:128,marginTop:16,marginRight:16}}}))(Object(s.k)(Object(Jt.a)()(oi)))),ci=a(458),li=a.n(ci),si=a(247),ui=a.n(si),pi=Object(x.a)((function(e){var t;return{layout:(t={width:"auto",marginTop:"110px",marginLeft:e.spacing(3),marginRight:e.spacing(3)},Object(I.a)(t,e.breakpoints.up("sm"),{width:400,marginLeft:"auto",marginRight:"auto"}),Object(I.a)(t,"marginBottom",110),t),paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center",padding:"".concat(e.spacing(2),"px ").concat(e.spacing(3),"px ").concat(e.spacing(3),"px")},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{marginTop:e.spacing(3)},link:{marginTop:"20px",display:"flex",width:"100%",justifyContent:"space-between"},buttonContainer:{display:"flex"},authnLink:{textAlign:"center",marginTop:16},avatarSuccess:{margin:e.spacing(1),backgroundColor:e.palette.primary.main}}}));var di=function(){var e=Object(re.a)().t,t=Object(n.useState)({email:"",password:"",password_repeat:""}),a=Object(D.a)(t,2),o=a[0],i=a[1],c=Object(n.useState)(!1),l=Object(D.a)(c,2),p=l[0],d=l[1],f=Object(n.useState)(!1),h=Object(D.a)(f,2),g=h[0],b=h[1],E=Object(u.e)((function(e){return e.siteConfig.title})),v=Object(u.e)((function(e){return e.siteConfig.regCaptcha})),O=Object(u.d)(),w=Object(n.useCallback)((function(e,t,a,n){return O(Object(ne.S)(e,t,a,n))}),[O]),k=Object(s.g)(),y=Object(we.a)(),x=Object(j.a)(y.breakpoints.down("sm")),C=function(e){return function(t){i(Object(m.a)(Object(m.a)({},o),{},Object(I.a)({},e,t.target.value)))}},S=je(),N=S.captchaLoading,T=S.isValidate,P=S.validate,L=S.CaptchaRender,F=S.captchaRefreshRef,R=S.captchaParamsRef,M=pi();return r.a.createElement("div",{className:M.layout},r.a.createElement(r.a.Fragment,null,!g&&r.a.createElement(A.a,{className:M.paper},r.a.createElement(_.a,{className:M.avatar},r.a.createElement(li.a,null)),r.a.createElement(U.a,{component:"h1",variant:"h5"},e("login.sinUpTitle",{title:E})),r.a.createElement("form",{className:M.form,onSubmit:function t(a){a.preventDefault(),o.password===o.password_repeat?(d(!0),T.current.isValidate||!v?q.c.post("/user",Object(m.a)({userName:o.email,Password:o.password},R.current)).then((function(t){d(!1),203===t.rawData.code?b(!0):(k.push("/login?username="+o.email),w("top","right",e("login.signUpSuccess"),"success"))})).catch((function(e){d(!1),w("top","right",e.message,"warning"),F.current()})):P((function(){return t(a)}),d)):w("top","right",e("login.passwordNotMatch"),"warning")}},r.a.createElement(W.a,{margin:"normal",required:!0,fullWidth:!0},r.a.createElement(z.a,{variant:"outlined",label:e("login.email"),inputProps:{name:"email",type:"email",id:"email"},InputProps:{startAdornment:!x&&r.a.createElement($.a,{position:"start"},r.a.createElement(K.a,null))},onChange:C("email"),autoComplete:!0,value:o.email,autoFocus:!0})),r.a.createElement(W.a,{margin:"normal",required:!0,fullWidth:!0},r.a.createElement(z.a,{variant:"outlined",label:e("login.password"),inputProps:{name:"password",type:"password",id:"password"},InputProps:{startAdornment:!x&&r.a.createElement($.a,{position:"start"},r.a.createElement(Y.a,null))},onChange:C("password"),value:o.password,autoComplete:!0})),r.a.createElement(W.a,{margin:"normal",required:!0,fullWidth:!0},r.a.createElement(z.a,{label:e("login.repeatPassword"),variant:"outlined",inputProps:{name:"pwdRepeat",type:"password",id:"pwdRepeat"},onChange:C("password_repeat"),InputProps:{startAdornment:!x&&r.a.createElement($.a,{position:"start"},r.a.createElement(Y.a,null))},value:o.password_repeat,autoComplete:!0})),v&&r.a.createElement(L,null),r.a.createElement(B.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",disabled:p||!!v&&N,className:M.submit},e("login.signUp"))),r.a.createElement(G.a,null),r.a.createElement("div",{className:M.link},r.a.createElement("div",null,r.a.createElement(H.a,{component:V.a,to:"/login"},e("login.backToSingIn"))),r.a.createElement("div",null,r.a.createElement(H.a,{component:V.a,to:"/forget"},e("login.forgetPassword"))))),g&&r.a.createElement(A.a,{className:M.paper},r.a.createElement(_.a,{className:M.avatarSuccess},r.a.createElement(ui.a,null)),r.a.createElement(U.a,{component:"h1",variant:"h5"},e("login.activateTitle")),r.a.createElement(U.a,{style:{marginTop:"10px"}},e("login.activateDescription")))))},mi=Object(x.a)((function(e){var t;return{layout:(t={width:"auto",marginTop:"110px",marginLeft:e.spacing(3),marginRight:e.spacing(3)},Object(I.a)(t,e.breakpoints.up("sm"),{width:400,marginLeft:"auto",marginRight:"auto"}),Object(I.a)(t,"marginBottom",110),t),paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center",padding:"".concat(e.spacing(2),"px ").concat(e.spacing(3),"px ").concat(e.spacing(3),"px")},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},submit:{marginTop:e.spacing(3)}}}));var fi=function(){var e=Object(re.a)().t,t=new URLSearchParams(Object(s.h)().search),a=Object(s.h)(),o=Object(n.useState)(!1),i=Object(D.a)(o,2),c=i[0],l=i[1],p=Object(n.useState)(""),d=Object(D.a)(p,2),m=d[0],f=d[1],h=Object(u.d)(),g=Object(n.useCallback)((function(e,t,a,n){return h(Object(ne.S)(e,t,a,n))}),[h]),b=Object(s.g)(),E=mi();return Object(n.useEffect)((function(){q.c.get("/user/activate/"+t.get("id")+"?sign="+t.get("sign")).then((function(e){f(e.data),l(!0)})).catch((function(e){g("top","right",e.message,"warning"),b.push("/login")}))}),[a]),r.a.createElement("div",{className:E.layout},c&&r.a.createElement(A.a,{className:E.paper},r.a.createElement(_.a,{className:E.avatar},r.a.createElement(ui.a,null)),r.a.createElement(U.a,{component:"h1",variant:"h5"},e("login.activateSuccess")),r.a.createElement(U.a,{style:{marginTop:"20px"}},e("login.accountActivated")),r.a.createElement(B.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:E.submit,onClick:function(){return b.push("/login?username="+m)}},e("login.backToSingIn"))))},hi=Object(x.a)((function(e){var t;return{layout:(t={width:"auto",marginTop:"110px",marginLeft:e.spacing(3),marginRight:e.spacing(3)},Object(I.a)(t,e.breakpoints.up("sm"),{width:400,marginLeft:"auto",marginRight:"auto"}),Object(I.a)(t,"marginBottom",110),t),paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center",padding:"".concat(e.spacing(2),"px ").concat(e.spacing(3),"px ").concat(e.spacing(3),"px")},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},submit:{marginTop:e.spacing(3)},link:{marginTop:"20px",display:"flex",width:"100%",justifyContent:"space-between"}}}));var gi=function(){var e=Object(re.a)().t,t=new URLSearchParams(Object(s.h)().search),a=Object(n.useState)({password:"",password_repeat:""}),o=Object(D.a)(a,2),i=o[0],c=o[1],l=Object(n.useState)(!1),p=Object(D.a)(l,2),d=p[0],f=p[1],h=Object(u.e)((function(e){return e.siteConfig.registerEnabled})),g=function(e){return function(t){c(Object(m.a)(Object(m.a)({},i),{},Object(I.a)({},e,t.target.value)))}},b=Object(u.d)(),E=Object(n.useCallback)((function(e,t,a,n){return b(Object(ne.S)(e,t,a,n))}),[b]),v=Object(s.g)(),O=Object(we.a)(),w=Object(j.a)(O.breakpoints.down("sm")),k=hi();return r.a.createElement("div",{className:k.layout},r.a.createElement(A.a,{className:k.paper},r.a.createElement(_.a,{className:k.avatar},r.a.createElement(X.a,null)),r.a.createElement(U.a,{component:"h1",variant:"h5"},e("login.findMyPassword")),r.a.createElement("form",{className:k.form,onSubmit:function(a){a.preventDefault(),i.password===i.password_repeat?(f(!0),q.c.patch("/user/reset",{secret:t.get("sign"),id:t.get("id"),Password:i.password}).then((function(){f(!1),v.push("/login"),E("top","right",e("login.passwordReset"),"success")})).catch((function(e){f(!1),E("top","right",e.message,"warning")}))):E("top","right",e("login.passwordNotMatch"),"warning")}},r.a.createElement(W.a,{margin:"normal",required:!0,fullWidth:!0},r.a.createElement(z.a,{variant:"outlined",label:e("login.newPassword"),inputProps:{type:"password",id:"pwd",name:"pwd"},InputProps:{startAdornment:!w&&r.a.createElement($.a,{position:"start"},r.a.createElement(Y.a,null))},onChange:g("password"),autoComplete:!0,value:i.password,autoFocus:!0})),r.a.createElement(W.a,{margin:"normal",required:!0,fullWidth:!0},r.a.createElement(z.a,{variant:"outlined",label:e("login.repeatNewPassword"),inputProps:{type:"password",id:"pwdRepeat",name:"pwdRepeat"},InputProps:{startAdornment:!w&&r.a.createElement($.a,{position:"start"},r.a.createElement(Y.a,null))},onChange:g("password_repeat"),autoComplete:!0,value:i.password_repeat,autoFocus:!0})),r.a.createElement(B.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",disabled:d,className:k.submit},e("login.resetPassword"))," ")," ",r.a.createElement(G.a,null),r.a.createElement("div",{className:k.link},r.a.createElement("div",null,r.a.createElement(H.a,{component:V.a,to:"/login"},e("login.backToSingIn"))),r.a.createElement("div",null,h&&r.a.createElement(H.a,{component:V.a,to:"/signup"},e("login.signUpAccount"))))))},bi=Object(x.a)((function(e){var t;return{layout:(t={width:"auto",marginTop:"110px",marginLeft:e.spacing(3),marginRight:e.spacing(3)},Object(I.a)(t,e.breakpoints.up("sm"),{width:400,marginLeft:"auto",marginRight:"auto"}),Object(I.a)(t,"marginBottom",110),t),paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center",padding:"".concat(e.spacing(2),"px ").concat(e.spacing(3),"px ").concat(e.spacing(3),"px")},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},submit:{marginTop:e.spacing(3)},link:{marginTop:"20px",display:"flex",width:"100%",justifyContent:"space-between"}}}));var Ei=function(){var e,t=Object(re.a)().t,a=Object(n.useState)({email:""}),o=Object(D.a)(a,2),i=o[0],c=o[1],l=Object(n.useState)(!1),s=Object(D.a)(l,2),p=s[0],d=s[1],f=Object(u.e)((function(e){return e.siteConfig.forgetCaptcha})),h=Object(u.e)((function(e){return e.siteConfig.registerEnabled})),g=Object(u.d)(),b=Object(n.useCallback)((function(e,t,a,n){return g(Object(ne.S)(e,t,a,n))}),[g]),E=je(),v=E.captchaLoading,O=E.isValidate,w=E.validate,k=E.CaptchaRender,y=E.captchaRefreshRef,x=E.captchaParamsRef,C=Object(we.a)(),S=Object(j.a)(C.breakpoints.down("sm")),N=bi();return r.a.createElement("div",{className:N.layout},r.a.createElement(A.a,{className:N.paper},r.a.createElement(_.a,{className:N.avatar},r.a.createElement(X.a,null)),r.a.createElement(U.a,{component:"h1",variant:"h5"},t("login.findMyPassword")),r.a.createElement("form",{className:N.form,onSubmit:function e(a){a.preventDefault(),d(!0),O.current.isValidate||!f?q.c.post("/user/reset",Object(m.a)({userName:i.email},x.current)).then((function(){d(!1),b("top","right",t("login.resetEmailSent"),"success")})).catch((function(e){d(!1),b("top","right",e.message,"warning"),y.current()})):w((function(){return e(a)}),d)}},r.a.createElement(W.a,{margin:"normal",required:!0,fullWidth:!0},r.a.createElement(z.a,{variant:"outlined",label:t("login.email"),inputProps:{name:"email",id:"email",type:"email"},InputProps:{startAdornment:!S&&r.a.createElement($.a,{position:"start"},r.a.createElement(K.a,null))},onChange:(e="email",function(t){c(Object(m.a)(Object(m.a)({},i),{},Object(I.a)({},e,t.target.value)))}),autoComplete:!0,value:i.email,autoFocus:!0})),f&&r.a.createElement(k,null),r.a.createElement(B.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",disabled:p||!!f&&v,className:N.submit},t("login.sendMeAnEmail"))," ")," ",r.a.createElement(G.a,null),r.a.createElement("div",{className:N.link},r.a.createElement("div",null,r.a.createElement(H.a,{component:V.a,to:"/login"},t("login.backToSingIn"))),r.a.createElement("div",null,h&&r.a.createElement(H.a,{component:V.a,to:"/signup"},t("login.signUpAccount"))))))},vi=a(284),Oi=a(7163),ji=a(237),wi=a.n(ji),ki=a(194),yi=a.n(ki),xi=a(461),Ci=a.n(xi),Si=a(459),Ni=a.n(Si),Ti=a(460),Pi=a.n(Ti),Li=a(7149),Fi=a(7150),Di=a(7151),Ii=a(117),Ri=function(e){Object(se.a)(a,e);var t=Object(ue.a)(a);function a(){var e;Object(ie.a)(this,a);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={items:[],currentIndex:0,currentTime:0,duration:0,progressText:"00:00/00:00",looptype:0},e.myAudioRef=r.a.createRef(),e.UNSAFE_componentWillReceiveProps=function(t){var a=[],n=0;if(""!==t.first.id){if(Ne.a.isSharePage(e.props.location.pathname)&&!t.first.path){var r={intro:t.first.name,src:q.b+"/share/preview/"+t.first.key};return n=0,a.push(r),e.setState({currentIndex:n,items:a}),e.props.audioPreviewSetIsOpen(!0),void e.props.showAudioPreview(Ii.initState.audioPreview.first)}t.other.map((function(r){var o=r.name.split(".").pop().toLowerCase();if(-1!==Vt.a.indexOf(o)){var i="";i=Ne.a.isSharePage(e.props.location.pathname)?(i=q.b+"/share/preview/"+r.key)+"?path="+encodeURIComponent("/"===r.path?r.path+r.name:r.path+"/"+r.name):q.b+"/file/preview/"+r.id;var c={intro:r.name,src:i};r.path===t.first.path&&r.name===t.first.name&&(n=a.length),a.push(c)}})),e.setState({currentIndex:n,items:a}),e.props.audioPreviewSetIsOpen(!0),e.props.showAudioPreview(Ii.initState.audioPreview.first)}},e.handleItemClick=function(t){return function(){e.setState({currentIndex:t})}},e.handleClose=function(){e.setState({currentIndex:-1}),e.pause(),e.props.audioPreviewSetPlaying(null,!1),e.props.audioPreviewSetIsOpen(!1)},e.backgroundPlay=function(){e.props.audioPreviewSetIsOpen(!1)},e.bindEvents=function(t){t&&(t.addEventListener("canplay",e.readyPlay),t.addEventListener("ended",e.loopnext),t.addEventListener("timeupdate",e.timeUpdate))},e.unbindEvents=function(t){t&&(t.removeEventListener("canplay",e.readyPlay),t.removeEventListener("ended",e.loopnext),t.removeEventListener("timeupdate",e.timeUpdate))},e.readyPlay=function(){e.play()},e.formatTime=function(e){if(isNaN(e))return"00:00";var t=Math.floor(e/60),a=Math.floor(e%60);return"".concat(t).padStart(2,"0")+":"+"".concat(a).padStart(2,"0")},e.timeUpdate=function(){var t=Math.floor(e.myAudioRef.current.currentTime);e.setState({currentTime:t,duration:e.myAudioRef.current.duration,progressText:e.formatTime(t)+"/"+e.formatTime(e.myAudioRef.current.duration)})},e.play=function(){e.myAudioRef.current.play(),e.props.audioPreviewSetPlaying(e.state.items[e.state.currentIndex].intro,!1)},e.pause=function(){var t;e.myAudioRef.current&&e.myAudioRef.current.pause(),e.props.audioPreviewSetPlaying(null===(t=e.state.items[e.state.currentIndex])||void 0===t?void 0:t.intro,!0)},e.playOrPaues=function(){e.state.isPlay?e.pause():e.play()},e.changeLoopType=function(){var t=e.state.looptype+1;t>=3&&(t=0),e.setState({looptype:t})},e.loopnext=function(){var t=e.state.currentIndex;if(0==e.state.looptype)(t+=1)>=e.state.items.length&&(t=0);else if(1==e.state.looptype);else if(2==e.state.looptype)if(e.state.items.length<=2)(t+=1)>=e.state.items.length&&(t=0);else for(;t==e.state.currentIndex;)t=Math.floor(Math.random()*e.state.items.length);e.state.currentIndex==t&&(e.myAudioRef.current.currentTime=0,e.play()),e.setState({currentIndex:t})},e.prev=function(){var t=e.state.currentIndex-1;t<0&&(t=e.state.items.length-1),e.setState({currentIndex:t})},e.next=function(){var t=e.state.currentIndex+1;t>=e.state.items.length&&(t=0),e.setState({currentIndex:t})},e.handleProgress=function(t,a){e.myAudioRef.current.currentTime=a},e}return Object(ce.a)(a,[{key:"componentDidMount",value:function(){this.myAudioRef.current&&this.bindEvents(this.myAudioRef.current)}},{key:"componentDidUpdate",value:function(){this.myAudioRef.current&&this.bindEvents(this.myAudioRef.current)}},{key:"componentWillUnmount",value:function(){this.unbindEvents(this.myAudioRef.current)}},{key:"render",value:function(){var e,t=this,a=this.state,n=a.currentIndex,o=a.items,i=this.props,c=i.isOpen,l=i.classes,s=i.t;return r.a.createElement(Ga.a,{open:c,onClose:this.backgroundPlay,"aria-labelledby":"form-dialog-title",maxWidth:"xs",fullWidth:!0,keepMounted:!0},r.a.createElement(In.a,{id:"form-dialog-title"},s("fileManager.musicPlayer")),r.a.createElement(Rn.a,null,r.a.createElement(Uo.a,{className:l.list,dense:!0},o.map((function(e,a){var o="label-".concat(e.intro);return r.a.createElement(Wo.a,{key:e.src,dense:!0,button:!0,onClick:t.handleItemClick(a),selected:a===n},r.a.createElement(gt.a,null,a===n?r.a.createElement(yi.a,null):r.a.createElement(wi.a,null)),r.a.createElement(Ca.a,{id:o,primary:"".concat(e.intro)}))}))),r.a.createElement("audio",{ref:this.myAudioRef,src:null===(e=o[n])||void 0===e?void 0:e.src}),r.a.createElement("div",{style:{"padding-top":8}}),r.a.createElement(dt.a,{container:!0,spacing:2,alignItems:"center"},r.a.createElement(dt.a,{item:!0,xs:!0},r.a.createElement(Oi.a,{classes:{root:l.slider_root},value:this.state.currentTime,onChange:this.handleProgress,step:1,min:0,max:this.state.duration,"aria-labelledby":"continuous-slider"})),r.a.createElement(dt.a,{item:!0},this.state.progressText)),r.a.createElement(dt.a,{container:!0,spacing:2,justifyContent:"center",justify:"center"},r.a.createElement(dt.a,{item:!0},r.a.createElement(Aa.a,{edge:"end","aria-label":"",onClick:this.changeLoopType},0===this.state.looptype?r.a.createElement(Li.a,null):1===this.state.looptype?r.a.createElement(Fi.a,null):r.a.createElement(Di.a,null))),r.a.createElement(dt.a,{item:!0},r.a.createElement(Aa.a,{edge:"end","aria-label":"",onClick:this.prev},r.a.createElement(Ni.a,null))),r.a.createElement(dt.a,{item:!0},r.a.createElement(Aa.a,{edge:"end","aria-label":"",onClick:this.pause},r.a.createElement(Pi.a,null))),r.a.createElement(dt.a,{item:!0},r.a.createElement(Aa.a,{edge:"end","aria-label":"",onClick:this.play},r.a.createElement(yi.a,null))),r.a.createElement(dt.a,{item:!0},r.a.createElement(Aa.a,{edge:"end","aria-label":"",onClick:this.next},r.a.createElement(Ci.a,null))))),r.a.createElement(Mn.a,null,r.a.createElement(B.a,{onClick:this.handleClose},s("fileManager.closeAndStop")),r.a.createElement(B.a,{onClick:this.backgroundPlay},s("fileManager.playInBackground"))))}}]),a}(n.Component),Mi=Object(u.c)((function(e){return{first:e.explorer.audioPreview.first,other:e.explorer.audioPreview.other,isOpen:e.explorer.audioPreview.isOpen,playingName:e.explorer.audioPreview.playingName}}),(function(e){return{showAudioPreview:function(t){e(Object(ne.P)(t))},audioPreviewSetIsOpen:function(t){e(Object(ne.b)(t))},audioPreviewSetPlaying:function(t,a){e(Object(ne.c)(t,a))}}}))(Object(Ie.a)((function(e){return{list:{backgroundColor:e.palette.background.paper,position:"relative",overflow:"auto",maxHeight:300},slider_root:{"vertical-align":"middle"}}}))(Object(s.k)(Object(Jt.a)()(Ri)))),Ai=r.a.lazy((function(){return a.e(8).then(a.t.bind(null,7922,7)).then((function(e){return{default:e.ReactReader}}))})),_i=Object(x.a)((function(e){return{layout:{height:"calc(100vh - 64px)"},paper:{marginBottom:e.spacing(3)}}}));function Ui(){var e=Object(s.j)(),t=Object(s.h)(),a=new URLSearchParams(Object(s.h)().search),o=Object(s.i)().id,i=Object(cn.a)(a,e,t).path,c=Ne.a.isSharePage(t.pathname),l=Object(n.useState)(null),p=Object(D.a)(l,2),d=p[0],m=p[1],f=Object(u.d)(),h=(Object(n.useCallback)((function(e,t,a,n){return f(Object(ne.S)(e,t,a,n))}),[f]),Object(n.useMemo)((function(){return Object(q.e)(c,o,a.get("id"),a.get("share_path"))}),[o,t,i])),g=_i();return r.a.createElement("div",{className:g.layout},r.a.createElement(n.Suspense,{fallback:r.a.createElement(pn.a,null)},r.a.createElement(Ai,{location:d,locationChanged:function(e){m(e)},epubInitOptions:{openAs:"epub"},showToc:!1,className:g.container,url:h})))}var Wi=r.a.lazy((function(){return Promise.all([a.e(4),a.e(9),a.e(3)]).then(a.bind(null,8083))}));function zi(){var e=Object(u.e)((function(e){return e.siteConfig.theme})),t=Object(u.e)((function(e){return e.viewUpdate.isLogin})),a=Object(j.a)("(prefers-color-scheme: dark)"),o=Object(re.a)().t,i=r.a.useMemo((function(){e.palette.type=a?"dark":"light";var t=h.a.GetPreference("theme_mode");t&&(e.palette.type=t);var n=Object(k.a)(Object(m.a)(Object(m.a)({},e),{},{palette:Object(m.a)(Object(m.a)({},e.palette),{},{primary:Object(m.a)(Object(m.a)({},e.palette.primary),{},{main:"dark"===e.palette.type?Object(y.i)(e.palette.primary.main,.3):e.palette.primary.main})}),shape:Object(m.a)(Object(m.a)({},e.shape),{},{borderRadius:12}),overrides:{MuiButton:{root:{textTransform:"none"}},MuiTab:{root:{textTransform:"none"}}}}));return Object(N.d)("dark"===e.palette.type?n.palette.background.default:n.palette.primary.main),n}),[a,e]),c=Object(x.a)((function(e){return{root:{display:"flex"},content:{flexGrow:1,padding:e.spacing(0),minWidth:0},toolbar:e.mixins.toolbar}}))(),l=Object(s.j)().path;return r.a.createElement(r.a.Fragment,null,r.a.createElement(C.a,{theme:i},r.a.createElement("div",{className:c.root,id:"container"},r.a.createElement(S.a,null),r.a.createElement(w.a,null),r.a.createElement(O.a,null),r.a.createElement("main",{className:c.content},r.a.createElement("div",{className:c.toolbar}),r.a.createElement(s.d,null,r.a.createElement(b,{exact:!0,path:l,isLogin:t},r.a.createElement(s.a,{to:{pathname:"/home"}})),r.a.createElement(b,{path:"".concat(l,"home"),isLogin:t},r.a.createElement(on,null)),r.a.createElement(b,{path:"".concat(l,"video"),isLogin:t},r.a.createElement(jn,null)),r.a.createElement(b,{path:"".concat(l,"text"),isLogin:t},r.a.createElement(Br.a,null)),r.a.createElement(b,{path:"".concat(l,"doc"),isLogin:t},r.a.createElement(zr,null)),r.a.createElement(b,{path:"".concat(l,"pdf"),isLogin:t},r.a.createElement(n.Suspense,{fallback:r.a.createElement(kr,null)},r.a.createElement(Wi,null))),r.a.createElement(b,{path:"".concat(l,"code"),isLogin:t},r.a.createElement(vi.a,null)),r.a.createElement(b,{path:"".concat(l,"epub"),isLogin:t},r.a.createElement(Ui,null)),r.a.createElement(b,{path:"".concat(l,"aria2"),isLogin:t},r.a.createElement(Or,null)),r.a.createElement(b,{path:"".concat(l,"shares"),isLogin:t},r.a.createElement(Bn,null)),r.a.createElement(s.b,{path:"".concat(l,"search"),isLogin:t},r.a.createElement(Cn,null)),r.a.createElement(s.b,{path:"".concat(l,"setting"),isLogin:t},r.a.createElement(ii,null)),r.a.createElement(b,{path:"".concat(l,"profile/:id"),isLogin:t},r.a.createElement(po,null)),r.a.createElement(b,{path:"".concat(l,"webdav"),isLogin:t},r.a.createElement(co,null)),r.a.createElement(b,{path:"".concat(l,"tasks"),isLogin:t},r.a.createElement(so,null)),r.a.createElement(v,{exact:!0,path:"".concat(l,"login"),isLogin:t},r.a.createElement(ye,null)),r.a.createElement(v,{exact:!0,path:"".concat(l,"signup"),isLogin:t},r.a.createElement(di,null)),r.a.createElement(s.b,{path:"".concat(l,"activate"),exact:!0},r.a.createElement(fi,null)),r.a.createElement(s.b,{path:"".concat(l,"reset"),exact:!0},r.a.createElement(gi,null)),r.a.createElement(s.b,{path:"".concat(l,"forget"),exact:!0},r.a.createElement(Ei,null)),r.a.createElement(s.b,{exact:!0,path:"".concat(l,"s/:id")},r.a.createElement(Ar,null)),r.a.createElement(s.b,{path:"".concat(l,"s/:id/video(/)*")},r.a.createElement(jn,null)),r.a.createElement(s.b,{path:"".concat(l,"s/:id/doc(/)*")},r.a.createElement(zr,null)),r.a.createElement(s.b,{path:"".concat(l,"s/:id/text(/)*")},r.a.createElement(Br.a,null)),r.a.createElement(s.b,{path:"".concat(l,"s/:id/pdf(/)*")},r.a.createElement(n.Suspense,{fallback:r.a.createElement(kr,null)},r.a.createElement(Wi,null))),r.a.createElement(s.b,{path:"".concat(l,"s/:id/code(/)*")},r.a.createElement(vi.a,null)),r.a.createElement(s.b,{path:"".concat(l,"s/:id/epub(/)*")},r.a.createElement(Ui,null)),r.a.createElement(s.b,{path:"*"},r.a.createElement(F,{msg:o("pageNotFound",{ns:"common"})})))),r.a.createElement(Mi,null))))}var Bi=a(11),Gi=a.n(Bi),Hi=a(23),Vi=a(21),qi=function(e){if(void 0!==e.user&&!e.user.anonymous){var t=JSON.parse(e.themes),a=e.user;delete e.user,""!==a.preferred_theme&&void 0!==t[a.preferred_theme]&&(e.theme=t[a.preferred_theme]),h.a.authenticate(a)}return void 0!==e.user&&e.user.anonymous&&h.a.SetUser(e.user),e};function Ki(){return(Ki=Object(Hi.a)(Gi.a.mark((function e(t){return Gi.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:q.c.get("/site/config").then((function(e){var a=JSON.parse(e.data.themes);e.data.theme=a[e.data.defaultTheme],e.data=qi(e.data),t.dispatch(Object(ne.N)(e.data)),localStorage.setItem("siteConfigCache",JSON.stringify(e.data)),e.data.wopi_exts&&Object(Vt.l)(e.data.wopi_exts);var n=h.a.GetPreference("view_method");n?t.dispatch(Object(ne.e)(n)):Ne.a.isSharePage(window.location.pathname)?t.dispatch(Object(ne.e)(e.data.share_view_method)):t.dispatch(Object(ne.e)(e.data.home_view_method))})).catch((function(e){t.dispatch(Object(ne.S)("top","right",Vi.a.t("errLoadingSiteConfig",{ns:"common"})+e.message,"error"))}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Yi=a(33),Ji=a.n(Yi),Zi={isLogin:h.a.Check(),open:!1,explorerViewMethod:"icon",sortMethod:h.a.GetPreferenceWithDefault("sort","timePos"),subTitle:null,contextType:"none",contextOpen:!1,menuOpen:!1,navigatorLoading:!0,navigatorError:!1,navigatorErrorMsg:null,modalsLoading:!1,storageRefresh:!1,userPopoverAnchorEl:null,shareUserPopoverAnchorEl:null,modals:{createNewFolder:!1,createNewFile:!1,rename:!1,move:!1,remove:!1,share:!1,music:!1,remoteDownload:!1,remoteDownloadTorrent:null,getSource:"",copy:!1,resave:!1,compress:!1,decompress:!1,loading:!1,loadingText:"",directoryDownloading:!1,directoryDownloadLog:"",directoryDownloadDone:!1},snackbar:{toggle:!1,vertical:"top",horizontal:"center",msg:"",color:""},pagination:{page:1,size:h.a.GetPreferenceWithDefault("pagination",100)},openFileSelector:0,openFolderSelector:0,shareInfo:null},Qi=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Zi,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"DRAWER_TOGGLE":return Object.assign({},e,{open:t.open});case"CHANGE_VIEW_METHOD":return Object.assign({},e,{explorerViewMethod:t.method});case"SET_NAVIGATOR_LOADING_STATUE":return Object.assign({},e,{navigatorLoading:t.status});case"SET_NAVIGATOR_ERROR":return Object.assign({},e,{navigatorError:t.status,navigatorErrorMsg:t.msg});case"OPEN_CREATE_FOLDER_DIALOG":return Object.assign({},e,{modals:Object.assign({},e.modals,{createNewFolder:!0}),contextOpen:!1});case"OPEN_CREATE_FILE_DIALOG":return Object.assign({},e,{modals:Object.assign({},e.modals,{createNewFile:!0}),contextOpen:!1});case"OPEN_RENAME_DIALOG":return Object.assign({},e,{modals:Object.assign({},e.modals,{rename:!0}),contextOpen:!1});case"OPEN_REMOVE_DIALOG":return Object.assign({},e,{modals:Object.assign({},e.modals,{remove:!0}),contextOpen:!1});case"OPEN_MOVE_DIALOG":return Object.assign({},e,{modals:Object.assign({},e.modals,{move:!0}),contextOpen:!1});case"OPEN_RESAVE_DIALOG":return Object.assign({},e,{modals:Object.assign({},e.modals,{resave:!0}),contextOpen:!1});case"SET_USER_POPOVER":return Object.assign({},e,{userPopoverAnchorEl:t.anchor});case"SET_SHARE_USER_POPOVER":return Object.assign({},e,{shareUserPopoverAnchorEl:t.anchor});case"OPEN_SHARE_DIALOG":return Object.assign({},e,{modals:Object.assign({},e.modals,{share:!0}),contextOpen:!1});case"OPEN_MUSIC_DIALOG":return Object.assign({},e,{modals:Object.assign({},e.modals,{music:!0}),contextOpen:!1});case"OPEN_REMOTE_DOWNLOAD_DIALOG":return Object.assign({},e,{modals:Object.assign({},e.modals,{remoteDownload:!0}),contextOpen:!1});case"OPEN_TORRENT_DOWNLOAD_DIALOG":return Object.assign({},e,{modals:Object.assign({},e.modals,{remoteDownload:!0,remoteDownloadTorrent:t.selected}),contextOpen:!1});case"OPEN_DECOMPRESS_DIALOG":return Object.assign({},e,{modals:Object.assign({},e.modals,{decompress:!0}),contextOpen:!1});case"OPEN_COMPRESS_DIALOG":return Object.assign({},e,{modals:Object.assign({},e.modals,{compress:!0}),contextOpen:!1});case"OPEN_GET_SOURCE_DIALOG":return Object.assign({},e,{modals:Object.assign({},e.modals,{getSource:t.source}),contextOpen:!1});case"OPEN_COPY_DIALOG":return Object.assign({},e,{modals:Object.assign({},e.modals,{copy:!0}),contextOpen:!1});case"OPEN_LOADING_DIALOG":return Object.assign({},e,{modals:Object.assign({},e.modals,{loading:!0,loadingText:t.text}),contextOpen:!1});case"OPEN_DIRECTORY_DOWNLOAD_DIALOG":return Object.assign({},e,{modals:Object.assign({},e.modals,{directoryDownloading:t.downloading,directoryDownloadLog:t.log,directoryDownloadDone:t.done}),contextOpen:!1});case"CLOSE_CONTEXT_MENU":return Object.assign({},e,{contextOpen:!1});case"CLOSE_ALL_MODALS":return Object.assign({},e,{modals:Object.assign({},e.modals,{createNewFolder:!1,createNewFile:!1,rename:!1,move:!1,remove:!1,share:!1,music:!1,remoteDownload:!1,remoteDownloadTorrent:null,getSource:"",resave:!1,copy:!1,loading:!1,compress:!1,decompress:!1,option:void 0,directoryDownloading:!1,directoryDownloadLog:"",directoryDownloadDone:!1})});case"TOGGLE_SNACKBAR":return Object.assign({},e,{snackbar:{toggle:!e.snackbar.toggle,vertical:t.vertical,horizontal:t.horizontal,msg:t.msg,color:t.color}});case"SET_MODALS_LOADING":return Object.assign({},e,{modalsLoading:t.status});case"SET_SESSION_STATUS":return Object(m.a)(Object(m.a)({},e),{},{isLogin:t.status});case"REFRESH_STORAGE":return Object.assign({},e,{storageRefresh:!e.storageRefresh});case"SEARCH_MY_FILE":return Object.assign({},e,{contextOpen:!1,navigatorError:!1,navigatorLoading:!0});case"CHANGE_CONTEXT_MENU":return e.contextOpen&&t.open?Object.assign({},e):Object.assign({},e,{contextOpen:t.open,contextType:t.menuType});case"SET_SUBTITLE":return Object.assign({},e,{subTitle:t.title});case"SET_SORT_METHOD":return Object(m.a)(Object(m.a)({},e),{},{sortMethod:t.method});case"SET_NAVIGATOR":return Object(m.a)(Object(m.a)({},e),{},{contextOpen:!1,navigatorError:!1,navigatorLoading:t.navigatorLoading});case"SET_OPTION_MODAL":return Object.assign({},e,{modals:Object.assign({},e.modals,{option:t.option}),contextOpen:!1});case"OPEN_FILE_SELECTOR":return Object(m.a)(Object(m.a)({},e),{},{openFileSelector:e.openFileSelector+1,contextOpen:!1});case"OPEN_FOLDER_SELECTOR":return Object(m.a)(Object(m.a)({},e),{},{openFolderSelector:e.openFolderSelector+1,contextOpen:!1});case"SET_PAGINATION":return Object(m.a)(Object(m.a)({},e),{},{pagination:t.pagination});case"SET_SHARE_INFO":return Object(m.a)(Object(m.a)({},e),{},{shareInfo:t.shareInfo});default:return e}},Xi=a(189),$i=function(e,t){return window.currntPath=e,Object.assign({},t,{navigator:Object.assign({},t.navigator,{path:e})})},ec=function(e){var t=JSON.parse(localStorage.getItem("siteConfigCache"));null!=t&&(e.siteConfig=t);var a=new URL(window.location.href).searchParams.get("path");return e.navigator.path=null===a?"/":a,e.siteConfig=qi(e.siteConfig),document.title=e.siteConfig.title,e}({siteConfig:{title:window.subTitle,siteICPId:"",loginCaptcha:!1,regCaptcha:!1,forgetCaptcha:!1,emailActive:!1,QQLogin:!1,themes:null,authn:!1,theme:{palette:{common:{black:"#000",white:"#fff"},background:{paper:"#fff",default:"#fafafa"},primary:{light:"#7986cb",main:"#3f51b5",dark:"#303f9f",contrastText:"#fff"},secondary:{light:"#ff4081",main:"#f50057",dark:"#c51162",contrastText:"#fff"},error:{light:"#e57373",main:"#f44336",dark:"#d32f2f",contrastText:"#fff"},text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.54)",disabled:"rgba(0, 0, 0, 0.38)",hint:"rgba(0, 0, 0, 0.38)"},explorer:{filename:"#474849",icon:"#8f8f8f",bgSelected:"#D5DAF0",emptyIcon:"#e8e8e8"}}},captcha_ReCaptchaKey:"defaultKey",captcha_type:"normal",tcaptcha_captcha_app_id:"",wopi_exts:[]},navigator:{path:"/",refresh:!0}}),tc=function(e){Object(se.a)(a,e);var t=Object(ue.a)(a);function a(e){var n;return Object(ie.a)(this,a),(n=t.call(this,e)).state={hasError:!1,error:null,errorInfo:null},n}return Object(ce.a)(a,[{key:"componentDidCatch",value:function(e,t){this.setState({error:e,errorInfo:t})}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.t;return this.state.hasError?r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",{className:t.h1},":("),r.a.createElement("h2",{className:t.h2},a("renderError")),this.state.error&&this.state.errorInfo&&this.state.errorInfo.componentStack&&r.a.createElement("details",null,r.a.createElement("summary",null,a("errorDetails")),r.a.createElement("pre",null,r.a.createElement("code",null,this.state.error.toString())),r.a.createElement("pre",null,r.a.createElement("code",null,this.state.errorInfo.componentStack)))):this.props.children}}],[{key:"getDerivedStateFromError",value:function(){return{hasError:!0}}}]),a}(r.a.Component),ac=Object(Jt.a)(["common"])(Object(Ie.a)({h1:{color:"#a4a4a4",margin:"5px 0px"},h2:{margin:"15px 0px"}})(tc)),nc=a(73),rc=a(381);a.d(t,"history",(function(){return ic}));var oc=r.a.lazy((function(){return Promise.all([a.e(7),a.e(11)]).then(a.bind(null,8086))}));""!==window.location.hash&&(window.location.href=window.location.hash.split("#")[1]),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");l?(!function(e,t){fetch(e).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):c(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):c(t,e)}))}}({onUpdate:function(e){Object(N.p)(),alert(Vi.a.t("newVersionRefresh",{ns:"common"})),e&&e.waiting&&e.waiting.postMessage({type:"SKIP_WAITING"}),window.location.reload()}});var ic=Object(nc.a)(),cc=Object(p.a)(Object(rc.a)(ic),d.a);var lc,sc=Object(p.c)((lc=ic,function(e,t){var a=e||{},n=a.viewUpdate,r=a.explorer,o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ec,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_NAVIGATOR":return $i(t.path,e);case"TOGGLE_DAYLIGHT_MODE":var a=Object.assign({},e);return void 0===a.siteConfig.theme.palette.type||"light"===a.siteConfig.theme.palette.type?Object(m.a)(Object(m.a)({},e),{},{siteConfig:Object(m.a)(Object(m.a)({},e.siteConfig),{},{theme:Object(m.a)(Object(m.a)({},e.siteConfig.theme),{},{palette:Object(m.a)(Object(m.a)({},e.siteConfig.theme.palette),{},{type:"dark"})})})}):Object(m.a)(Object(m.a)({},e),{},{siteConfig:Object(m.a)(Object(m.a)({},e.siteConfig),{},{theme:Object(m.a)(Object(m.a)({},e.siteConfig.theme),{},{palette:Object(m.a)(Object(m.a)({},e.siteConfig.theme.palette),{},{type:"light"})})})});case"APPLY_THEME":if(null!==e.siteConfig.themes){var n=JSON.parse(e.siteConfig.themes);return void 0===n[t.theme]?e:Object.assign({},e,{siteConfig:Object.assign({},e.siteConfig,{theme:n[t.theme]})})}break;case"NAVIGATOR_UP":return $i(t.path,e);case"SET_SITE_CONFIG":return Object.assign({},e,{siteConfig:t.config});case"REFRESH_FILE_LIST":return Object.assign({},e,{navigator:Object.assign({},e.navigator,{refresh:!e.navigator.refresh})});case"SEARCH_MY_FILE":return Object.assign({},e,{navigator:Object.assign({},e.navigator,{path:"/"+Vi.a.t("fileManager.searchResult"),refresh:e.explorer.search?!e.navigator.refresh:e.navigator.refresh})});default:return e}}(e,t),i=function(e){var t=Object(p.b)(e);return function(a,n){if(n.type&&!n.type.startsWith("@@")&&n.type.split("/").length>1){var r=n.type.split("/")[0],o=e[r];return Ji()(!!o,"reducer ".concat(r," doesn't exist")),o&&o(a,n)}return t(a,n)}}({viewUpdate:Qi,explorer:Ii.default,router:Object(Xi.b)(lc)})({viewUpdate:n,explorer:r},t);return Object(m.a)(Object(m.a)({},o),i)}),cc);!function(e){Ki.apply(this,arguments)}(sc),i.a.render(r.a.createElement(n.Suspense,{fallback:r.a.createElement(kr,null)},r.a.createElement(ac,null,r.a.createElement(u.a,{store:sc},r.a.createElement(Xi.a,{history:ic},r.a.createElement(s.d,null,r.a.createElement(s.b,{path:"/admin"},r.a.createElement(oc,null)),r.a.createElement(s.b,{exact:!0,path:""},r.a.createElement(zi,null))))))),document.getElementById("root"))},72:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var n=a(0),r=a.n(n),o=a(30),i=a(95),c=Object(i.a)((function(e){return{emptyContainer:{bottom:"0",color:e.palette.action.disabled,textAlign:"center",paddingTop:"20px"},emptyInfoBig:{fontSize:"25px",color:e.palette.action.disabled},emptyInfoSmall:{color:e.palette.action.disabled}}}));function l(e){var t=e.primary,a=e.secondary,n=e.top,i=void 0===n?20:n,l=e.size,s=void 0===l?1:l,u=c();return r.a.createElement("div",{style:{margin:"".concat(50*s,"px auto"),paddingTop:i},className:u.emptyContainer},r.a.createElement(o.F,{style:{fontSize:160*s}}),r.a.createElement("div",{style:{fontSize:25*s},className:u.emptyInfoBig},t),""!==a&&r.a.createElement("div",{className:u.emptyInfoSmall},a))}},91:function(e,t,a){"use strict";var n=a(6),r=a(13),o=a(14),i=a(16),c=a(17),l=a(0),s=a.n(l),u=a(79),p=a.n(u),d=a(59),m=a.n(d),f=a(439),h=a.n(f),g=a(5),b=a(31),E=a.n(b),v=a(483),O=a(74),j=a(64),w=a(62),k=a(200),y=a(53),x=a(8),C=a(12),S=a(2),N=a(199),T=function(e){Object(i.a)(a,e);var t=Object(c.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={presentPath:"/",dirList:[],selectedTarget:null},e.componentDidMount=function(){var t=e.props.presentPath;e.enterFolder(e.props.search?"/":t)},e.back=function(){var t=e.state.presentPath.split("/");t.pop();var a=t.join("/");e.enterFolder(""===a?"/":a)},e.enterFolder=function(t){C.c.get((e.props.api?e.props.api:"/directory")+encodeURIComponent(t)).then((function(a){var n=a.data.objects.filter((function(t){return"dir"===t.type&&-1===e.props.selected.findIndex((function(e){return e.name===t.name&&e.path===t.path}))}));if(n.forEach((function(e){e.displayName=e.name})),"/"===t)n.unshift({name:"/",path:"",displayName:"/"});else for(var r=t,o=t,i=["fileManager.currentFolder","fileManager.backToParentFolder"],c=0;c<2;c++){var l=r.split("/");o=""===(o=l.pop())?"/":o,r=l.join("/"),n.unshift({name:o,path:r,displayName:e.props.t(i[c])})}e.setState({presentPath:t,dirList:n,selectedTarget:null})})).catch((function(t){e.props.toggleSnackbar("top","right",t.message,"warning")}))},e.handleSelect=function(t){e.setState({selectedTarget:t}),e.props.onSelect(e.state.dirList[t])},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.classes;t.t;return s.a.createElement("div",{className:a.container},s.a.createElement(v.a,{className:a.selector},this.state.dirList.map((function(t,r){return s.a.createElement(O.a,{classes:{selected:a.selected},key:r,selected:e.state.selectedTarget===r,onClick:function(){return e.handleSelect(r)}},s.a.createElement(j.a,{className:a.icon},s.a.createElement(p.a,null)),s.a.createElement(w.a,{classes:{primary:a.primary},primary:t.displayName,primaryTypographyProps:{style:{whiteSpace:"normal"}}}),function(t){return"/"===e.state.presentPath?0!==t:1!==t}(r)&&s.a.createElement(k.a,{className:a.buttonIcon},s.a.createElement(y.a,{className:E()(Object(n.a)({},a.iconWhite,e.state.selectedTarget===r)),onClick:function(){return 0===r?e.back():e.enterFolder("/"===t.path?t.path+t.name:t.path+"/"+t.name)}},function(t){return"/"===e.state.presentPath?s.a.createElement(m.a,null):0===t?s.a.createElement(h.a,null):s.a.createElement(m.a,null)}(r))))}))))}}]),a}(l.Component);t.a=Object(g.c)((function(e){return{search:e.explorer.search}}),(function(e){return{toggleSnackbar:function(t,a,n,r){e(Object(S.S)(t,a,n,r))}}}))(Object(x.a)((function(e){return{iconWhite:{color:e.palette.common.white},selected:{backgroundColor:e.palette.primary.main+"!important","& $primary, & $icon":{color:e.palette.common.white}},primary:{},icon:{},buttonIcon:{},selector:{minWidth:"300px"},container:{maxHeight:"330px",overflowY:" auto"}}}))(Object(N.a)()(T)))}},[[6965,5,6]]]);